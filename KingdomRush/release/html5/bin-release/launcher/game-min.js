var egret;
(function(d){d.egret_string_code={};d.egret_string_code[-1]="\u4e0d\u5b58\u5728\u7684stringId:{0}";d.egret_string_code[1E3]="Browser.isMobile\u63a5\u53e3\u53c2\u6570\u5df2\u7ecf\u53d8\u66f4\uff0c\u8bf7\u5c3d\u5feb\u8c03\u6574\u7528\u6cd5\u4e3a egret.MainContext.deviceType == egret.MainContext.DEVICE_MOBILE";d.egret_string_code[1001]="\u8be5\u65b9\u6cd5\u76ee\u524d\u4e0d\u5e94\u4f20\u5165 resolutionPolicy \u53c2\u6570\uff0c\u8bf7\u5728 docs/1.0_Final_ReleaseNote\u4e2d\u67e5\u770b\u5982\u4f55\u5347\u7ea7";d.egret_string_code[1002]=
"egret.Ticker\u662f\u6846\u67b6\u5185\u90e8\u4f7f\u7528\u7684\u5355\u4f8b\uff0c\u4e0d\u5141\u8bb8\u5728\u5916\u90e8\u5b9e\u4f8b\u5316\uff0c\u8ba1\u65f6\u5668\u8bf7\u4f7f\u7528egret.Timer\u7c7b\uff01";d.egret_string_code[1003]="Ticker#setTimeout\u65b9\u6cd5\u5373\u5c06\u5e9f\u5f03,\u8bf7\u4f7f\u7528egret.setTimeout";d.egret_string_code[1004]="ExternalInterface\u8c03\u7528\u4e86js\u6ca1\u6709\u6ce8\u518c\u7684\u65b9\u6cd5: {0}";d.egret_string_code[1005]="\u8bbe\u7f6e\u4e86\u5df2\u7ecf\u5b58\u5728\u7684blendMode: {0}";
d.egret_string_code[1006]="child\u4e0d\u5728\u5f53\u524d\u5bb9\u5668\u5185";d.egret_string_code[1007]="\u63d0\u4f9b\u7684\u7d22\u5f15\u8d85\u51fa\u8303\u56f4";d.egret_string_code[1008]="child\u672a\u88abaddChild\u5230\u8be5parent";d.egret_string_code[1009]="\u8bbe\u7f6e\u4e86\u5df2\u7ecf\u5b58\u5728\u7684\u9002\u914d\u6a21\u5f0f:{0}";d.egret_string_code[1010]="addEventListener\u4fa6\u542c\u51fd\u6570\u4e0d\u80fd\u4e3a\u7a7a";d.egret_string_code[1011]='BitmapText\u627e\u4e0d\u5230\u6587\u5b57\u6240\u5bf9\u5e94\u7684\u7eb9\u7406:"{0}"';
d.egret_string_code[1012]="egret.BitmapTextSpriteSheet\u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528egret.BitmapFont\u4ee3\u66ff\u3002";d.egret_string_code[1013]="TextField.setFocus \u6ca1\u6709\u5b9e\u73b0";d.egret_string_code[1014]="Ease\u4e0d\u80fd\u88ab\u5b9e\u4f8b\u5316";d.egret_string_code[1015]="xml not found!";d.egret_string_code[1016]="{0}\u5df2\u7ecf\u5e9f\u5f03";d.egret_string_code[1017]="JSON\u6587\u4ef6\u683c\u5f0f\u4e0d\u6b63\u786e: {0}\ndata: {1}";d.egret_string_code[1018]="egret_html5_localStorage.setItem\u4fdd\u5b58\u5931\u8d25,key={0}&value={1}";
d.egret_string_code[1019]="\u7f51\u7edc\u5f02\u5e38:{0}";d.egret_string_code[1020]="\u65e0\u6cd5\u521d\u59cb\u5316\u7740\u8272\u5668";d.egret_string_code[1021]="\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301webgl";d.egret_string_code[1022]="{0} ArgumentError";d.egret_string_code[1023]="\u6b64\u65b9\u6cd5\u5728ScrollView\u5185\u4e0d\u53ef\u7528!";d.egret_string_code[1024]="\u4f7f\u7528\u4e86\u5c1a\u672a\u5b9e\u73b0\u7684ScaleMode";d.egret_string_code[1025]="\u9047\u5230\u6587\u4ef6\u5c3e";d.egret_string_code[1026]=
"EncodingError! The code point {0} could not be encoded.";d.egret_string_code[1027]="DecodingError";d.egret_string_code[1028]="\u8c03\u7528\u4e86\u672a\u914d\u7f6e\u7684\u6ce8\u5165\u89c4\u5219:{0}\u3002 \u8bf7\u5148\u5728\u9879\u76ee\u521d\u59cb\u5316\u91cc\u914d\u7f6e\u6307\u5b9a\u7684\u6ce8\u5165\u89c4\u5219\uff0c\u518d\u8c03\u7528\u5bf9\u5e94\u5355\u4f8b\u3002";d.egret_string_code[1029]="Function.prototype.bind - what is trying to be bound is not callable";d.egret_string_code[1030]="\u8be5API\u5df2\u5e9f\u5f03";
d.egret_string_code[1031]="setVolume\u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528this.volume = value\u4ee3\u66ff";d.egret_string_code[1032]="getVolume\u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528this.volume\u4ee3\u66ff";d.egret_string_code[1033]="\u8de8\u57df\u56fe\u7247\u4e0d\u53ef\u4ee5\u4f7f\u7528toDataURL\u6765\u8f6c\u6362\u6210base64";d.egret_string_code[1034]='\u97f3\u4e50\u6587\u4ef6\u89e3\u7801\u5931\u8d25\uff1a"{0}"\uff0c\u8bf7\u4f7f\u7528\u6807\u51c6\u7684\u8f6c\u6362\u5de5\u5177\u91cd\u65b0\u8f6c\u6362\u4e0bmp3\u3002';
d.egret_string_code[1035]="Native \u4e0b\u6682\u672a\u5b9e\u73b0\u6b64\u529f\u80fd\uff01";d.egret_string_code[2E3]="RES.createGroup()\u4f20\u5165\u4e86\u914d\u7f6e\u4e2d\u4e0d\u5b58\u5728\u7684\u952e\u503c: {0}";d.egret_string_code[2001]='RES\u52a0\u8f7d\u4e86\u4e0d\u5b58\u5728\u6216\u7a7a\u7684\u8d44\u6e90\u7ec4:"{0}"';d.egret_string_code[2002]="\u8bf7\u4e0d\u8981\u4f7f\u7528\u4e0d\u540c\u7684\u7c7b\u578b\u65b9\u5f0f\u6765\u52a0\u8f7d\u540c\u4e00\u4e2a\u7d20\u6750\uff01";d.egret_string_code[3E3]=
"\u4e3b\u9898\u914d\u7f6e\u6587\u4ef6\u52a0\u8f7d\u5931\u8d25: {0}";d.egret_string_code[3001]="\u627e\u4e0d\u5230\u4e3b\u9898\u4e2d\u6240\u914d\u7f6e\u7684\u76ae\u80a4\u7c7b\u540d: {0}";d.egret_string_code[3002]='\u7d22\u5f15:"{0}"\u8d85\u51fa\u96c6\u5408\u5143\u7d20\u7d22\u5f15\u8303\u56f4';d.egret_string_code[3003]="\u5728\u6b64\u7ec4\u4ef6\u4e2d\u4e0d\u53ef\u7528\uff0c\u82e5\u6b64\u7ec4\u4ef6\u4e3a\u5bb9\u5668\u7c7b\uff0c\u8bf7\u4f7f\u7528";d.egret_string_code[3004]="addChild(){0}addElement()\u4ee3\u66ff";
d.egret_string_code[3005]="addChildAt(){0}addElementAt()\u4ee3\u66ff";d.egret_string_code[3006]="removeChild(){0}removeElement()\u4ee3\u66ff";d.egret_string_code[3007]="removeChildAt(){0}removeElementAt()\u4ee3\u66ff";d.egret_string_code[3008]="setChildIndex(){0}setElementIndex()\u4ee3\u66ff";d.egret_string_code[3009]="swapChildren(){0}swapElements()\u4ee3\u66ff";d.egret_string_code[3010]="swapChildrenAt(){0}swapElementsAt()\u4ee3\u66ff";d.egret_string_code[3011]='\u7d22\u5f15:"{0}"\u8d85\u51fa\u53ef\u89c6\u5143\u7d20\u7d22\u5f15\u8303\u56f4';
d.egret_string_code[3012]="\u6b64\u65b9\u6cd5\u5728Scroller\u7ec4\u4ef6\u5185\u4e0d\u53ef\u7528!";d.egret_string_code[3013]="UIStage\u662fGUI\u6839\u5bb9\u5668\uff0c\u53ea\u80fd\u6709\u4e00\u4e2a\u6b64\u5b9e\u4f8b\u5728\u663e\u793a\u5217\u8868\u4e2d\uff01";d.egret_string_code[3014]="propNotPropOrStyle";d.egret_string_code[4E3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)";d.egret_string_code[4001]="Abstract class can not be instantiated!";d.egret_string_code[4002]=
"Unnamed data!";d.egret_string_code[4003]="Nonsupport version!";d.egret_string_code[4004]="Abstract method needs to be implemented in subclass!";d.egret_string_code[3100]="\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301WebSocket";d.egret_string_code[3101]="\u8bf7\u5148\u8fde\u63a5WebSocket";d.egret_string_code[3102]="\u8bf7\u5148\u8bbe\u7f6etype\u4e3a\u4e8c\u8fdb\u5236\u7c7b\u578b"})(egret||(egret={}));
(function(d){d.egret_string_code={};d.egret_string_code[-1]="\u4e0d\u5b58\u5728\u7684stringId:{0}";d.egret_string_code[1E3]="Browser.isMobile\u63a5\u53e3\u53c2\u6570\u5df2\u7ecf\u53d8\u66f4\uff0c\u8bf7\u5c3d\u5feb\u8c03\u6574\u7528\u6cd5\u4e3a egret.MainContext.deviceType == egret.MainContext.DEVICE_MOBILE";d.egret_string_code[1001]="\u8be5\u65b9\u6cd5\u76ee\u524d\u4e0d\u5e94\u4f20\u5165 resolutionPolicy \u53c2\u6570\uff0c\u8bf7\u5728 docs/1.0_Final_ReleaseNote\u4e2d\u67e5\u770b\u5982\u4f55\u5347\u7ea7";
d.egret_string_code[1002]="egret.Ticker\u662f\u6846\u67b6\u5185\u90e8\u4f7f\u7528\u7684\u5355\u4f8b\uff0c\u4e0d\u5141\u8bb8\u5728\u5916\u90e8\u5b9e\u4f8b\u5316\uff0c\u8ba1\u65f6\u5668\u8bf7\u4f7f\u7528egret.Timer\u7c7b\uff01";d.egret_string_code[1003]="Ticker#setTimeout\u65b9\u6cd5\u5373\u5c06\u5e9f\u5f03,\u8bf7\u4f7f\u7528egret.setTimeout";d.egret_string_code[1004]="ExternalInterface\u8c03\u7528\u4e86js\u6ca1\u6709\u6ce8\u518c\u7684\u65b9\u6cd5: {0}";d.egret_string_code[1005]="\u8bbe\u7f6e\u4e86\u5df2\u7ecf\u5b58\u5728\u7684blendMode: {0}";
d.egret_string_code[1006]="child\u4e0d\u5728\u5f53\u524d\u5bb9\u5668\u5185";d.egret_string_code[1007]="\u63d0\u4f9b\u7684\u7d22\u5f15\u8d85\u51fa\u8303\u56f4";d.egret_string_code[1008]="child\u672a\u88abaddChild\u5230\u8be5parent";d.egret_string_code[1009]="\u8bbe\u7f6e\u4e86\u5df2\u7ecf\u5b58\u5728\u7684\u9002\u914d\u6a21\u5f0f:{0}";d.egret_string_code[1010]="addEventListener\u4fa6\u542c\u51fd\u6570\u4e0d\u80fd\u4e3a\u7a7a";d.egret_string_code[1011]='BitmapText\u627e\u4e0d\u5230\u6587\u5b57\u6240\u5bf9\u5e94\u7684\u7eb9\u7406:"{0}"';
d.egret_string_code[1012]="egret.BitmapTextSpriteSheet\u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528egret.BitmapFont\u4ee3\u66ff\u3002";d.egret_string_code[1013]="TextField.setFocus \u6ca1\u6709\u5b9e\u73b0";d.egret_string_code[1014]="Ease\u4e0d\u80fd\u88ab\u5b9e\u4f8b\u5316";d.egret_string_code[1015]="xml not found!";d.egret_string_code[1016]="{0}\u5df2\u7ecf\u5e9f\u5f03";d.egret_string_code[1017]="JSON\u6587\u4ef6\u683c\u5f0f\u4e0d\u6b63\u786e: {0}\ndata: {1}";d.egret_string_code[1018]="egret_html5_localStorage.setItem\u4fdd\u5b58\u5931\u8d25,key={0}&value={1}";
d.egret_string_code[1019]="\u7f51\u7edc\u5f02\u5e38:{0}";d.egret_string_code[1020]="\u65e0\u6cd5\u521d\u59cb\u5316\u7740\u8272\u5668";d.egret_string_code[1021]="\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301webgl";d.egret_string_code[1022]="{0} ArgumentError";d.egret_string_code[1023]="\u6b64\u65b9\u6cd5\u5728ScrollView\u5185\u4e0d\u53ef\u7528!";d.egret_string_code[1024]="\u4f7f\u7528\u4e86\u5c1a\u672a\u5b9e\u73b0\u7684ScaleMode";d.egret_string_code[1025]="\u9047\u5230\u6587\u4ef6\u5c3e";d.egret_string_code[1026]=
"EncodingError! The code point {0} could not be encoded.";d.egret_string_code[1027]="DecodingError";d.egret_string_code[1028]="\u8c03\u7528\u4e86\u672a\u914d\u7f6e\u7684\u6ce8\u5165\u89c4\u5219:{0}\u3002 \u8bf7\u5148\u5728\u9879\u76ee\u521d\u59cb\u5316\u91cc\u914d\u7f6e\u6307\u5b9a\u7684\u6ce8\u5165\u89c4\u5219\uff0c\u518d\u8c03\u7528\u5bf9\u5e94\u5355\u4f8b\u3002";d.egret_string_code[1029]="Function.prototype.bind - what is trying to be bound is not callable";d.egret_string_code[1030]="\u8be5API\u5df2\u5e9f\u5f03";
d.egret_string_code[1031]="setVolume\u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528this.volume = value\u4ee3\u66ff";d.egret_string_code[1032]="getVolume\u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528this.volume\u4ee3\u66ff";d.egret_string_code[1033]="\u8de8\u57df\u56fe\u7247\u4e0d\u53ef\u4ee5\u4f7f\u7528toDataURL\u6765\u8f6c\u6362\u6210base64";d.egret_string_code[1034]='\u97f3\u4e50\u6587\u4ef6\u89e3\u7801\u5931\u8d25\uff1a"{0}"\uff0c\u8bf7\u4f7f\u7528\u6807\u51c6\u7684\u8f6c\u6362\u5de5\u5177\u91cd\u65b0\u8f6c\u6362\u4e0bmp3\u3002';
d.egret_string_code[1035]="Native \u4e0b\u6682\u672a\u5b9e\u73b0\u6b64\u529f\u80fd\uff01";d.egret_string_code[2E3]="RES.createGroup()\u4f20\u5165\u4e86\u914d\u7f6e\u4e2d\u4e0d\u5b58\u5728\u7684\u952e\u503c: {0}";d.egret_string_code[2001]='RES\u52a0\u8f7d\u4e86\u4e0d\u5b58\u5728\u6216\u7a7a\u7684\u8d44\u6e90\u7ec4:"{0}"';d.egret_string_code[2002]="\u8bf7\u4e0d\u8981\u4f7f\u7528\u4e0d\u540c\u7684\u7c7b\u578b\u65b9\u5f0f\u6765\u52a0\u8f7d\u540c\u4e00\u4e2a\u7d20\u6750\uff01";d.egret_string_code[3E3]=
"\u4e3b\u9898\u914d\u7f6e\u6587\u4ef6\u52a0\u8f7d\u5931\u8d25: {0}";d.egret_string_code[3001]="\u627e\u4e0d\u5230\u4e3b\u9898\u4e2d\u6240\u914d\u7f6e\u7684\u76ae\u80a4\u7c7b\u540d: {0}";d.egret_string_code[3002]='\u7d22\u5f15:"{0}"\u8d85\u51fa\u96c6\u5408\u5143\u7d20\u7d22\u5f15\u8303\u56f4';d.egret_string_code[3003]="\u5728\u6b64\u7ec4\u4ef6\u4e2d\u4e0d\u53ef\u7528\uff0c\u82e5\u6b64\u7ec4\u4ef6\u4e3a\u5bb9\u5668\u7c7b\uff0c\u8bf7\u4f7f\u7528";d.egret_string_code[3004]="addChild(){0}addElement()\u4ee3\u66ff";
d.egret_string_code[3005]="addChildAt(){0}addElementAt()\u4ee3\u66ff";d.egret_string_code[3006]="removeChild(){0}removeElement()\u4ee3\u66ff";d.egret_string_code[3007]="removeChildAt(){0}removeElementAt()\u4ee3\u66ff";d.egret_string_code[3008]="setChildIndex(){0}setElementIndex()\u4ee3\u66ff";d.egret_string_code[3009]="swapChildren(){0}swapElements()\u4ee3\u66ff";d.egret_string_code[3010]="swapChildrenAt(){0}swapElementsAt()\u4ee3\u66ff";d.egret_string_code[3011]='\u7d22\u5f15:"{0}"\u8d85\u51fa\u53ef\u89c6\u5143\u7d20\u7d22\u5f15\u8303\u56f4';
d.egret_string_code[3012]="\u6b64\u65b9\u6cd5\u5728Scroller\u7ec4\u4ef6\u5185\u4e0d\u53ef\u7528!";d.egret_string_code[3013]="UIStage\u662fGUI\u6839\u5bb9\u5668\uff0c\u53ea\u80fd\u6709\u4e00\u4e2a\u6b64\u5b9e\u4f8b\u5728\u663e\u793a\u5217\u8868\u4e2d\uff01";d.egret_string_code[3014]="propNotPropOrStyle";d.egret_string_code[4E3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)";d.egret_string_code[4001]="Abstract class can not be instantiated!";d.egret_string_code[4002]=
"Unnamed data!";d.egret_string_code[4003]="Nonsupport version!";d.egret_string_code[4004]="Abstract method needs to be implemented in subclass!";d.egret_string_code[3100]="\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301WebSocket";d.egret_string_code[3101]="\u8bf7\u5148\u8fde\u63a5WebSocket";d.egret_string_code[3102]="\u8bf7\u5148\u8bbe\u7f6etype\u4e3a\u4e8c\u8fdb\u5236\u7c7b\u578b"})(egret||(egret={}));
var __extends=this.__extends||function(d,f){function e(){this.constructor=d}for(var a in f)f.hasOwnProperty(a)&&(d[a]=f[a]);e.prototype=f.prototype;d.prototype=new e};
(function(d){d.superSetter=function(d,e){for(var a=[],c=2;c<arguments.length;c++)a[c-2]=arguments[c];var b=Object.getPrototypeOf(d),c=b.__sets__;null==c&&(c=b.__sets__={});var h=c[e];if(h)return h.apply(d,a);for(b=Object.getPrototypeOf(b);!b.hasOwnProperty(e);)b=Object.getPrototypeOf(b);h=Object.getOwnPropertyDescriptor(b,e).set;c[e]=h;h.apply(d,a)};d.superGetter=function(d,e){var a=Object.getPrototypeOf(d),c=a.__gets__;null==c&&(c=a.__gets__={});var b=c[e];if(b)return b.call(d);for(a=Object.getPrototypeOf(a);!a.hasOwnProperty(e);)a=
Object.getPrototypeOf(a);b=Object.getOwnPropertyDescriptor(a,e).get;c[e]=b;return b.call(d)}})(egret||(egret={}));
(function(d){function f(a){for(var c=[],b=1;b<arguments.length;b++)c[b-1]=arguments[b];if(b=d.egret_string_code[a])for(var h=c.length,t=0;t<h;t++)b=b.replace("{"+t+"}",c[t]);return b}var e=function(){function a(){}a.openLogByType=function(c){null==a.logFuncs&&(a.logFuncs={error:console.error,debug:console.debug,warn:console.warn,info:console.info,log:console.log});switch(c){case a.OFF:console.error=function(){};case a.ERROR:console.warn=function(){};case a.WARN:console.info=function(){},console.log=
function(){};case a.INFO:console.debug=function(){}}switch(c){case a.ALL:console.debug=a.logFuncs.debug;case a.INFO:console.log=a.logFuncs.log,console.info=a.logFuncs.info;case a.WARN:console.warn=a.logFuncs.warn;case a.ERROR:console.error=a.logFuncs.error}};a.fatal=function(a,b){void 0===b&&(b=null);throw Error(d.Logger.getTraceCode("Fatal",a,b));};a.info=function(a,b){void 0===b&&(b=null);d.Logger.traceToConsole("Info",a,b)};a.warning=function(a,b){void 0===b&&(b=null);d.Logger.traceToConsole("Warning",
a,b)};a.traceToConsole=function(a,b,h){console.log(d.Logger.getTraceCode(a,b,h))};a.getTraceCode=function(a,b,h){return"["+a+"]"+b+(null==h?"":":"+h)};a.ALL="all";a.DEBUG="debug";a.INFO="info";a.WARN="warn";a.ERROR="error";a.OFF="off";return a}();d.Logger=e;e.prototype.__class__="egret.Logger";d.getString=f;d.$error=function(a){for(var c=[],b=1;b<arguments.length;b++)c[b-1]=arguments[b];c.unshift(a);(c=f.apply(null,c))?e.fatal(c):e.fatal(f(-1,a))};d.$warn=function(a){for(var c=[],b=1;b<arguments.length;b++)c[b-
1]=arguments[b];c.unshift(a);(c=f.apply(null,c))?e.warning(c):e.warning(f(-1,a))}})(egret||(egret={}));(function(d){var f=function(){function d(){this._hashCode=d.hashCount++}Object.defineProperty(d.prototype,"hashCode",{get:function(){return this._hashCode},enumerable:!0,configurable:!0});d.hashCount=1;return d}();d.HashObject=f;f.prototype.__class__="egret.HashObject"})(egret||(egret={}));
(function(d){var f=function(d){function a(b){void 0===b&&(b=300);d.call(this);this.objectPool=[];this._length=0;1>b&&(b=1);this.autoDisposeTime=b;this.frameCount=0}__extends(a,d);var c=a.prototype;c._checkFrame=function(){this.frameCount--;0>=this.frameCount&&this.dispose()};Object.defineProperty(c,"length",{get:function(){return this._length},enumerable:!0,configurable:!0});c.push=function(b){var h=this.objectPool;-1==h.indexOf(b)&&(h.push(b),b.__recycle&&b.__recycle(),this._length++,0==this.frameCount&&
(this.frameCount=this.autoDisposeTime,a._callBackList.push(this)))};c.pop=function(){if(0==this._length)return null;this._length--;return this.objectPool.pop()};c.dispose=function(){0<this._length&&(this.objectPool=[],this._length=0);this.frameCount=0;var b=a._callBackList,h=b.indexOf(this);-1!=h&&b.splice(h,1)};a._callBackList=[];return a}(d.HashObject);d.Recycler=f;f.prototype.__class__="egret.Recycler"})(egret||(egret={}));
(function(d){d.__START_TIME;d.getTimer=function(){return Date.now()-d.__START_TIME}})(egret||(egret={}));
(function(d){d.__callLaterFunctionList=[];d.__callLaterThisList=[];d.__callLaterArgsList=[];d.callLater=function(f,e){for(var a=[],c=2;c<arguments.length;c++)a[c-2]=arguments[c];d.__callLaterFunctionList.push(f);d.__callLaterThisList.push(e);d.__callLaterArgsList.push(a)};d.__callAsyncFunctionList=[];d.__callAsyncThisList=[];d.__callAsyncArgsList=[];d.__callAsync=function(f,e){for(var a=[],c=2;c<arguments.length;c++)a[c-2]=arguments[c];d.__callAsyncFunctionList.push(f);d.__callAsyncThisList.push(e);
d.__callAsyncArgsList.push(a)}})(egret||(egret={}));
(function(d){var f=function(){function e(){}var a=e.prototype;a.call=function(a){this.callback&&this.callback.call(this.thisObject,a)};a.dispose=function(){this.thisObject=this.callback=null;e.__freeList.push(this)};e.push=function(a,b){var h;h=e.__freeList.length?e.__freeList.pop():new d.RenderCommand;h.callback=a;h.thisObject=b;d.MainContext.__DRAW_COMMAND_LIST.push(h)};e.__freeList=[];return e}();d.RenderCommand=f;f.prototype.__class__="egret.RenderCommand"})(egret||(egret={}));
(function(d){var f=function(e){function a(b,h,a){void 0===h&&(h=!1);void 0===a&&(a=!1);e.call(this);this.data=null;this._type="";this._cancelable=this._bubbles=!1;this._eventPhase=2;this._target=this._currentTarget=null;this._isPropagationImmediateStopped=this._isPropagationStopped=this._isDefaultPrevented=!1;this.isNew=!0;this._type=b;this._bubbles=h;this._cancelable=a}__extends(a,e);var c=a.prototype;Object.defineProperty(c,"type",{get:function(){return this._type},enumerable:!0,configurable:!0});
Object.defineProperty(c,"bubbles",{get:function(){return this._bubbles},enumerable:!0,configurable:!0});Object.defineProperty(c,"cancelable",{get:function(){return this._cancelable},enumerable:!0,configurable:!0});Object.defineProperty(c,"eventPhase",{get:function(){return this._eventPhase},enumerable:!0,configurable:!0});Object.defineProperty(c,"currentTarget",{get:function(){return this._currentTarget},enumerable:!0,configurable:!0});Object.defineProperty(c,"target",{get:function(){return this._target},
enumerable:!0,configurable:!0});c.isDefaultPrevented=function(){return this._isDefaultPrevented};c.preventDefault=function(){this._cancelable&&(this._isDefaultPrevented=!0)};c.stopPropagation=function(){this._bubbles&&(this._isPropagationStopped=!0)};c.stopImmediatePropagation=function(){this._bubbles&&(this._isPropagationImmediateStopped=!0)};c._reset=function(){this.isNew?this.isNew=!1:(this._isPropagationImmediateStopped=this._isPropagationStopped=this._isDefaultPrevented=!1,this._currentTarget=
this._target=null,this._eventPhase=2)};c.__recycle=function(){this.data=this._target=this._currentTarget=null};a._dispatchByTarget=function(b,h,a,c,e,f){void 0===e&&(e=!1);void 0===f&&(f=!1);var k=b.eventRecycler;k||(k=b.eventRecycler=new d.Recycler);var l=k.pop();l?l._type=a:l=new b(a);l._bubbles=e;l._cancelable=f;if(c)for(var m in c)l[m]=c[m],null!==l[m]&&(c[m]=null);b=h.dispatchEvent(l);k.push(l);return b};a._getPropertyData=function(b){var h=b._props;h||(h=b._props={});return h};a.dispatchEvent=
function(b,h,c,d){void 0===c&&(c=!1);var e=a._getPropertyData(a);void 0!=d&&(e.data=d);a._dispatchByTarget(a,b,h,e,c)};a.ADDED_TO_STAGE="addedToStage";a.REMOVED_FROM_STAGE="removedFromStage";a.ADDED="added";a.REMOVED="removed";a.COMPLETE="complete";a.LOOP_COMPLETE="loopcomplete";a.ENTER_FRAME="enterFrame";a.RENDER="render";a.FINISH_RENDER="finishRender";a.FINISH_UPDATE_TRANSFORM="finishUpdateTransform";a.LEAVE_STAGE="leaveStage";a.RESIZE="resize";a.CHANGE="change";a.ACTIVATE="activate";a.DEACTIVATE=
"deactivate";a.CLOSE="close";a.CONNECT="connect";return a}(d.HashObject);d.Event=f;f.prototype.__class__="egret.Event"})(egret||(egret={}));
(function(d){var f=function(d){function a(a,b,h){void 0===b&&(b=!1);void 0===h&&(h=!1);d.call(this,a,b,h);this._status=0}__extends(a,d);Object.defineProperty(a.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0});a.dispatchHTTPStatusEvent=function(c,b){null==a.httpStatusEvent&&(a.httpStatusEvent=new a(a.HTTP_STATUS));a.httpStatusEvent._status=b;c.dispatchEvent(a.httpStatusEvent)};a.HTTP_STATUS="httpStatus";a.httpStatusEvent=null;return a}(d.Event);d.HTTPStatusEvent=
f;f.prototype.__class__="egret.HTTPStatusEvent"})(egret||(egret={}));(function(d){var f=function(d){function a(a,b,h){void 0===b&&(b=!1);void 0===h&&(h=!1);d.call(this,a,b,h)}__extends(a,d);a.SOUND_COMPLETE="soundComplete";return a}(d.Event);d.SoundEvent=f;f.prototype.__class__="egret.SoundEvent"})(egret||(egret={}));
(function(d){var f=function(d){function a(a,b,h){void 0===b&&(b=!1);void 0===h&&(h=!1);d.call(this,a,b,h)}__extends(a,d);a.FOCUS_IN="focusIn";a.FOCUS_OUT="focusOut";return a}(d.Event);d.FocusEvent=f;f.prototype.__class__="egret.FocusEvent"})(egret||(egret={}));
(function(d){var f=function(e){function a(a,b,h){void 0===b&&(b=!1);void 0===h&&(h=!1);e.call(this,a,b,h)}__extends(a,e);a.dispatchIOErrorEvent=function(c){d.Event._dispatchByTarget(a,c,a.IO_ERROR)};a.IO_ERROR="ioError";return a}(d.Event);d.IOErrorEvent=f;f.prototype.__class__="egret.IOErrorEvent"})(egret||(egret={}));
(function(d){var f=function(e){function a(b,h,a,c,d,f,k,l,m,n){void 0===h&&(h=!0);void 0===a&&(a=!0);void 0===c&&(c=0);void 0===d&&(d=0);void 0===f&&(f=0);void 0===k&&(k=!1);void 0===l&&(l=!1);void 0===n&&(n=!1);e.call(this,b,h,a);this._stageY=this._stageX=0;this.touchPointID=NaN;this.touchDown=this.altKey=this.shiftKey=this.ctrlKey=!1;this.touchPointID=c;this._stageX=d;this._stageY=f;this.ctrlKey=k;this.altKey=l;this.touchDown=n}__extends(a,e);var c=a.prototype;Object.defineProperty(c,"stageX",{get:function(){return this._stageX},
enumerable:!0,configurable:!0});Object.defineProperty(c,"stageY",{get:function(){return this._stageY},enumerable:!0,configurable:!0});Object.defineProperty(c,"localX",{get:function(){return this._currentTarget.globalToLocal(this._stageX,this._stageY,d.Point.identity).x},enumerable:!0,configurable:!0});Object.defineProperty(c,"localY",{get:function(){return this._currentTarget.globalToLocal(this._stageX,this._stageY,d.Point.identity).y},enumerable:!0,configurable:!0});a.dispatchTouchEvent=function(b,
h,c,e,f,g,k,l,m){void 0===c&&(c=0);void 0===e&&(e=0);void 0===f&&(f=0);void 0===g&&(g=!1);void 0===k&&(k=!1);void 0===l&&(l=!1);void 0===m&&(m=!1);var n=d.Event._getPropertyData(a);n.touchPointID=c;n._stageX=e;n._stageY=f;n.ctrlKey=g;n.altKey=k;n.shiftKey=l;n.touchDown=m;d.Event._dispatchByTarget(a,b,h,n,!0,!0)};a.TOUCH_TAP="touchTap";a.TOUCH_MOVE="touchMove";a.TOUCH_BEGIN="touchBegin";a.TOUCH_END="touchEnd";a.TOUCH_RELEASE_OUTSIDE="touchReleaseOutside";a.TOUCH_ROLL_OUT="touchRollOut";a.TOUCH_ROLL_OVER=
"touchRollOver";a.TOUCH_OUT="touchOut";a.TOUCH_OVER="touchOver";return a}(d.Event);d.TouchEvent=f;f.prototype.__class__="egret.TouchEvent"})(egret||(egret={}));(function(d){var f=function(e){function a(a,b,h){void 0===b&&(b=!1);void 0===h&&(h=!1);e.call(this,a,b,h)}__extends(a,e);a.dispatchTimerEvent=function(c,b){d.Event._dispatchByTarget(a,c,b)};a.TIMER="timer";a.TIMER_COMPLETE="timerComplete";return a}(d.Event);d.TimerEvent=f;f.prototype.__class__="egret.TimerEvent"})(egret||(egret={}));
(function(d){var f=function(e){function a(a,b,h,d){void 0===b&&(b=!1);void 0===h&&(h=!1);void 0===d&&(d="");e.call(this,a,b,h);this.text=d}__extends(a,e);a.dispatchTextEvent=function(c,b,h){var t=d.Event._getPropertyData(a);t.text=h;d.Event._dispatchByTarget(a,c,b,t)};a.LINK="link";return a}(d.Event);d.TextEvent=f;f.prototype.__class__="egret.TextEvent"})(egret||(egret={}));
(function(d){var f=function(e){function a(a,b,h,d,u){void 0===b&&(b=!1);void 0===h&&(h=!1);void 0===d&&(d=0);void 0===u&&(u=0);e.call(this,a,b,h);this.bytesTotal=this.bytesLoaded=0;this.bytesLoaded=d;this.bytesTotal=u}__extends(a,e);a.dispatchProgressEvent=function(c,b,h,t){void 0===h&&(h=0);void 0===t&&(t=0);d.Event._dispatchByTarget(a,c,b,{bytesLoaded:h,bytesTotal:t})};a.PROGRESS="progress";a.SOCKET_DATA="socketData";return a}(d.Event);d.ProgressEvent=f;f.prototype.__class__="egret.ProgressEvent"})(egret||
(egret={}));(function(d){var f=function(){function d(){}d.CAPTURING_PHASE=1;d.AT_TARGET=2;d.BUBBLING_PHASE=3;return d}();d.EventPhase=f;f.prototype.__class__="egret.EventPhase"})(egret||(egret={}));
(function(d){var f=function(e){function a(b){void 0===b&&(b=null);e.call(this);this._captureEventsMap=this._eventsMap=this._eventTarget=null;this._eventTarget=b?b:this}__extends(a,e);var c=a.prototype;c.addEventListener=function(b,h,a,c,e){void 0===c&&(c=!1);void 0===e&&(e=0);"undefined"===typeof c&&(c=!1);"undefined"===typeof e&&(e=0);h||d.$error(1010);c?(this._captureEventsMap||(this._captureEventsMap={}),c=this._captureEventsMap):(this._eventsMap||(this._eventsMap={}),c=this._eventsMap);var f=
c[b];f||(f=c[b]=[]);this._insertEventBin(f,h,a,e)};c._insertEventBin=function(b,h,a,c,d){void 0===d&&(d=void 0);for(var e=-1,f=b.length,l=0;l<f;l++){var m=b[l];if(m.listener==h&&m.thisObject==a&&m.display==d)return!1;-1==e&&m.priority<c&&(e=l)}h={listener:h,thisObject:a,priority:c};d&&(h.display=d);-1!=e?b.splice(e,0,h):b.push(h);return!0};c.removeEventListener=function(b,h,a,c){void 0===c&&(c=!1);if(c=c?this._captureEventsMap:this._eventsMap){var d=c[b];d&&(this._removeEventBin(d,h,a),0==d.length&&
delete c[b])}};c._removeEventBin=function(b,h,a,c,d){void 0===c&&(c=void 0);void 0===d&&(d=0);for(var e=b.length;d<e;d++){var f=b[d];if(f.listener==h&&f.thisObject==a&&f.display==c)return b.splice(d,1),!0}return!1};c.hasEventListener=function(b){return!!(this._eventsMap&&this._eventsMap[b]||this._captureEventsMap&&this._captureEventsMap[b])};c.willTrigger=function(b){return this.hasEventListener(b)};c.dispatchEvent=function(b){b._reset();b._target=this._eventTarget;b._currentTarget=this._eventTarget;
return this._notifyListener(b)};c._notifyListener=function(b){var h=1==b._eventPhase?this._captureEventsMap:this._eventsMap;if(!h)return!0;h=h[b._type];if(!h)return!0;var a=h.length;if(0==a)return!0;for(var h=h.concat(),c=0;c<a;c++){var d=h[c];d.listener.call(d.thisObject,b);if(b._isPropagationImmediateStopped)break}return!b._isDefaultPrevented};c.dispatchEventWith=function(b,h,a){void 0===h&&(h=!1);d.Event.dispatchEvent(this,b,h,a)};return a}(d.HashObject);d.EventDispatcher=f;f.prototype.__class__=
"egret.EventDispatcher"})(egret||(egret={}));
(function(d){var f=function(e){function a(){e.call(this);this.stage=this.deviceContext=this.netContext=this.touchContext=this.rendererContext=null;this.reuseEvent=new d.Event("")}__extends(a,e);var c=a.prototype;c.run=function(){d.Ticker.getInstance().run();d.Ticker.getInstance().register(this.renderLoop,this,Number.NEGATIVE_INFINITY);d.Ticker.getInstance().register(this.broadcastEnterFrame,this,Number.POSITIVE_INFINITY);this.touchContext.run();this._profileInstance=d.Profiler.getInstance()};c.renderLoop=
function(b){if(0<d.__callLaterFunctionList.length){var h=d.__callLaterFunctionList;d.__callLaterFunctionList=[];var c=d.__callLaterThisList;d.__callLaterThisList=[];var e=d.__callLaterArgsList;d.__callLaterArgsList=[]}b=this.stage;var f=a.cachedEvent;f._type=d.Event.RENDER;this.dispatchEvent(f);d.Stage._invalidateRenderFlag&&(this.broadcastRender(),d.Stage._invalidateRenderFlag=!1);h&&this.doCallLaterList(h,c,e);0<d.__callAsyncFunctionList.length&&this.doCallAsyncList();h=this.rendererContext;h.onRenderStart();
h.clearScreen();a.__DRAW_COMMAND_LIST=[];a._renderLoopPhase="updateTransform";b._updateTransform();a._renderLoopPhase="draw";f._type=d.Event.FINISH_UPDATE_TRANSFORM;this.dispatchEvent(f);a.__use_new_draw?this._draw(h):b._draw(h);f._type=d.Event.FINISH_RENDER;this.dispatchEvent(f);this._profileInstance._isRunning&&this._profileInstance._drawProfiler(h);h.onRenderFinish()};c._draw=function(b){for(var h=a.__DRAW_COMMAND_LIST,c=h.length,d=0;d<c;d++){var e=h[d];e.call(b);e.dispose()}};c.broadcastEnterFrame=
function(b){b=this.reuseEvent;b._type=d.Event.ENTER_FRAME;this.dispatchEvent(b);for(var h=d.DisplayObject._enterFrameCallBackList.concat(),a=h.length,c=0;c<a;c++){var e=h[c];b._target=e.display;b._currentTarget=e.display;e.listener.call(e.thisObject,b)}h=d.Recycler._callBackList;for(c=h.length-1;0<=c;c--)h[c]._checkFrame()};c.broadcastRender=function(){var b=this.reuseEvent;b._type=d.Event.RENDER;for(var h=d.DisplayObject._renderCallBackList.concat(),a=h.length,c=0;c<a;c++){var e=h[c],f=e.display;
b._target=f;b._currentTarget=f;e.listener.call(e.thisObject,b)}};c.doCallLaterList=function(b,h,a){for(var c=b.length,d=0;d<c;d++){var e=b[d];null!=e&&e.apply(h[d],a[d])}};c.doCallAsyncList=function(){var b=d.__callAsyncFunctionList.concat(),h=d.__callAsyncThisList.concat(),a=d.__callAsyncArgsList.concat();d.__callAsyncFunctionList.length=0;d.__callAsyncThisList.length=0;for(var c=d.__callAsyncArgsList.length=0;c<b.length;c++){var e=b[c];null!=e&&e.apply(h[c],a[c])}};a.deviceType=null;a.DEVICE_PC=
"web";a.DEVICE_MOBILE="native";a.RUNTIME_HTML5="runtimeHtml5";a.RUNTIME_NATIVE="runtimeNative";a.__DRAW_COMMAND_LIST=[];a.__use_new_draw=!0;a.cachedEvent=new d.Event("");return a}(d.EventDispatcher);d.MainContext=f;f.prototype.__class__="egret.MainContext"})(egret||(egret={}));var testDeviceType=function(){if(!this.navigator)return!0;var d=navigator.userAgent.toLowerCase();return-1!=d.indexOf("mobile")||-1!=d.indexOf("android")},testRuntimeType=function(){return this.navigator?!0:!1};
egret.MainContext.instance=new egret.MainContext;egret.MainContext.deviceType=testDeviceType()?egret.MainContext.DEVICE_MOBILE:egret.MainContext.DEVICE_PC;egret.MainContext.runtimeType=testRuntimeType()?egret.MainContext.RUNTIME_HTML5:egret.MainContext.RUNTIME_NATIVE;delete testDeviceType;delete testRuntimeType;
(function(d){var f=function(){function e(){this._preDrawCount=this._updateTransformPerformanceCost=this._renderPerformanceCost=this._logicPerformanceCost=this._lastTime=0;this._calculatePreDrawCount=!0;this._txt=null;this._tick=0;this._maxDeltaTime=500;this._totalDeltaTime=0;this._isRunning=!1}var a=e.prototype;e.getInstance=function(){null==e.instance&&(e.instance=new e);return e.instance};a.stop=function(){if(this._isRunning){this._isRunning=!1;d.Ticker.getInstance().unregister(this.update,this);
var a=d.MainContext.instance;a.removeEventListener(d.Event.ENTER_FRAME,this.onEnterFrame,this);a.removeEventListener(d.Event.RENDER,this.onStartRender,this);a.removeEventListener(d.Event.FINISH_RENDER,this.onFinishRender,this);a.removeEventListener(d.Event.FINISH_UPDATE_TRANSFORM,this.onFinishUpdateTransform,this)}};a.run=function(){null==this._txt&&(this._txt=new d.TextField,this._txt.size=28,this._txt.multiline=!0,this._txt._DO_Props_._parent=new d.DisplayObjectContainer);if(!this._isRunning){this._isRunning=
!0;d.Ticker.getInstance().register(this.update,this);var a=d.MainContext.instance;a.addEventListener(d.Event.ENTER_FRAME,this.onEnterFrame,this);a.addEventListener(d.Event.RENDER,this.onStartRender,this);a.addEventListener(d.Event.FINISH_RENDER,this.onFinishRender,this);a.addEventListener(d.Event.FINISH_UPDATE_TRANSFORM,this.onFinishUpdateTransform,this)}};a._drawProfiler=function(a){"_drawWebGL"in a&&a._drawWebGL();this._calculatePreDrawCount=!1;this._txt._updateTransform();this._txt._draw(a)};a._setTxtFontSize=
function(a){this._txt.size=a};a.onEnterFrame=function(a){this._lastTime=d.getTimer()};a.onStartRender=function(a){a=d.getTimer();this._logicPerformanceCost=a-this._lastTime;this._lastTime=a};a.onFinishUpdateTransform=function(a){a=d.getTimer();this._updateTransformPerformanceCost=a-this._lastTime;this._lastTime=a};a.onFinishRender=function(a){a=d.getTimer();this._renderPerformanceCost=a-this._lastTime;this._lastTime=a};a.update=function(a){this._tick++;this._totalDeltaTime+=a;if(this._totalDeltaTime>=
this._maxDeltaTime){a=this._preDrawCount.toString();var b=Math.ceil(this._logicPerformanceCost).toString()+","+Math.ceil(this._updateTransformPerformanceCost).toString()+","+Math.ceil(this._renderPerformanceCost).toString()+","+Math.ceil(d.MainContext.instance.rendererContext.renderCost).toString();this._txt.text="draw:"+a+"\ncost:"+b+"\nFPS:"+Math.floor(1E3*this._tick/this._totalDeltaTime).toString();this._tick=this._totalDeltaTime=0}this._preDrawCount=0;this._calculatePreDrawCount=!0};a.onDrawImage=
function(){this._calculatePreDrawCount&&this._preDrawCount++};return e}();d.Profiler=f;f.prototype.__class__="egret.Profiler"})(egret||(egret={}));
(function(d){var f=function(e){function a(){e.call(this);this._timeScale=1;this._paused=!1;this._callIndex=-1;this.callBackList=[];null!=a.instance&&d.$error(1002)}__extends(a,e);var c=a.prototype;c.run=function(){d.__START_TIME=(new Date).getTime();d.MainContext.instance.deviceContext.executeMainLoop(this.update,this)};c.update=function(b){if(!this._paused){b*=this._timeScale;this._callList=this.callBackList.concat();for(this._callIndex=0;this._callIndex<this._callList.length;this._callIndex++){var h=
this._callList[this._callIndex];h.listener.call(h.thisObject,b)}this._callIndex=-1;this._callList=null}};c.register=function(b,h,a){void 0===a&&(a=0);this._insertEventBin(this.callBackList,b,h,a)};c.unregister=function(b,h){this._removeEventBin(this.callBackList,b,h);this._callList&&-1<this._callIndex&&this._removeEventBin(this._callList,b,h,null,this._callIndex+1)};c.setTimeout=function(b,h,a){for(var c=[],e=3;e<arguments.length;e++)c[e-3]=arguments[e];d.$warn(1003);d.setTimeout.apply(null,[b,h,
a].concat(c))};c.setTimeScale=function(b){this._timeScale=b};c.getTimeScale=function(){return this._timeScale};c.pause=function(){this._paused=!0};c.resume=function(){this._paused=!1};a.getInstance=function(){null==a.instance&&(a.instance=new a);return a.instance};return a}(d.EventDispatcher);d.Ticker=f;f.prototype.__class__="egret.Ticker"})(egret||(egret={}));
(function(d){var f=function(){function d(){}d.LEFT="left";d.RIGHT="right";d.CENTER="center";d.JUSTIFY="justify";d.CONTENT_JUSTIFY="contentJustify";return d}();d.HorizontalAlign=f;f.prototype.__class__="egret.HorizontalAlign"})(egret||(egret={}));(function(d){var f=function(){function d(){}d.TOP="top";d.BOTTOM="bottom";d.MIDDLE="middle";d.JUSTIFY="justify";d.CONTENT_JUSTIFY="contentJustify";return d}();d.VerticalAlign=f;f.prototype.__class__="egret.VerticalAlign"})(egret||(egret={}));
(function(d){var f=function(e){function a(b,h){void 0===h&&(h=0);e.call(this);this._currentCount=0;this._running=!1;this.lastTime=0;this.delay=b;this.repeatCount=h}__extends(a,e);var c=a.prototype;Object.defineProperty(c,"currentCount",{get:function(){return this._currentCount},enumerable:!0,configurable:!0});Object.defineProperty(c,"running",{get:function(){return this._running},enumerable:!0,configurable:!0});c.reset=function(){this.stop();this._currentCount=0};c.start=function(){this._running||
(this.lastTime=d.getTimer(),d.Ticker.getInstance().register(this.onEnterFrame,this),this._running=!0)};c.stop=function(){this._running&&(d.Ticker.getInstance().unregister(this.onEnterFrame,this),this._running=!1)};c.onEnterFrame=function(b){b=d.getTimer();b-this.lastTime>this.delay&&(this.lastTime=b,this._currentCount++,d.TimerEvent.dispatchTimerEvent(this,d.TimerEvent.TIMER),0<this.repeatCount&&this._currentCount>=this.repeatCount&&(this.stop(),d.TimerEvent.dispatchTimerEvent(this,d.TimerEvent.TIMER_COMPLETE)))};
return a}(d.EventDispatcher);d.Timer=f;f.prototype.__class__="egret.Timer"})(egret||(egret={}));
(function(d){function f(d){d=d.prototype?d.prototype:Object.getPrototypeOf(d);if(d.hasOwnProperty("__class__"))return d.__class__;var a=d.constructor.toString(),c=a.indexOf("("),a=a.substring(9,c);Object.defineProperty(d,"__class__",{value:a,enumerable:!1,writable:!0});return a}d.getQualifiedClassName=f;d.getQualifiedSuperclassName=function(d){d=d.prototype?d.prototype:Object.getPrototypeOf(d);if(d.hasOwnProperty("__superclass__"))return d.__superclass__;var a=Object.getPrototypeOf(d);if(null==a)return null;
a=f(a.constructor);if(!a)return null;Object.defineProperty(d,"__superclass__",{value:a,enumerable:!1,writable:!0});return a}})(egret||(egret={}));(function(d){var f={};d.getDefinitionByName=function(d){if(!d)return null;var a=f[d];if(a)return a;for(var c=d.split("."),b=c.length,a=__global,h=0;h<b;h++)if(a=a[c[h]],!a)return null;return f[d]=a}})(egret||(egret={}));var __global=__global||this;
(function(d){function f(a){for(var b in e){var h=e[b];h.delay-=a;0>=h.delay&&(h.listener.apply(h.thisObject,h.params),delete e[b])}}var e={},a=0;d.setTimeout=function(c,b,h){for(var t=[],u=3;u<arguments.length;u++)t[u-3]=arguments[u];t={listener:c,thisObject:b,delay:h,params:t};0==a&&d.Ticker.getInstance().register(f,null);a++;e[a]=t;return a};d.clearTimeout=function(a){delete e[a]}})(egret||(egret={}));
(function(d){function f(a){for(var b in e){var h=e[b];h.delay-=a;0>=h.delay&&(h.delay=h.originDelay,h.listener.apply(h.thisObject,h.params))}}var e={},a=0;d.setInterval=function(c,b,h){for(var t=[],u=3;u<arguments.length;u++)t[u-3]=arguments[u];t={listener:c,thisObject:b,delay:h,originDelay:h,params:t};0==a&&d.Ticker.getInstance().register(f,null);a++;e[a]=t;return a};d.clearInterval=function(a){delete e[a]}})(egret||(egret={}));
(function(d){d.hasDefinition=function(f){return d.getDefinitionByName(f)?!0:!1}})(egret||(egret={}));(function(d){d.toColorString=function(d){if(isNaN(d)||0>d)d=0;for(d=d.toString(16).toUpperCase();6<d.length;)d=d.slice(1,d.length);for(;6>d.length;)d="0"+d;return"#"+d}})(egret||(egret={}));
(function(d){var f=function(e){function a(b,a,c,d,f,g){void 0===b&&(b=1);void 0===a&&(a=0);void 0===c&&(c=0);void 0===d&&(d=1);void 0===f&&(f=0);void 0===g&&(g=0);e.call(this);this.a=b;this.b=a;this.c=c;this.d=d;this.tx=f;this.ty=g}__extends(a,e);var c=a.prototype;c.prepend=function(b,a,c,d,e,f){var k=this.tx;if(1!=b||0!=a||0!=c||1!=d){var l=this.a,m=this.c;this.a=l*b+this.b*c;this.b=l*a+this.b*d;this.c=m*b+this.d*c;this.d=m*a+this.d*d}this.tx=k*b+this.ty*c+e;this.ty=k*a+this.ty*d+f;return this};
c.append=function(b,a,c,d,e,f){var k=this.a,l=this.b,m=this.c,n=this.d;if(1!=b||0!=a||0!=c||1!=d)this.a=b*k+a*m,this.b=b*l+a*n,this.c=c*k+d*m,this.d=c*l+d*n;this.tx=e*k+f*m+this.tx;this.ty=e*l+f*n+this.ty;return this};c.prependTransform=function(b,a,c,e,f,g,k,l,m){if(f%360){var n=d.NumberUtils.cos(f);f=d.NumberUtils.sin(f)}else n=1,f=0;if(l||m)this.tx-=l,this.ty-=m;g||k?(this.prepend(n*c,f*c,-f*e,n*e,0,0),this.prepend(d.NumberUtils.cos(k),d.NumberUtils.sin(k),-d.NumberUtils.sin(g),d.NumberUtils.cos(g),
b,a)):this.prepend(n*c,f*c,-f*e,n*e,b,a);return this};c.appendTransform=function(b,a,c,e,f,g,k,l,m){if(f%360){var n=d.NumberUtils.cos(f);f=d.NumberUtils.sin(f)}else n=1,f=0;g||k?(this.append(d.NumberUtils.cos(k),d.NumberUtils.sin(k),-d.NumberUtils.sin(g),d.NumberUtils.cos(g),b,a),this.append(n*c,f*c,-f*e,n*e,0,0)):this.append(n*c,f*c,-f*e,n*e,b,a);if(l||m)this.tx-=l*this.a+m*this.c,this.ty-=l*this.b+m*this.d;return this};c.rotate=function(b){var a=Math.cos(b);b=Math.sin(b);var c=this.a,d=this.c,e=
this.tx;this.a=c*a-this.b*b;this.b=c*b+this.b*a;this.c=d*a-this.d*b;this.d=d*b+this.d*a;this.tx=e*a-this.ty*b;this.ty=e*b+this.ty*a;return this};c.skew=function(b,a){this.append(d.NumberUtils.cos(a),d.NumberUtils.sin(a),-d.NumberUtils.sin(b),d.NumberUtils.cos(b),0,0);return this};c.scale=function(b,a){this.a*=b;this.d*=a;this.c*=b;this.b*=a;this.tx*=b;this.ty*=a;return this};c.translate=function(b,a){this.tx+=b;this.ty+=a;return this};c.identity=function(){this.a=this.d=1;this.b=this.c=this.tx=this.ty=
0;return this};c.identityMatrix=function(b){this.a=b.a;this.b=b.b;this.c=b.c;this.d=b.d;this.tx=b.tx;this.ty=b.ty;return this};c.invert=function(){var b=this.a,a=this.b,c=this.c,d=this.d,e=this.tx,f=b*d-a*c;this.a=d/f;this.b=-a/f;this.c=-c/f;this.d=b/f;this.tx=(c*this.ty-d*e)/f;this.ty=-(b*this.ty-a*e)/f;return this};a.transformCoords=function(b,a,c){var e=d.Point.identity;e.x=b.a*a+b.c*c+b.tx;e.y=b.d*c+b.b*a+b.ty;return e};c.toArray=function(b){this.array||(this.array=new Float32Array(9));b?(this.array[0]=
this.a,this.array[1]=this.b,this.array[2]=0,this.array[3]=this.c,this.array[4]=this.d,this.array[5]=0,this.array[6]=this.tx,this.array[7]=this.ty):(this.array[0]=this.a,this.array[1]=this.b,this.array[2]=this.tx,this.array[3]=this.c,this.array[4]=this.d,this.array[5]=this.ty,this.array[6]=0,this.array[7]=0);this.array[8]=1;return this.array};c.setTo=function(b,a,c,d,e,f){this.a=b;this.b=a;this.c=c;this.d=d;this.tx=e;this.ty=f};c.copyFrom=function(b){this.identityMatrix(b)};c.clone=function(){return new a(this.a,
this.b,this.c,this.d,this.tx,this.ty)};c.concat=function(b){var a=this.a,c=this.b,d=this.c,e=this.d,f=this.tx,k=this.ty,l=b.a,m=b.b,n=b.c,q=b.d,r=a*l,s=0,D=0,w=e*q,y=f*l+b.tx;b=k*q+b.ty;if(0!=c||0!=d||0!=m||0!=n)r+=c*n,w+=d*m,s+=a*m+c*q,D+=d*l+e*n,y+=k*n,b+=f*m;this.a=r;this.b=s;this.c=D;this.d=w;this.tx=y;this.ty=b};c.deltaTransformPoint=function(b){return new d.Point(this.a*b.x+this.c*b.y,this.b*b.x+this.d*b.y)};c.transformPoint=function(b){return new d.Point(this.a*b.x+this.c*b.y+this.tx,this.b*
b.x+this.d*b.y+this.ty)};c.toString=function(){return"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"};c.createBox=function(b,a,c,e,f){void 0===c&&(c=0);void 0===e&&(e=0);void 0===f&&(f=0);if(0!==c){c/=d.Matrix.DEG_TO_RAD;var g=d.NumberUtils.cos(c);c=d.NumberUtils.sin(c);this.a=g*b;this.b=c*a;this.c=-c*b;this.d=g*a}else this.a=b,this.c=this.b=0,this.d=a;this.tx=e;this.ty=f};c.createGradientBox=function(b,a,c,d,e){void 0===c&&(c=0);void 0===d&&(d=0);void 0===
e&&(e=0);this.createBox(b/1638.4,a/1638.4,c,d+b/2,e+a/2)};a.identity=new a;a.DEG_TO_RAD=Math.PI/180;return a}(d.HashObject);d.Matrix=f;f.prototype.__class__="egret.Matrix"})(egret||(egret={}));
(function(d){var f=function(e){function a(b,a){void 0===b&&(b=0);void 0===a&&(a=0);e.call(this);this.x=b;this.y=a}__extends(a,e);var c=a.prototype;c.clone=function(){return new a(this.x,this.y)};c.equals=function(b){return this.x==b.x&&this.y==b.y};a.distance=function(b,a){return Math.sqrt((b.x-a.x)*(b.x-a.x)+(b.y-a.y)*(b.y-a.y))};c.setTo=function(b,a){this.x=b;this.y=a};c.copyFrom=function(b){this.x=b.x;this.y=b.y};Object.defineProperty(c,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*
this.y)},enumerable:!0,configurable:!0});c.add=function(b){return new a(this.x+b.x,this.y+b.y)};a.interpolate=function(b,h,c){var d=1-c;return new a(b.x*c+h.x*d,b.y*c+h.y*d)};c.normalize=function(b){if(0!=this.x||0!=this.y)b/=this.length,this.x*=b,this.y*=b};c.offset=function(b,a){this.x+=b;this.y+=a};a.polar=function(b,h){return new a(b*d.NumberUtils.cos(h/d.Matrix.DEG_TO_RAD),b*d.NumberUtils.sin(h/d.Matrix.DEG_TO_RAD))};c.subtract=function(b){return new a(this.x-b.x,this.y-b.y)};c.toString=function(){return"(x="+
this.x+", y="+this.y+")"};a.identity=new a(0,0);return a}(d.HashObject);d.Point=f;f.prototype.__class__="egret.Point"})(egret||(egret={}));
(function(d){var f=function(e){function a(b,a,c,d){void 0===b&&(b=0);void 0===a&&(a=0);void 0===c&&(c=0);void 0===d&&(d=0);e.call(this);this.x=b;this.y=a;this.width=c;this.height=d}__extends(a,e);var c=a.prototype;Object.defineProperty(c,"left",{get:function(){return this.x},set:function(b){this.width+=this.x-b;this.x=b},enumerable:!0,configurable:!0});Object.defineProperty(c,"right",{get:function(){return this.x+this.width},set:function(b){this.width=b-this.x},enumerable:!0,configurable:!0});Object.defineProperty(c,
"top",{get:function(){return this.y},set:function(b){this.height+=this.y-b;this.y=b},enumerable:!0,configurable:!0});Object.defineProperty(c,"bottom",{get:function(){return this.y+this.height},set:function(b){this.height=b-this.y},enumerable:!0,configurable:!0});Object.defineProperty(c,"topLeft",{get:function(){return new d.Point(this.left,this.top)},set:function(b){this.top=b.y;this.left=b.x},enumerable:!0,configurable:!0});Object.defineProperty(c,"bottomRight",{get:function(){return new d.Point(this.right,
this.bottom)},set:function(b){this.bottom=b.y;this.right=b.x},enumerable:!0,configurable:!0});c.initialize=function(b,a,c,d){this.x=b;this.y=a;this.width=c;this.height=d;return this};c.contains=function(b,a){return this.x<=b&&this.x+this.width>=b&&this.y<=a&&this.y+this.height>=a};c.intersects=function(b){return Math.max(this.x,b.x)<=Math.min(this.right,b.right)&&Math.max(this.y,b.y)<=Math.min(this.bottom,b.bottom)};c.setEmpty=function(){this.height=this.width=this.y=this.x=0};c.clone=function(){return new a(this.x,
this.y,this.width,this.height)};c.containsPoint=function(b){return this.x<b.x&&this.x+this.width>b.x&&this.y<b.y&&this.y+this.height>b.y?!0:!1};c.setTo=function(b,a,c,d){this.initialize(b,a,c,d)};c.copyFrom=function(b){this.x=b.x;this.y=b.y;this.width=b.width;this.height=b.height};c.inflate=function(b,a){this.x-=b;this.width+=2*b;this.y-=a;this.height+=2*a};c.isEmpty=function(){return 0==this.width||0==this.height};c.containsRect=function(b){var a=b.x+b.width,c=b.y+b.height,d=this.x+this.width,e=
this.y+this.height;return b.x>=this.x&&b.x<d&&b.y>=this.y&&b.y<e&&a>this.x&&a<=d&&c>this.y&&c<=e};c.equals=function(b){return this===b?!0:this.x===b.x&&this.y===b.y&&this.width===b.width&&this.height===b.height};c.inflatePoint=function(b){this.inflate(b.x,b.y)};c.intersection=function(b){var a=this.clone(),c=a.x,d=a.y,e=b.x,f=b.y,k=Math.max(c,e),c=Math.min(c+a.width,e+b.width);if(k<=c&&(e=Math.max(d,f),b=Math.min(d+a.height,f+b.height),e<=b))return a.setTo(k,e,c-k,b-e),a;a.setEmpty();return a};c.offset=
function(b,a){this.x+=b;this.y+=a};c.offsetPoint=function(b){this.offset(b.x,b.y)};c.toString=function(){return"(x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"};c.union=function(b){var a=this.clone();if(b.isEmpty())return a;if(a.isEmpty())return a.copyFrom(b),a;var c=Math.min(a.x,b.x),d=Math.min(a.y,b.y);a.setTo(c,d,Math.max(a.right,b.right)-c,Math.max(a.bottom,b.bottom)-d);return a};a.identity=new a(0,0,0,0);return a}(d.HashObject);d.Rectangle=f;f.prototype.__class__=
"egret.Rectangle"})(egret||(egret={}));
(function(d){var f=function(d){function a(b,a,c,f,p,g,k,l){void 0===b&&(b=1);void 0===a&&(a=1);void 0===c&&(c=1);void 0===f&&(f=1);void 0===p&&(p=0);void 0===g&&(g=0);void 0===k&&(k=0);void 0===l&&(l=0);d.call(this);this._redMultiplier=b;this._greenMultiplier=a;this._blueMultiplier=c;this._alphaMultiplier=f;this._redOffset=p;this._greenOffset=g;this._blueOffset=k;this._alphaOffset=l}__extends(a,d);var c=a.prototype;Object.defineProperty(c,"alphaMultiplier",{get:function(){return this._alphaMultiplier},set:function(b){this._alphaMultiplier=
b},enumerable:!0,configurable:!0});Object.defineProperty(c,"alphaOffset",{get:function(){return this._alphaOffset},set:function(b){this._alphaOffset=b},enumerable:!0,configurable:!0});Object.defineProperty(c,"blueMultiplier",{get:function(){return this._blueMultiplier},set:function(b){this._blueMultiplier=b},enumerable:!0,configurable:!0});Object.defineProperty(c,"blueOffset",{get:function(){return this._blueOffset},set:function(b){this._blueOffset=b},enumerable:!0,configurable:!0});Object.defineProperty(c,
"greenMultiplier",{get:function(){return this._greenMultiplier},set:function(b){this._greenMultiplier=b},enumerable:!0,configurable:!0});Object.defineProperty(c,"greenOffset",{get:function(){return this._greenOffset},set:function(b){this._greenOffset=b},enumerable:!0,configurable:!0});Object.defineProperty(c,"redMultiplier",{get:function(){return this._redMultiplier},set:function(b){this._redMultiplier=b},enumerable:!0,configurable:!0});Object.defineProperty(c,"redOffset",{get:function(){return this._redOffset},
set:function(b){this._redOffset=b},enumerable:!0,configurable:!0});Object.defineProperty(c,"color",{get:function(){return this._redOffset<<16+this._greenOffset<<8+this._blueOffset},enumerable:!0,configurable:!0});c.identityColorTransform=function(b){this._alphaMultiplier=b._alphaMultiplier;this._alphaOffset=b._alphaOffset;this._redMultiplier=b._redMultiplier;this._redOffset=b._redOffset;this._greenMultiplier=b._greenMultiplier;this._greenOffset=b._greenOffset;this._blueMultiplier=b._blueMultiplier;
this._blueOffset=b._blueOffset};c.concat=function(b){this._redMultiplier*=b._redMultiplier;this._greenMultiplier*=b._greenMultiplier;this._blueMultiplier*=b._blueMultiplier;this._alphaMultiplier*=b._alphaMultiplier;this._redOffset+=b._redOffset;this._greenOffset+=b._greenOffset;this._blueOffset+=b._blueOffset;this._alphaOffset+=b._alphaOffset};c.toString=function(){return"(redMultiplier="+this._redMultiplier+", greenMultiplier="+this._greenMultiplier+", blueMultiplier="+this._blueMultiplier+", alphaMultiplier="+
this._alphaMultiplier+", redOffset="+this._redOffset+", greenOffset="+this._greenOffset+", blueOffset="+this._blueOffset+", alphaOffset="+this._alphaOffset+")"};return a}(d.HashObject);d.ColorTransform=f;f.prototype.__class__="egret.ColorTransform"})(egret||(egret={}));
(function(d){var f=function(e){function a(b){e.call(this);this._matrix=new d.Matrix;this._matrix2=new d.Matrix;this._colorTransform=new d.ColorTransform;this._colorTransform2=new d.ColorTransform;this._display=b}__extends(a,e);var c=a.prototype;Object.defineProperty(c,"matrix",{get:function(){this._matrix2.identityMatrix(this._matrix);return this._matrix2},set:function(b){this._setMatrix(b)},enumerable:!0,configurable:!0});c._setMatrix=function(b){this._display.__hack_local_matrix||(this._display.__hack_local_matrix=
new d.Matrix);this._display.__hack_local_matrix.identityMatrix(b);this._matrix.identityMatrix(b)};Object.defineProperty(c,"colorTransform",{get:function(){this._colorTransform2.identityColorTransform(this._colorTransform);return this._colorTransform2},set:function(b){this._setColorTransform(b)},enumerable:!0,configurable:!0});c._setColorTransform=function(b){this._colorTransform.identityColorTransform(b)};return a}(d.HashObject);d.Transform=f;f.prototype.__class__="egret.Transform"})(egret||(egret=
{}));
(function(d){var f=function(e){function a(){e.call(this);this._isSupportDOMParser=this._xmlDict=this._parser=null;this._xmlDict={};window.DOMParser?(this._isSupportDOMParser=!0,this._parser=new DOMParser):this._isSupportDOMParser=!1}__extends(a,e);var c=a.prototype;a.getInstance=function(){a._instance||(a._instance=new a);return a._instance};c.parserXML=function(b){for(var a=0;"\n"==b.charAt(a)||"\t"==b.charAt(a)||"\r"==b.charAt(a)||" "==b.charAt(a);)a++;0!=a&&(b=b.substring(a,b.length));this._isSupportDOMParser?a=
this._parser.parseFromString(b,"text/xml"):(a=new ActiveXObject("Microsoft.XMLDOM"),a.async="false",a.loadXML(b));null==a&&d.$warn(1015);return a};a._instance=null;return a}(d.HashObject);d.SAXParser=f;f.prototype.__class__="egret.SAXParser"})(egret||(egret={}));
(function(d){var f=function(b){function c(){b.call(this);this._designHeight=this._designWidth=0;this._scaleY=this._scaleX=1;this._stageHeight=this._stageWidth=this._offSetY=0}__extends(c,b);var e=c.prototype;c.getInstance=function(){null==c.instance&&(a.initialize(),c.instance=new c);return c.instance};e.setDesignSize=function(b,a,h){this._designWidth=b;this._designHeight=a;h&&(d.$warn(1001),this._setResolutionPolicy(h))};e._setResolutionPolicy=function(b){this._resolutionPolicy=b;b.init(this);b._apply(this,
this._designWidth,this._designHeight)};e.getScaleX=function(){return this._scaleX};e.getScaleY=function(){return this._scaleY};e.getOffSetY=function(){return this._offSetY};c.canvas_name="egretCanvas";c.egret_root_div="gameDiv";c.canvas_div_name="canvasDiv";return c}(d.HashObject);d.StageDelegate=f;f.prototype.__class__="egret.StageDelegate";var e=function(){function b(a,h){this._containerStrategy=a;this._contentStrategy=h}var a=b.prototype;a.init=function(b){this._containerStrategy.init(b);this._contentStrategy.init(b)};
a._apply=function(b,a,h){this._containerStrategy._apply(b,a,h);this._contentStrategy._apply(b,a,h)};return b}();d.ResolutionPolicy=e;e.prototype.__class__="egret.ResolutionPolicy";var a=function(){function b(){}var a=b.prototype;b.initialize=function(){b.EQUAL_TO_FRAME=new c};a.init=function(b){};a._apply=function(b,a,h){};a._setupContainer=function(){var b=document.body,a;b&&(a=b.style)&&(a.paddingTop=a.paddingTop||"0px",a.paddingRight=a.paddingRight||"0px",a.paddingBottom=a.paddingBottom||"0px",
a.paddingLeft=a.paddingLeft||"0px",a.borderTop=a.borderTop||"0px",a.borderRight=a.borderRight||"0px",a.borderBottom=a.borderBottom||"0px",a.borderLeft=a.borderLeft||"0px",a.marginTop=a.marginTop||"0px",a.marginRight=a.marginRight||"0px",a.marginBottom=a.marginBottom||"0px",a.marginLeft=a.marginLeft||"0px")};return b}();d.ContainerStrategy=a;a.prototype.__class__="egret.ContainerStrategy";var c=function(b){function a(){b.apply(this,arguments)}__extends(a,b);a.prototype._apply=function(b){this._setupContainer()};
return a}(a);d.EqualToFrame=c;c.prototype.__class__="egret.EqualToFrame";e=function(){function b(){}var a=b.prototype;a.init=function(b){};a._apply=function(b,a,h){};a.setEgretSize=function(b,a,h,c,e,t){void 0===t&&(t=0);d.StageDelegate.getInstance()._stageWidth=Math.round(b);d.StageDelegate.getInstance()._stageHeight=Math.round(a);b=document.getElementById(f.canvas_div_name);a=document.getElementById(f.egret_root_div);b||(b=d.Browser.getInstance().$new("div"),b.id=f.canvas_div_name,a.appendChild(b));
b.style.width=h+"px";b.style.height=c+"px";a.style.width=h+"px";a.style.height=c+"px";a.style.top=t+"px"};a._getClientWidth=function(){return document.documentElement.clientWidth};a._getClientHeight=function(){return document.documentElement.clientHeight};return b}();d.ContentStrategy=e;e.prototype.__class__="egret.ContentStrategy";var b=function(b){function a(c){void 0===c&&(c=0);b.call(this);this.minWidth=NaN;this.minWidth=c}__extends(a,b);a.prototype._apply=function(b,a,h){a=this._getClientWidth();
var c=this._getClientHeight(),d=c/h,e=a/d,t=1;0!=this.minWidth&&(t=Math.min(1,e/this.minWidth));this.setEgretSize(e/t,h,a,c*t);b._scaleX=d*t;b._scaleY=d*t};return a}(e);d.FixedHeight=b;b.prototype.__class__="egret.FixedHeight";b=function(b){function a(c){void 0===c&&(c=0);b.call(this);this.minHeight=NaN;this.minHeight=c}__extends(a,b);a.prototype._apply=function(b,a,h){h=this._getClientWidth();var c=this._getClientHeight(),d=h/a,e=c/d,t=1;0!=this.minHeight&&(t=Math.min(1,e/this.minHeight));this.setEgretSize(a,
e/t,h*t,c,h*(1-t)/2);b._scaleX=d*t;b._scaleY=d*t};return a}(e);d.FixedWidth=b;b.prototype.__class__="egret.FixedWidth";b=function(b){function a(c,d){b.call(this);this.width=c;this.height=d}__extends(a,b);a.prototype._apply=function(b,a,h){h=this.width;var c=this.height,d=h/a;this.setEgretSize(a,c/d,h,c);b._scaleX=d;b._scaleY=d};return a}(e);d.FixedSize=b;b.prototype.__class__="egret.FixedSize";b=function(b){function a(){b.call(this)}__extends(a,b);a.prototype._apply=function(b,a,h){this.setEgretSize(a,
h,a,h,Math.floor((a-a)/2));b._scaleX=1;b._scaleY=1};return a}(e);d.NoScale=b;b.prototype.__class__="egret.NoScale";b=function(b){function a(){b.call(this)}__extends(a,b);a.prototype._apply=function(b,a,h){var c=this._getClientWidth(),d=this._getClientHeight(),e=c,t=d,f=e/a<t/h?e/a:t/h,e=a*f,t=h*f,c=Math.floor((c-e)/2);b._offSetY=Math.floor((d-t)/2);this.setEgretSize(a,h/1,1*e,t,c,b._offSetY);b._scaleX=1*f;b._scaleY=1*f};return a}(e);d.ShowAll=b;b.prototype.__class__="egret.ShowAll";e=function(b){function a(){b.call(this)}
__extends(a,b);a.prototype._apply=function(b,a,h){var c=this._getClientWidth(),d=this._getClientHeight(),c=c/a,d=d/h;this.setEgretSize(a,h,a*c,h*d);b._scaleX=c;b._scaleY=d};return a}(e);d.FullScreen=e;e.prototype.__class__="egret.FullScreen"})(egret||(egret={}));
(function(d){var f=function(e){function a(){e.call(this);this._originalData={};this._drawAreaList=[]}__extends(a,e);var c=a.prototype;a.getInstance=function(){null==a.instance&&(a.instance=new a);return a.instance};c.addDrawArea=function(b){this._drawAreaList.push(b)};c.clearDrawArea=function(){this._drawAreaList=[]};c.drawImage=function(b,h,c,e,f,g,k,l,m,n,q){void 0===q&&(q=void 0);k=k||0;l=l||0;var r=h._texture_to_render;if(null!=r&&0!=g&&0!=f&&0!=m&&0!=n){var s=d.MainContext.instance.rendererContext._texture_scale_factor;
f/=s;g/=s;if(0!=this._drawAreaList.length&&d.MainContext.instance.rendererContext._cacheCanvasContext){s=d.DisplayObject.getTransformBounds(h._getSize(a.identityRectangle),h._worldTransform);h._worldBounds.initialize(s.x,s.y,s.width,s.height);s=this._originalData;s.sourceX=c;s.sourceY=e;s.sourceWidth=f;s.sourceHeight=g;s.destX=k;s.destY=l;s.destWidth=m;s.destHeight=n;for(var D=this.getDrawAreaList(),w=0;w<D.length;w++)if(!this.ignoreRender(h,D[w],s.destX,s.destY)){b.drawImage(r,c,e,f,g,k,l,m,n,q);
break}}else b.drawImage(r,c,e,f,g,k,l,m,n,q)}};c.ignoreRender=function(b,a,c,d){var e=b._worldBounds;c*=b._worldTransform.a;d*=b._worldTransform.d;return e.x+e.width+c<=a.x||e.x+c>=a.x+a.width||e.y+e.height+d<=a.y||e.y+d>=a.y+a.height?!0:!1};c.getDrawAreaList=function(){var b;0==this._drawAreaList.length?(this._defaultDrawAreaList||(this._defaultDrawAreaList=[new d.Rectangle(0,0,d.MainContext.instance.stage.stageWidth,d.MainContext.instance.stage.stageHeight)],d.MainContext.instance.stage.addEventListener(d.Event.RESIZE,
this.onResize,this)),b=this._defaultDrawAreaList):b=this._drawAreaList;return b};c.onResize=function(){d.MainContext.instance.stage.removeEventListener(d.Event.RESIZE,this.onResize,this);this._defaultDrawAreaList=null};a.identityRectangle=new d.Rectangle;return a}(d.HashObject);d.RenderFilter=f;f.prototype.__class__="egret.RenderFilter"})(egret||(egret={}));
(function(d){var f=function(){function e(){}e.mapClass=function(a,c,b){void 0===b&&(b="");a=this.getKey(a)+"#"+b;this.mapClassDic[a]=c};e.getKey=function(a){return"string"==typeof a?a:d.getQualifiedClassName(a)};e.mapValue=function(a,c,b){void 0===b&&(b="");a=this.getKey(a)+"#"+b;this.mapValueDic[a]=c};e.hasMapRule=function(a,c){void 0===c&&(c="");var b=this.getKey(a)+"#"+c;return this.mapValueDic[b]||this.mapClassDic[b]?!0:!1};e.getInstance=function(a,c){void 0===c&&(c="");var b=this.getKey(a)+"#"+
c;if(this.mapValueDic[b])return this.mapValueDic[b];var h=this.mapClassDic[b];if(h)return h=new h,this.mapValueDic[b]=h,delete this.mapClassDic[b],h;d.$error(1028,b)};e.mapClassDic={};e.mapValueDic={};return e}();d.Injector=f;f.prototype.__class__="egret.Injector"})(egret||(egret={}));(function(d){var f=function(d){function a(){d.apply(this,arguments);this.type=null}__extends(a,d);return a}(d.HashObject);d.Filter=f;f.prototype.__class__="egret.Filter"})(egret||(egret={}));
(function(d){var f=function(d){function a(a,b){d.call(this);this.blurX=a;this.blurY=b;this.type="blur"}__extends(a,d);return a}(d.Filter);d.BlurFilter=f;f.prototype.__class__="egret.BlurFilter"})(egret||(egret={}));
(function(d){var f=function(d){function a(b){void 0===b&&(b=null);d.call(this);this._matrix=[];this._matrix2=[];this.type="colorTransform";this._setMatrix(b)}__extends(a,d);var c=a.prototype;Object.defineProperty(c,"matrix",{get:function(){for(var b=0;20>b;b++)this._matrix2[b]=this._matrix[b];return this._matrix2},set:function(b){this._setMatrix(b)},enumerable:!0,configurable:!0});c._setMatrix=function(b){for(var a=0;20>a;a++)this._matrix[a]=b&&b[a]||0};return a}(d.Filter);d.ColorMatrixFilter=f;f.prototype.__class__=
"egret.ColorMatrixFilter"})(egret||(egret={}));
(function(d){var f=function(d){function a(a,b,h,t,f,p,g,k){void 0===a&&(a=16711680);void 0===b&&(b=1);void 0===h&&(h=6);void 0===t&&(t=6);void 0===f&&(f=2);void 0===p&&(p=1);void 0===g&&(g=!1);void 0===k&&(k=!1);d.call(this);this.color=a;this.alpha=b;this.blurX=h;this.blurY=t;this.strength=f;this.quality=p;this.inner=g;this.knockout=k;this.type="glow";this._blue=a&255;this._green=(a&65280)>>8;this._red=a>>16}__extends(a,d);return a}(d.Filter);d.GlowFilter=f;f.prototype.__class__="egret.GlowFilter"})(egret||
(egret={}));(function(d){var f=function(d){function a(a,b,h,t,f,p,g,k,l,m,n){void 0===a&&(a=4);void 0===b&&(b=45);void 0===h&&(h=0);void 0===t&&(t=1);void 0===f&&(f=4);void 0===p&&(p=4);void 0===g&&(g=1);void 0===k&&(k=1);void 0===l&&(l=!1);void 0===m&&(m=!1);d.call(this,h,t,f,p,g,k,l,m);this.distance=a;this.angle=b}__extends(a,d);return a}(d.GlowFilter);d.DropShadowFilter=f;f.prototype.__class__="egret.DropShadowFilter"})(egret||(egret={}));
(function(d){var f=function(){function d(){}d.NORMAL="normal";d.ADD="add";d.ERASE="erase";d.ERASE_REVERSE="eraseReverse";return d}();d.BlendMode=f;f.prototype.__class__="egret.BlendMode"})(egret||(egret={}));
(function(d){var f=function(){function d(){this._name=null;this._explicitHeight=this._explicitWidth=NaN;this._y=this._x=0;this._scaleY=this._scaleX=1;this._rotation=this._anchorY=this._anchorX=this._anchorOffsetY=this._anchorOffsetX=0;this._alpha=1;this._skewY=this._skewX=0;this._blendMode=null;this._touchEnabled=d.defaultTouchEnabled;this._visible=!0;this._worldAlpha=1;this._scrollRect=null;this._cacheAsBitmap=!1;this._stage=this._parent=null;this._needDraw=!1;this._filters=null;this._hasHeightSet=
this._hasWidthSet=!1;this._sizeDirty=this._normalDirty=!0;this._isContainer=!1}d.defaultTouchEnabled=!1;return d}();d.DisplayObjectProperties=f;f.prototype.__class__="egret.DisplayObjectProperties"})(egret||(egret={}));(function(d){var f=function(){return function(){this._hitTestPointTexture=null;this._rectH=this._rectW=0;this._cacheDirty=!1}}();d.DisplayObjectPrivateProperties=f;f.prototype.__class__="egret.DisplayObjectPrivateProperties"})(egret||(egret={}));
(function(d){var f=function(e){function a(){e.call(this);this.renderTexture=this.mask=this._sizeChangeCallTarget=this._sizeChangeCallBack=this.__hack_local_matrix=this._worldBounds=this._texture_to_render=null;this._DO_Props_=new d.DisplayObjectProperties;this._DO_Privs_=new d.DisplayObjectPrivateProperties;this._worldTransform=new d.Matrix;this._worldBounds=new d.Rectangle(0,0,0,0);this._DO_Privs_._cacheBounds=new d.Rectangle(0,0,0,0)}__extends(a,e);var c=a.prototype;c._setDirty=function(){this._DO_Props_._normalDirty=
!0};c.getDirty=function(){return this._DO_Props_._normalDirty||this._DO_Props_._sizeDirty};c._setParentSizeDirty=function(){var b=this._DO_Props_._parent;b&&(b._DO_Props_._hasWidthSet||b._DO_Props_._hasHeightSet?b._setCacheDirty():b._setSizeDirty())};c._setSizeDirty=function(){var b=this._DO_Props_;b._sizeDirty||(b._sizeDirty=!0,this._setDirty(),this._setCacheDirty(),this._setParentSizeDirty(),null!=this._sizeChangeCallBack&&(this._sizeChangeCallTarget==b._parent?this._sizeChangeCallBack.call(this._sizeChangeCallTarget):
this._sizeChangeCallTarget=this._sizeChangeCallBack=null))};c._clearDirty=function(){this._DO_Props_._normalDirty=!1};c._clearSizeDirty=function(){this._DO_Props_._sizeDirty=!1};Object.defineProperty(c,"name",{get:function(){return this._DO_Props_._name},set:function(b){this._DO_Props_._name=b},enumerable:!0,configurable:!0});Object.defineProperty(c,"parent",{get:function(){return this._DO_Props_._parent},enumerable:!0,configurable:!0});c._parentChanged=function(b){this._DO_Props_._parent=b};Object.defineProperty(c,
"x",{get:function(){return this._DO_Props_._x},set:function(b){this._setX(b)},enumerable:!0,configurable:!0});c._setX=function(b){d.NumberUtils.isNumber(b)&&this._DO_Props_._x!=b&&(this._DO_Props_._x=b,this._setDirty(),this._setParentSizeDirty())};Object.defineProperty(c,"y",{get:function(){return this._DO_Props_._y},set:function(b){this._setY(b)},enumerable:!0,configurable:!0});c._setY=function(b){d.NumberUtils.isNumber(b)&&this._DO_Props_._y!=b&&(this._DO_Props_._y=b,this._setDirty(),this._setParentSizeDirty())};
Object.defineProperty(c,"scaleX",{get:function(){return this._DO_Props_._scaleX},set:function(b){d.NumberUtils.isNumber(b)&&this._DO_Props_._scaleX!=b&&(this._DO_Props_._scaleX=b,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(c,"scaleY",{get:function(){return this._DO_Props_._scaleY},set:function(b){d.NumberUtils.isNumber(b)&&this._DO_Props_._scaleY!=b&&(this._DO_Props_._scaleY=b,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});
Object.defineProperty(c,"anchorOffsetX",{get:function(){return this._DO_Props_._anchorOffsetX},set:function(b){d.NumberUtils.isNumber(b)&&this._DO_Props_._anchorOffsetX!=b&&(this._DO_Props_._anchorOffsetX=b,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(c,"anchorOffsetY",{get:function(){return this._DO_Props_._anchorOffsetY},set:function(b){d.NumberUtils.isNumber(b)&&this._DO_Props_._anchorOffsetY!=b&&(this._DO_Props_._anchorOffsetY=b,this._setDirty(),
this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(c,"anchorX",{get:function(){return this._DO_Props_._anchorX},set:function(b){this._setAnchorX(b)},enumerable:!0,configurable:!0});c._setAnchorX=function(b){d.NumberUtils.isNumber(b)&&this._DO_Props_._anchorX!=b&&(this._DO_Props_._anchorX=b,this._setDirty(),this._setParentSizeDirty())};Object.defineProperty(c,"anchorY",{get:function(){return this._DO_Props_._anchorY},set:function(b){this._setAnchorY(b)},enumerable:!0,
configurable:!0});c._setAnchorY=function(b){d.NumberUtils.isNumber(b)&&this._DO_Props_._anchorY!=b&&(this._DO_Props_._anchorY=b,this._setDirty(),this._setParentSizeDirty())};Object.defineProperty(c,"visible",{get:function(){return this._DO_Props_._visible},set:function(b){this._setVisible(b)},enumerable:!0,configurable:!0});c._setVisible=function(b){this._DO_Props_._visible!=b&&(this._DO_Props_._visible=b,this._setSizeDirty())};Object.defineProperty(c,"rotation",{get:function(){return this._DO_Props_._rotation},
set:function(b){d.NumberUtils.isNumber(b)&&this._DO_Props_._rotation!=b&&(this._DO_Props_._rotation=b,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(c,"alpha",{get:function(){return this._DO_Props_._alpha},set:function(b){this._setAlpha(b)},enumerable:!0,configurable:!0});c._setAlpha=function(b){d.NumberUtils.isNumber(b)&&this._DO_Props_._alpha!=b&&(this._DO_Props_._alpha=b,this._setDirty(),this._setCacheDirty())};Object.defineProperty(c,"skewX",
{get:function(){return this._DO_Props_._skewX},set:function(b){d.NumberUtils.isNumber(b)&&this._DO_Props_._skewX!=b&&(this._DO_Props_._skewX=b,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(c,"skewY",{get:function(){return this._DO_Props_._skewY},set:function(b){d.NumberUtils.isNumber(b)&&this._DO_Props_._skewY!=b&&(this._DO_Props_._skewY=b,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(c,"touchEnabled",
{get:function(){return this._DO_Props_._touchEnabled},set:function(b){this._setTouchEnabled(b)},enumerable:!0,configurable:!0});c._setTouchEnabled=function(b){this._DO_Props_._touchEnabled=b};Object.defineProperty(c,"blendMode",{get:function(){return this._DO_Props_._blendMode},set:function(b){this._DO_Props_._blendMode=b},enumerable:!0,configurable:!0});Object.defineProperty(c,"scrollRect",{get:function(){return this._DO_Props_._scrollRect},set:function(b){this._setScrollRect(b)},enumerable:!0,configurable:!0});
c._setScrollRect=function(b){this._DO_Props_._scrollRect=b;this._setSizeDirty()};Object.defineProperty(c,"measuredWidth",{get:function(){return this._measureBounds().width},enumerable:!0,configurable:!0});Object.defineProperty(c,"measuredHeight",{get:function(){return this._measureBounds().height},enumerable:!0,configurable:!0});Object.defineProperty(c,"explicitWidth",{get:function(){return this._DO_Props_._explicitWidth},enumerable:!0,configurable:!0});Object.defineProperty(c,"explicitHeight",{get:function(){return this._DO_Props_._explicitHeight},
enumerable:!0,configurable:!0});Object.defineProperty(c,"width",{get:function(){return this._getWidth()},set:function(b){this._setWidth(b)},enumerable:!0,configurable:!0});c._getWidth=function(){return this._getSize(d.Rectangle.identity).width};Object.defineProperty(c,"height",{get:function(){return this._getHeight()},set:function(b){this._setHeight(b)},enumerable:!0,configurable:!0});c._getHeight=function(){return this._getSize(d.Rectangle.identity).height};c._setWidth=function(b){this._setSizeDirty();
this._setCacheDirty();this._DO_Props_._explicitWidth=b;this._DO_Props_._hasWidthSet=d.NumberUtils.isNumber(b)};c._setHeight=function(b){this._setSizeDirty();this._setCacheDirty();this._DO_Props_._explicitHeight=b;this._DO_Props_._hasHeightSet=d.NumberUtils.isNumber(b)};Object.defineProperty(c,"worldAlpha",{get:function(){return this._DO_Props_._worldAlpha},set:function(b){this._DO_Props_._worldAlpha=b},enumerable:!0,configurable:!0});c._draw=function(b){if(this._DO_Props_._visible&&!this.drawCacheTexture(b)){var a=
d.MainContext.__use_new_draw&&this._DO_Props_._isContainer;this._hasFilters()&&!a&&this._setGlobalFilters(b);b.setAlpha(this.worldAlpha,this.blendMode);b.setTransform(this._worldTransform);var c=this.mask||this._DO_Props_._scrollRect;c&&!a&&b.pushMask(c);this._render(b);c&&!a&&b.popMask();this._hasFilters()&&!a&&this._removeGlobalFilters(b)}this.destroyCacheBounds()};c._setGlobalFilters=function(b){var c;c=this._DO_Props_._filters?this._DO_Props_._filters.concat():[];if(this._transform){var d=this._transform._colorTransform,
e=a.color;e[0]=d._redMultiplier;e[4]=d._redOffset;e[6]=d._greenMultiplier;e[9]=d._greenOffset;e[12]=d._blueMultiplier;e[14]=d._blueOffset;e[18]=d._alphaMultiplier;e[19]=d._alphaOffset;a.colorMatrixFilter._matrix=e;c.push(a.colorMatrixFilter)}b.setGlobalFilters(c)};c._removeGlobalFilters=function(b){b.setGlobalFilters(null)};c._hasFilters=function(){var b=this._DO_Props_._filters&&0<this._DO_Props_._filters.length;if(this._transform){var a=this._transform._colorTransform;if(1!=a._redMultiplier||0!=
a._redOffset||1!=a._greenMultiplier||0!=a._greenOffset||1!=a._blueMultiplier||0!=a._blueOffset||1!=a._alphaMultiplier||0!=a._alphaOffset)b=!0}return b};c._pushMask=function(b){b.setTransform(this._worldTransform);var a=this.mask||this._DO_Props_._scrollRect;a&&b.pushMask(a)};c._popMask=function(b){b.popMask()};c.drawCacheTexture=function(b){if(!1==this._DO_Props_._cacheAsBitmap)return!1;var a=this.getBounds(d.Rectangle.identity);if(this._DO_Privs_._cacheDirty||null==this._texture_to_render||1<=Math.round(a.width)-
this._texture_to_render._textureWidth||1<=Math.round(a.height)-this._texture_to_render._textureHeight)a=this._makeBitmapCache(),this._DO_Privs_._cacheDirty=!a;if(null==this._texture_to_render)return!1;var c=this._texture_to_render,a=c._offsetX,e=c._offsetY,f=c._textureWidth,c=c._textureHeight;this._updateTransform();b.setAlpha(this.worldAlpha,this.blendMode);b.setTransform(this._worldTransform);d.RenderFilter.getInstance().drawImage(b,this,0,0,f,c,a,e,f,c);return!0};Object.defineProperty(c,"needDraw",
{get:function(){return this._DO_Props_._needDraw},set:function(b){this._DO_Props_._needDraw=b},enumerable:!0,configurable:!0});c._updateTransform=function(){var b=this._DO_Props_;b._visible&&(this._calculateWorldTransform(),"updateTransform"==d.MainContext._renderLoopPhase&&(this.needDraw||this._texture_to_render||b._cacheAsBitmap)&&d.RenderCommand.push(this._draw,this))};c._calculateWorldTransform=function(){var b=this._DO_Props_,a=this._worldTransform,c=b._parent;a.identityMatrix(c._worldTransform);
this._getMatrix(a);var d=b._scrollRect;d&&a.append(1,0,0,1,-d.x,-d.y);this.worldAlpha=c.worldAlpha*b._alpha};c._render=function(b){};c.getBounds=function(b,a){void 0===a&&(a=!0);var c=this._DO_Props_,e=this._DO_Privs_,f=this._measureBounds(),g=c._hasWidthSet?c._explicitWidth:f.width,k=c._hasHeightSet?c._explicitHeight:f.height;e._rectW=f.width;e._rectH=f.height;this._clearSizeDirty();var l=f.x,f=f.y,m=0,n=0;a&&(0!=c._anchorX||0!=c._anchorY?(m=g*c._anchorX,n=k*c._anchorY):(m=c._anchorOffsetX,n=c._anchorOffsetY));
e._cacheBounds.initialize(l-m,f-n,g,k);c=e._cacheBounds;b||(b=new d.Rectangle);return b.initialize(c.x,c.y,c.width,c.height)};c.destroyCacheBounds=function(){var b=this._DO_Privs_;b._cacheBounds.x=0;b._cacheBounds.y=0;b._cacheBounds.width=0;b._cacheBounds.height=0};c._getConcatenatedMatrix=function(){for(var b=a.identityMatrixForGetConcatenated.identity(),c=this;null!=c;){var e=c._DO_Props_;0!=e._anchorX||0!=e._anchorY?(c=c._getSize(d.Rectangle.identity),b.prependTransform(e._x,e._y,e._scaleX,e._scaleY,
e._rotation,e._skewX,e._skewY,c.width*e._anchorX,c.height*e._anchorY)):b.prependTransform(e._x,e._y,e._scaleX,e._scaleY,e._rotation,e._skewX,e._skewY,e._anchorOffsetX,e._anchorOffsetY);e._scrollRect&&b.prepend(1,0,0,1,-e._scrollRect.x,-e._scrollRect.y);c=e._parent}return b};c.localToGlobal=function(b,a,c){void 0===b&&(b=0);void 0===a&&(a=0);var e=this._getConcatenatedMatrix();e.append(1,0,0,1,b,a);c||(c=new d.Point);c.x=e.tx;c.y=e.ty;return c};c.globalToLocal=function(b,a,c){void 0===b&&(b=0);void 0===
a&&(a=0);var e=this._getConcatenatedMatrix();e.invert();e.append(1,0,0,1,b,a);c||(c=new d.Point);c.x=e.tx;c.y=e.ty;return c};c.hitTest=function(b,a,c){void 0===c&&(c=!1);var e=this._DO_Props_;if(!e._visible||!c&&!e._touchEnabled)return null;c=this.getBounds(d.Rectangle.identity,!1);b-=c.x;a-=c.y;return 0<=b&&b<c.width&&0<=a&&a<c.height?this.mask||e._scrollRect?e._scrollRect&&b>e._scrollRect.x&&a>e._scrollRect.y&&b<e._scrollRect.x+e._scrollRect.width&&a<e._scrollRect.y+e._scrollRect.height||this.mask&&
this.mask.x<=b&&b<this.mask.x+this.mask.width&&this.mask.y<=a&&a<this.mask.y+this.mask.height?this:null:this:null};c.hitTestPoint=function(b,a,c){var e=this._DO_Privs_;b=this.globalToLocal(b,a);return c?(e._hitTestPointTexture||(e._hitTestPointTexture=new d.RenderTexture),c=e._hitTestPointTexture,c.drawToTexture(this,new d.Rectangle(b.x-e._hitTestPointTexture._offsetX-1,b.y-e._hitTestPointTexture._offsetY-1,3,3)),0!=c.getPixel32(1,1)[3]?!0:!1):!!this.hitTest(b.x,b.y,!0)};c._getMatrix=function(b){b||
(b=d.Matrix.identity.identity());var a=this._DO_Props_,c,e;e=this._getOffsetPoint();c=e.x;e=e.y;var f=this.__hack_local_matrix;f?(b.append(f.a,f.b,f.c,f.d,f.tx,f.ty),b.append(1,0,0,1,-c,-e)):b.appendTransform(a._x,a._y,a._scaleX,a._scaleY,a._rotation,a._skewX,a._skewY,c,e);return b};c._getSize=function(b){var a=this._DO_Props_;if(a._hasHeightSet&&a._hasWidthSet)return this._clearSizeDirty(),b.initialize(0,0,a._explicitWidth,a._explicitHeight);this._measureSize(b);a._hasWidthSet&&(b.width=a._explicitWidth);
a._hasHeightSet&&(b.height=a._explicitHeight);return b};c._measureSize=function(b){var a=this._DO_Privs_;this._DO_Props_._sizeDirty?(b=this._measureBounds(),a._rectW=b.width,a._rectH=b.height,this._clearSizeDirty()):(b.width=a._rectW,b.height=a._rectH);b.x=0;b.y=0;return b};c._measureBounds=function(){return d.Rectangle.identity.initialize(0,0,0,0)};c._getOffsetPoint=function(){var b=this._DO_Props_,a=b._anchorOffsetX,c=b._anchorOffsetY;if(0!=b._anchorX||0!=b._anchorY)c=this._getSize(d.Rectangle.identity),
a=b._anchorX*c.width,c=b._anchorY*c.height;b=d.Point.identity;b.x=a;b.y=c;return b};c._onAddToStage=function(){this._DO_Props_._stage=d.MainContext.instance.stage;d.DisplayObjectContainer.__EVENT__ADD_TO_STAGE_LIST.push(this)};c._onRemoveFromStage=function(){d.DisplayObjectContainer.__EVENT__REMOVE_FROM_STAGE_LIST.push(this)};Object.defineProperty(c,"stage",{get:function(){return this._DO_Props_._stage},enumerable:!0,configurable:!0});c.addEventListener=function(b,c,t,f,p){void 0===f&&(f=!1);void 0===
p&&(p=0);e.prototype.addEventListener.call(this,b,c,t,f,p);((f=b==d.Event.ENTER_FRAME)||b==d.Event.RENDER)&&this._insertEventBin(f?a._enterFrameCallBackList:a._renderCallBackList,c,t,p,this)};c.removeEventListener=function(b,c,t,f){void 0===f&&(f=!1);e.prototype.removeEventListener.call(this,b,c,t,f);((f=b==d.Event.ENTER_FRAME)||b==d.Event.RENDER)&&this._removeEventBin(f?a._enterFrameCallBackList:a._renderCallBackList,c,t,this)};c.dispatchEvent=function(b){if(!b._bubbles)return e.prototype.dispatchEvent.call(this,
b);for(var a=[],c=this;c;)a.push(c),c=c._DO_Props_._parent;b._reset();this._dispatchPropagationEvent(b,a);return!b._isDefaultPrevented};c._dispatchPropagationEvent=function(b,a,c){c=a.length;for(var d=1,e=c-1;0<=e;e--){var f=a[e];b._currentTarget=f;b._target=this;b._eventPhase=d;f._notifyListener(b);if(b._isPropagationStopped||b._isPropagationImmediateStopped)return}f=a[0];b._currentTarget=f;b._target=this;b._eventPhase=2;f._notifyListener(b);if(!b._isPropagationStopped&&!b._isPropagationImmediateStopped)for(d=
3,e=1;e<c&&(f=a[e],b._currentTarget=f,b._target=this,b._eventPhase=d,f._notifyListener(b),!b._isPropagationStopped&&!b._isPropagationImmediateStopped);e++);};c.willTrigger=function(b){for(var a=this;a;){if(a.hasEventListener(b))return!0;a=a._DO_Props_._parent}return!1};Object.defineProperty(c,"cacheAsBitmap",{get:function(){return this._DO_Props_._cacheAsBitmap},set:function(b){(this._DO_Props_._cacheAsBitmap=b)?d.callLater(this._makeBitmapCache,this):this._texture_to_render=null},enumerable:!0,configurable:!0});
c._makeBitmapCache=function(){this.renderTexture||(this.renderTexture=new d.RenderTexture);var b=this.renderTexture.drawToTexture(this);this._texture_to_render=b?this.renderTexture:null;return b};c._setCacheDirty=function(b){void 0===b&&(b=!0);this._DO_Privs_._cacheDirty=b};a.getTransformBounds=function(b,a){var c=b.x,d=b.y,e=b.width,f=b.height;(c||d)&&a.appendTransform(0,0,1,1,0,0,0,-c,-d);var k=e*a.a,e=e*a.b,l=f*a.c,f=f*a.d,m=a.tx,n=a.ty,q=m,r=m,s=n,D=n;(c=k+m)<q?q=c:c>r&&(r=c);(c=k+l+m)<q?q=c:
c>r&&(r=c);(c=l+m)<q?q=c:c>r&&(r=c);(d=e+n)<s?s=d:d>D&&(D=d);(d=e+f+n)<s?s=d:d>D&&(D=d);(d=f+n)<s?s=d:d>D&&(D=d);return b.initialize(q,s,r-q,D-s)};Object.defineProperty(c,"filters",{get:function(){return this._DO_Props_._filters},set:function(b){this._DO_Props_._filters=b},enumerable:!0,configurable:!0});Object.defineProperty(c,"transform",{get:function(){this._transform||(this._transform=new d.Transform(this));return this._transform},enumerable:!0,configurable:!0});a.color=[1,0,0,0,0,0,1,0,0,0,0,
0,1,0,0,0,0,0,1,0];a.colorMatrixFilter=new d.ColorMatrixFilter;a.identityMatrixForGetConcatenated=new d.Matrix;a._enterFrameCallBackList=[];a._renderCallBackList=[];return a}(d.EventDispatcher);d.DisplayObject=f;f.prototype.__class__="egret.DisplayObject"})(egret||(egret={}));
(function(d){var f=function(e){function a(){e.call(this);this._touchChildren=!0;this._children=[];this._DO_Props_._isContainer=!0}__extends(a,e);var c=a.prototype;Object.defineProperty(c,"touchChildren",{get:function(){return this._touchChildren},set:function(b){this._touchChildren=b},enumerable:!0,configurable:!0});Object.defineProperty(c,"numChildren",{get:function(){return this._children.length},enumerable:!0,configurable:!0});c.setChildIndex=function(b,a){this.doSetChildIndex(b,a)};c.doSetChildIndex=
function(b,a){var c=this._children.indexOf(b);0>c&&d.$error(1006);this._children.splice(c,1);0>a||this._children.length<=a?this._children.push(b):this._children.splice(a,0,b)};c.addChild=function(b){var a=this._children.length;b.parent==this&&a--;return this._doAddChild(b,a)};c.addChildAt=function(b,a){return this._doAddChild(b,a)};c._doAddChild=function(b,c,e){void 0===e&&(e=!0);if(b==this)return b;if(0>c||c>this._children.length)return d.$error(1007),b;var f=b.parent;if(f==this)return this.doSetChildIndex(b,
c),b;if(f){var p=f._children.indexOf(b);0<=p&&f._doRemoveChild(p)}this._children.splice(c,0,b);b._parentChanged(this);e&&b.dispatchEventWith(d.Event.ADDED,!0);if(this._DO_Props_._stage)for(b._onAddToStage(),c=a.__EVENT__ADD_TO_STAGE_LIST;0<c.length;)f=c.shift(),e&&f.dispatchEventWith(d.Event.ADDED_TO_STAGE);b._setDirty();this._setSizeDirty();return b};c.removeChild=function(b){b=this._children.indexOf(b);if(0<=b)return this._doRemoveChild(b);d.$error(1008);return null};c.removeChildAt=function(b){if(0<=
b&&b<this._children.length)return this._doRemoveChild(b);d.$error(1007);return null};c._doRemoveChild=function(b,c){void 0===c&&(c=!0);var e=this._children,f=e[b];c&&f.dispatchEventWith(d.Event.REMOVED,!0);if(this._DO_Props_._stage){f._onRemoveFromStage();for(var p=a.__EVENT__REMOVE_FROM_STAGE_LIST;0<p.length;){var g=p.shift();c&&g.dispatchEventWith(d.Event.REMOVED_FROM_STAGE);g._DO_Props_._stage=null}}f._parentChanged(null);e.splice(b,1);this._setSizeDirty();return f};c.getChildAt=function(b){if(0<=
b&&b<this._children.length)return this._children[b];d.$error(1007);return null};c.contains=function(b){for(;b;){if(b==this)return!0;b=b.parent}return!1};c.swapChildrenAt=function(b,a){0<=b&&b<this._children.length&&0<=a&&a<this._children.length?this._swapChildrenAt(b,a):d.$error(1007)};c.swapChildren=function(b,a){var c=this._children.indexOf(b),e=this._children.indexOf(a);-1==c||-1==e?d.$error(1008):this._swapChildrenAt(c,e)};c._swapChildrenAt=function(b,a){if(b!=a){var c=this._children,d=c[b];c[b]=
c[a];c[a]=d}};c.getChildIndex=function(b){return this._children.indexOf(b)};c.removeChildren=function(){for(var b=this._children.length-1;0<=b;b--)this._doRemoveChild(b)};c._updateTransform=function(){if(this._DO_Props_._visible){this._hasFilters()&&d.RenderCommand.push(this._setGlobalFilters,this);var b=this.mask||this._DO_Props_._scrollRect;b&&d.RenderCommand.push(this._pushMask,this);e.prototype._updateTransform.call(this);if(!this._DO_Props_._cacheAsBitmap||!this._texture_to_render)for(var a=
0,c=this._children,f=c.length;a<f;a++)c[a]._updateTransform();b&&d.RenderCommand.push(this._popMask,this);this._hasFilters()&&d.RenderCommand.push(this._removeGlobalFilters,this)}};c._render=function(b){if(!d.MainContext.__use_new_draw)for(var a=0,c=this._children,e=c.length;a<e;a++)c[a]._draw(b)};c._measureBounds=function(){for(var b=0,a=0,c=0,e=0,f=this._children,g=f.length,k=0;k<g;k++){var l=f[k];if(l.visible){var m=l.getBounds(d.Rectangle.identity,!1),n=m.x,q=m.y,r=m.width,m=m.height,l=l._getMatrix(),
l=d.DisplayObject.getTransformBounds(d.Rectangle.identity.initialize(n,q,r,m),l),n=l.x,q=l.y,r=l.width+l.x,l=l.height+l.y;if(n<b||0==k)b=n;if(r>a||0==k)a=r;if(q<c||0==k)c=q;if(l>e||0==k)e=l}}return d.Rectangle.identity.initialize(b,c,a-b,e-c)};c.hitTest=function(b,a,c){void 0===c&&(c=!1);var f;if(!this._DO_Props_._visible)return null;if(this._DO_Props_._scrollRect){if(b<this._DO_Props_._scrollRect.x||a<this._DO_Props_._scrollRect.y||b>this._DO_Props_._scrollRect.x+this._DO_Props_._scrollRect.width||
a>this._DO_Props_._scrollRect.y+this._DO_Props_._scrollRect.height)return null}else if(this.mask&&(this.mask.x>b||b>this.mask.x+this.mask.width||this.mask.y>a||a>this.mask.y+this.mask.height))return null;for(var p=this._children,g=this._touchChildren,k=p.length-1;0<=k;k--){var l=p[k],m=l._getMatrix(),n=l.scrollRect;n&&m.append(1,0,0,1,-n.x,-n.y);m.invert();m=d.Matrix.transformCoords(m,b,a);if(l=l.hitTest(m.x,m.y,!0)){if(!g)return this;if(l._DO_Props_._touchEnabled&&g)return l;f=this}}return f?f:this._texture_to_render?
e.prototype.hitTest.call(this,b,a,c):null};c._onAddToStage=function(){e.prototype._onAddToStage.call(this);for(var b=this._children.length,a=0;a<b;a++)this._children[a]._onAddToStage()};c._onRemoveFromStage=function(){e.prototype._onRemoveFromStage.call(this);for(var b=this._children,a=b.length,c=0;c<a;c++)b[c]._onRemoveFromStage()};c.getChildByName=function(b){for(var a=this._children,c=a.length,d,e=0;e<c;e++)if(d=a[e],d.name==b)return d;return null};a.__EVENT__ADD_TO_STAGE_LIST=[];a.__EVENT__REMOVE_FROM_STAGE_LIST=
[];return a}(d.DisplayObject);d.DisplayObjectContainer=f;f.prototype.__class__="egret.DisplayObjectContainer"})(egret||(egret={}));(function(d){var f=function(){function d(){}d.NO_BORDER="noBorder";d.NO_SCALE="noScale";d.SHOW_ALL="showAll";d.EXACT_FIT="exactFit";return d}();d.StageScaleMode=f;f.prototype.__class__="egret.StageScaleMode"})(egret||(egret={}));
(function(d){var f=function(e){function a(b,a){void 0===b&&(b=480);void 0===a&&(a=800);e.call(this);this._changeSizeDispatchFlag=!0;this._scaleMode="";this._stageHeight=this._stageWidth=NaN;this._frameRate=60;this.touchEnabled=!0;this._DO_Props_._stage=this;this._stageWidth=b;this._stageHeight=a}__extends(a,e);var c=a.prototype;c.invalidate=function(){a._invalidateRenderFlag=!0};Object.defineProperty(c,"scaleMode",{get:function(){return this._scaleMode},set:function(b){this._scaleMode!=b&&(this._scaleMode=
b,this.setResolutionPolicy())},enumerable:!0,configurable:!0});c.changeSize=function(){this._changeSizeDispatchFlag&&(this.setResolutionPolicy(),this.dispatchEventWith(d.Event.RESIZE))};c.setResolutionPolicy=function(){var b=a.SCALE_MODE_ENUM[this._scaleMode];b||d.$error(1024);var c=new d.EqualToFrame,b=new d.ResolutionPolicy(c,b);d.StageDelegate.getInstance()._setResolutionPolicy(b);this._stageWidth=d.StageDelegate.getInstance()._stageWidth;this._stageHeight=d.StageDelegate.getInstance()._stageHeight};
Object.defineProperty(c,"stageWidth",{get:function(){return this._stageWidth},enumerable:!0,configurable:!0});Object.defineProperty(c,"stageHeight",{get:function(){return this._stageHeight},enumerable:!0,configurable:!0});Object.defineProperty(c,"frameRate",{get:function(){return this._frameRate},set:function(b){this._frameRate=b;d.MainContext.instance.deviceContext.setFrameRate(b)},enumerable:!0,configurable:!0});c.hitTest=function(b,a,c){if(!this._DO_Props_._touchEnabled)return null;var e;if(!this._touchChildren)return this;
c=this._children;for(var f=c.length-1;0<=f;f--){e=c[f];var g=e._getMatrix(),k=e.scrollRect;k&&g.append(1,0,0,1,-k.x,-k.y);g.invert();g=d.Matrix.transformCoords(g,b,a);if((e=e.hitTest(g.x,g.y,!0))&&e.touchEnabled)return e}return this};c.getBounds=function(b){b||(b=new d.Rectangle);return b.initialize(0,0,this._stageWidth,this._stageHeight)};c._updateTransform=function(){for(var b=0,a=this._children.length;b<a;b++)this._children[b]._updateTransform()};Object.defineProperty(c,"focus",{get:function(){return null},
enumerable:!0,configurable:!0});a.registerScaleMode=function(b,c,e){a.SCALE_MODE_ENUM[b]&&!e?d.$warn(1009,b):a.SCALE_MODE_ENUM[b]=c};a._invalidateRenderFlag=!1;a.SCALE_MODE_ENUM={};return a}(d.DisplayObjectContainer);d.Stage=f;f.prototype.__class__="egret.Stage"})(egret||(egret={}));egret.Stage.SCALE_MODE_ENUM[egret.StageScaleMode.NO_SCALE]=new egret.NoScale;egret.Stage.SCALE_MODE_ENUM[egret.StageScaleMode.SHOW_ALL]=new egret.ShowAll;egret.Stage.SCALE_MODE_ENUM[egret.StageScaleMode.NO_BORDER]=new egret.FixedWidth;
egret.Stage.SCALE_MODE_ENUM[egret.StageScaleMode.EXACT_FIT]=new egret.FullScreen;
(function(d){var f=function(){return function(){this._horizontalScrollPolicy=this._verticalScrollPolicy="auto";this._scrollTop=this._scrollLeft=0;this._vCanScroll=this._hCanScroll=!1;this._lastTouchPosition=new d.Point(0,0);this._touchStartPosition=new d.Point(0,0);this._scrollStarted=!1;this._lastTouchTime=0;this._lastTouchEvent=null;this._velocitys=[];this._isVTweenPlaying=this._isHTweenPlaying=!1;this._vScrollTween=this._hScrollTween=null;this._bounces=!0}}();d.ScrollViewProperties=f;f.prototype.__class__=
"egret.ScrollViewProperties"})(egret||(egret={}));
(function(d){var f=function(e){function a(b){void 0===b&&(b=null);e.call(this);this.scrollBeginThreshold=10;this.scrollSpeed=1;this.touchBeginTimer=this.delayTouchBeginEvent=this._content=null;this.touchEnabled=!0;this._ScrV_Props_=new d.ScrollViewProperties;b&&this.setContent(b)}__extends(a,e);var c=a.prototype;Object.defineProperty(c,"bounces",{get:function(){return this._ScrV_Props_._bounces},set:function(b){this._ScrV_Props_._bounces=!!b},enumerable:!0,configurable:!0});c.setContent=function(b){this._content!==
b&&(this.removeContent(),b&&(this._content=b,e.prototype.addChild.call(this,b),this._addEvents()))};c.removeContent=function(){this._content&&(this._removeEvents(),e.prototype.removeChildAt.call(this,0));this._content=null};Object.defineProperty(c,"verticalScrollPolicy",{get:function(){return this._ScrV_Props_._verticalScrollPolicy},set:function(b){b!=this._ScrV_Props_._verticalScrollPolicy&&(this._ScrV_Props_._verticalScrollPolicy=b)},enumerable:!0,configurable:!0});Object.defineProperty(c,"horizontalScrollPolicy",
{get:function(){return this._ScrV_Props_._horizontalScrollPolicy},set:function(b){b!=this._ScrV_Props_._horizontalScrollPolicy&&(this._ScrV_Props_._horizontalScrollPolicy=b)},enumerable:!0,configurable:!0});Object.defineProperty(c,"scrollLeft",{get:function(){return this._ScrV_Props_._scrollLeft},set:function(b){b!=this._ScrV_Props_._scrollLeft&&(this._ScrV_Props_._scrollLeft=b,this._validatePosition(!1,!0),this._updateContentPosition())},enumerable:!0,configurable:!0});Object.defineProperty(c,"scrollTop",
{get:function(){return this._ScrV_Props_._scrollTop},set:function(b){b!=this._ScrV_Props_._scrollTop&&(this._ScrV_Props_._scrollTop=b,this._validatePosition(!0,!1),this._updateContentPosition())},enumerable:!0,configurable:!0});c.setScrollPosition=function(b,a,c){void 0===c&&(c=!1);if(!c||0!=b||0!=a)if(c||this._ScrV_Props_._scrollTop!=b||this._ScrV_Props_._scrollLeft!=a){var d=this._ScrV_Props_._scrollTop,e=this._ScrV_Props_._scrollLeft;if(c){c=this.getMaxScrollLeft();var f=this.getMaxScrollTop();
if(0>=d||d>=f)b/=2;if(0>=e||e>=c)a/=2;b=d+b;a=e+a;if(!this._ScrV_Props_._bounces){if(0>=b||b>=f)b=Math.max(0,Math.min(b,f));if(0>=a||a>=c)a=Math.max(0,Math.min(a,c))}}this._ScrV_Props_._scrollTop=b;this._ScrV_Props_._scrollLeft=a;this._validatePosition(!0,!0);this._updateContentPosition()}};c._validatePosition=function(b,a){void 0===b&&(b=!1);void 0===a&&(a=!1);if(b){var c=this.height,d=this._getContentHeight();this._ScrV_Props_._scrollTop=Math.max(this._ScrV_Props_._scrollTop,(0-c)/2);this._ScrV_Props_._scrollTop=
Math.min(this._ScrV_Props_._scrollTop,d>c?d-c/2:c/2)}a&&(c=this.width,d=this._getContentWidth(),this._ScrV_Props_._scrollLeft=Math.max(this._ScrV_Props_._scrollLeft,(0-c)/2),this._ScrV_Props_._scrollLeft=Math.min(this._ScrV_Props_._scrollLeft,d>c?d-c/2:c/2))};c._setWidth=function(b){this._DO_Props_._explicitWidth!=b&&(e.prototype._setWidth.call(this,b),this._updateContentPosition())};c._setHeight=function(b){this._DO_Props_._explicitHeight!=b&&(e.prototype._setHeight.call(this,b),this._updateContentPosition())};
c._updateContentPosition=function(){var b=this.getBounds(d.Rectangle.identity),a=b.height,b=b.width;this.scrollRect=new d.Rectangle(Math.round(this._ScrV_Props_._scrollLeft),Math.round(this._ScrV_Props_._scrollTop),b,a);this.dispatchEvent(new d.Event(d.Event.CHANGE))};c._checkScrollPolicy=function(){var b=this.__checkScrollPolicy(this._ScrV_Props_._horizontalScrollPolicy,this._getContentWidth(),this.width);this._ScrV_Props_._hCanScroll=b;var a=this.__checkScrollPolicy(this._ScrV_Props_._verticalScrollPolicy,
this._getContentHeight(),this.height);this._ScrV_Props_._vCanScroll=a;return b||a};c.__checkScrollPolicy=function(b,a,c){return"on"==b?!0:"off"==b?!1:a>c};c._addEvents=function(){this.addEventListener(d.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,this);this.addEventListener(d.TouchEvent.TOUCH_BEGIN,this._onTouchBeginCapture,this,!0);this.addEventListener(d.TouchEvent.TOUCH_END,this._onTouchEndCapture,this,!0)};c._removeEvents=function(){this.removeEventListener(d.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,
this);this.removeEventListener(d.TouchEvent.TOUCH_BEGIN,this._onTouchBeginCapture,this,!0);this.removeEventListener(d.TouchEvent.TOUCH_END,this._onTouchEndCapture,this,!0)};c._onTouchBegin=function(b){!b._isDefaultPrevented&&this._checkScrollPolicy()&&(this._ScrV_Props_._touchStartPosition.x=b.stageX,this._ScrV_Props_._touchStartPosition.y=b.stageY,(this._ScrV_Props_._isHTweenPlaying||this._ScrV_Props_._isVTweenPlaying)&&this._onScrollFinished(),this.stage.addEventListener(d.TouchEvent.TOUCH_MOVE,
this._onTouchMove,this),this.stage.addEventListener(d.TouchEvent.TOUCH_END,this._onTouchEnd,this),this.stage.addEventListener(d.TouchEvent.LEAVE_STAGE,this._onTouchEnd,this),this.addEventListener(d.Event.ENTER_FRAME,this._onEnterFrame,this),this._logTouchEvent(b),b.preventDefault())};c._onTouchBeginCapture=function(b){var a=this._checkScrollPolicy();if(a){for(var c=b.target;c!=this;){if("_checkScrollPolicy"in c&&(a=c._checkScrollPolicy()))return;c=c.parent}b.stopPropagation();this.delayTouchBeginEvent=
this.cloneTouchEvent(b);this.touchBeginTimer||(this.touchBeginTimer=new d.Timer(100,1),this.touchBeginTimer.addEventListener(d.TimerEvent.TIMER_COMPLETE,this._onTouchBeginTimer,this));this.touchBeginTimer.start();this._onTouchBegin(b)}};c._onTouchEndCapture=function(b){this.delayTouchBeginEvent&&this._onTouchBeginTimer()};c._onTouchBeginTimer=function(){this.touchBeginTimer.stop();var b=this.delayTouchBeginEvent;this.delayTouchBeginEvent=null;this.stage&&this.dispatchPropagationEvent(b)};c.dispatchPropagationEvent=
function(b){for(var a=[],c=b._target,d=0;c;)c==this&&(d=a.length),a.push(c),c=c.parent;c=a.slice(0,d);c=c.reverse();a=c.concat(a);this._dispatchPropagationEvent(b,a,d)};c._dispatchPropagationEvent=function(b,a,c){for(var d=a.length,e=0;e<d;e++){var f=a[e];b._currentTarget=f;b._eventPhase=e<c?1:e==c?2:3;f._notifyListener(b);if(b._isPropagationStopped||b._isPropagationImmediateStopped)break}};c._onTouchMove=function(b){if(this._ScrV_Props_._lastTouchPosition.x!=b.stageX||this._ScrV_Props_._lastTouchPosition.y!=
b.stageY){if(!this._ScrV_Props_._scrollStarted){var a=b.stageX-this._ScrV_Props_._touchStartPosition.x,c=b.stageY-this._ScrV_Props_._touchStartPosition.y;if(Math.sqrt(a*a+c*c)<this.scrollBeginThreshold){this._logTouchEvent(b);return}}this._ScrV_Props_._scrollStarted=!0;this.delayTouchBeginEvent&&(this.delayTouchBeginEvent=null,this.touchBeginTimer.stop());this.touchChildren=!1;a=this._getPointChange(b);this.setScrollPosition(a.y,a.x,!0);this._calcVelocitys(b);this._logTouchEvent(b)}};c._onTouchEnd=
function(b){this.touchChildren=!0;this._ScrV_Props_._scrollStarted=!1;d.MainContext.instance.stage.removeEventListener(d.TouchEvent.TOUCH_MOVE,this._onTouchMove,this);d.MainContext.instance.stage.removeEventListener(d.TouchEvent.TOUCH_END,this._onTouchEnd,this);d.MainContext.instance.stage.removeEventListener(d.TouchEvent.LEAVE_STAGE,this._onTouchEnd,this);this.removeEventListener(d.Event.ENTER_FRAME,this._onEnterFrame,this);this._moveAfterTouchEnd()};c._onEnterFrame=function(b){b=d.getTimer();100<
b-this._ScrV_Props_._lastTouchTime&&300>b-this._ScrV_Props_._lastTouchTime&&this._calcVelocitys(this._ScrV_Props_._lastTouchEvent)};c._logTouchEvent=function(b){this._ScrV_Props_._lastTouchPosition.x=b.stageX;this._ScrV_Props_._lastTouchPosition.y=b.stageY;this._ScrV_Props_._lastTouchEvent=this.cloneTouchEvent(b);this._ScrV_Props_._lastTouchTime=d.getTimer()};c._getPointChange=function(b){return{x:!1===this._ScrV_Props_._hCanScroll?0:this._ScrV_Props_._lastTouchPosition.x-b.stageX,y:!1===this._ScrV_Props_._vCanScroll?
0:this._ScrV_Props_._lastTouchPosition.y-b.stageY}};c._calcVelocitys=function(b){var a=d.getTimer();if(0==this._ScrV_Props_._lastTouchTime)this._ScrV_Props_._lastTouchTime=a;else{var c=this._getPointChange(b),a=a-this._ScrV_Props_._lastTouchTime;c.x/=a;c.y/=a;this._ScrV_Props_._velocitys.push(c);5<this._ScrV_Props_._velocitys.length&&this._ScrV_Props_._velocitys.shift();this._ScrV_Props_._lastTouchPosition.x=b.stageX;this._ScrV_Props_._lastTouchPosition.y=b.stageY}};c._getContentWidth=function(){return this._content.explicitWidth||
this._content.width};c._getContentHeight=function(){return this._content.explicitHeight||this._content.height};c.getMaxScrollLeft=function(){var b=this._getContentWidth()-this.width;return Math.max(0,b)};c.getMaxScrollTop=function(){var b=this._getContentHeight()-this.height;return Math.max(0,b)};c._moveAfterTouchEnd=function(){if(0!=this._ScrV_Props_._velocitys.length){for(var b=0,c=0,d=0,e=0;e<this._ScrV_Props_._velocitys.length;e++)var f=this._ScrV_Props_._velocitys[e],g=a.weight[e],b=b+f.x*g,
c=c+f.y*g,d=d+g;this._ScrV_Props_._velocitys.length=0;0>=this.scrollSpeed&&(this.scrollSpeed=1);b=b/d*this.scrollSpeed;c=c/d*this.scrollSpeed;f=Math.abs(b);d=Math.abs(c);g=this.getMaxScrollLeft();e=this.getMaxScrollTop();b=0.02<f?this.getAnimationDatas(b,this._ScrV_Props_._scrollLeft,g):{position:this._ScrV_Props_._scrollLeft,duration:1};c=0.02<d?this.getAnimationDatas(c,this._ScrV_Props_._scrollTop,e):{position:this._ScrV_Props_._scrollTop,duration:1};this.setScrollLeft(b.position,b.duration);this.setScrollTop(c.position,
c.duration)}};c._onTweenFinished=function(b){b==this._ScrV_Props_._vScrollTween&&(this._ScrV_Props_._isVTweenPlaying=!1);b==this._ScrV_Props_._hScrollTween&&(this._ScrV_Props_._isHTweenPlaying=!1);!1==this._ScrV_Props_._isHTweenPlaying&&!1==this._ScrV_Props_._isVTweenPlaying&&this._onScrollFinished()};c._onScrollStarted=function(){};c._onScrollFinished=function(){d.Tween.removeTweens(this);this._ScrV_Props_._hScrollTween=null;this._ScrV_Props_._vScrollTween=null;this._ScrV_Props_._isHTweenPlaying=
!1;this._ScrV_Props_._isVTweenPlaying=!1;this.dispatchEvent(new d.Event(d.Event.COMPLETE))};c.setScrollTop=function(b,a){void 0===a&&(a=0);var c=Math.min(this.getMaxScrollTop(),Math.max(b,0));if(0==a)return this.scrollTop=c,null;!1==this._ScrV_Props_._bounces&&(b=c);var e=d.Tween.get(this).to({scrollTop:b},a,d.Ease.quartOut);c!=b&&e.to({scrollTop:c},300,d.Ease.quintOut);this._ScrV_Props_._isVTweenPlaying=!0;this._ScrV_Props_._vScrollTween=e;e.call(this._onTweenFinished,this,[e]);this._ScrV_Props_._isHTweenPlaying||
this._onScrollStarted();return e};c.setScrollLeft=function(b,a){void 0===a&&(a=0);var c=Math.min(this.getMaxScrollLeft(),Math.max(b,0));if(0==a)return this.scrollLeft=c,null;!1==this._ScrV_Props_._bounces&&(b=c);var e=d.Tween.get(this).to({scrollLeft:b},a,d.Ease.quartOut);c!=b&&e.to({scrollLeft:c},300,d.Ease.quintOut);this._ScrV_Props_._isHTweenPlaying=!0;this._ScrV_Props_._hScrollTween=e;e.call(this._onTweenFinished,this,[e]);this._ScrV_Props_._isVTweenPlaying||this._onScrollStarted();return e};
c.getAnimationDatas=function(b,a,c){var d=Math.abs(b),e=0,f=a+500*b;if(0>f||f>c)for(f=a;Infinity!=Math.abs(b)&&0.02<Math.abs(b);)f+=b,b=0>f||f>c?0.998*b*0.95:0.998*b,e++;else e=500*-Math.log(0.02/d);return{position:Math.min(c+50,Math.max(f,-50)),duration:e}};c.cloneTouchEvent=function(b){var a=new d.TouchEvent(b._type,b._bubbles,b.cancelable);a.touchPointID=b.touchPointID;a._stageX=b._stageX;a._stageY=b._stageY;a.ctrlKey=b.ctrlKey;a.altKey=b.altKey;a.shiftKey=b.shiftKey;a.touchDown=b.touchDown;a._isDefaultPrevented=
!1;a._target=b._target;return a};c.throwNotSupportedError=function(){d.$error(1023)};c.addChild=function(b){this.throwNotSupportedError();return null};c.addChildAt=function(b,a){this.throwNotSupportedError();return null};c.removeChild=function(b){this.throwNotSupportedError();return null};c.removeChildAt=function(b){this.throwNotSupportedError();return null};c.setChildIndex=function(b,a){this.throwNotSupportedError()};c.swapChildren=function(b,a){this.throwNotSupportedError()};c.swapChildrenAt=function(b,
a){this.throwNotSupportedError()};c.hitTest=function(b,a,c){void 0===c&&(c=!1);var f=e.prototype.hitTest.call(this,b,a,c);return f?f:d.DisplayObject.prototype.hitTest.call(this,b,a,c)};a.weight=[1,1.33,1.66,2,2.33];return a}(d.DisplayObjectContainer);d.ScrollView=f;f.prototype.__class__="egret.ScrollView"})(egret||(egret={}));(function(d){var f=function(){function d(){}d.REPEAT="repeat";d.SCALE="scale";return d}();d.BitmapFillMode=f;f.prototype.__class__="egret.BitmapFillMode"})(egret||(egret={}));
(function(d){var f=function(e){function a(b){e.call(this);this.scale9Grid=this._texture=null;this.fillMode="scale";b&&(this._texture=b,this._setSizeDirty());this.needDraw=!0}__extends(a,e);var c=a.prototype;Object.defineProperty(c,"texture",{get:function(){return this._texture},set:function(b){b!=this._texture&&(this._setSizeDirty(),this._texture=b)},enumerable:!0,configurable:!0});c._render=function(b){var c=this._texture;c?(this._texture_to_render=c,a._drawBitmap(b,this._DO_Props_._hasWidthSet?
this._DO_Props_._explicitWidth:c._textureWidth,this._DO_Props_._hasHeightSet?this._DO_Props_._explicitHeight:c._textureHeight,this)):this._texture_to_render=null};a._drawBitmap=function(b,c,d,e){var f=e._texture_to_render;if(f){var g=f._textureWidth,k=f._textureHeight;if("scale"==e.fillMode){var l=e.scale9Grid||f.scale9Grid;if(l&&g-l.width<c&&k-l.height<d)a.drawScale9GridImage(b,e,l,c,d);else{var l=f._offsetX,m=f._offsetY,n=f._bitmapWidth||g,q=f._bitmapHeight||k;c/=g;l=Math.round(l*c);c=Math.round(n*
c);d/=k;m=Math.round(m*d);d=Math.round(q*d);a.renderFilter.drawImage(b,e,f._bitmapX,f._bitmapY,n,q,l,m,c,d)}}else a.drawRepeatImage(b,e,c,d,e.fillMode)}};a.drawRepeatImage=function(b,a,c,e,f){var g=a._texture_to_render;if(g){var k=g._textureWidth,l=g._textureHeight,m=g._bitmapX,n=g._bitmapY,k=g._bitmapWidth||k,l=g._bitmapHeight||l,q=g._offsetX,g=g._offsetY;d.RenderFilter.getInstance().drawImage(b,a,m,n,k,l,q,g,c,e,f)}};a.drawScale9GridImage=function(b,a,c,e,f){var g=d.MainContext.instance.rendererContext._texture_scale_factor,
k=a._texture_to_render;if(k&&c){var l=k._textureWidth,m=k._textureHeight,n=k._bitmapX,q=k._bitmapY,r=k._bitmapWidth||l,s=k._bitmapHeight||m;e-=l-r;f-=m-s;if(!b.drawImageScale9(k,n,q,r,s,k._offsetX,k._offsetY,e,f,c)){l=k._offsetX/g;m=k._offsetY/g;k=d.RenderFilter.getInstance();c=d.Rectangle.identity.initialize(c.x-Math.round(l),c.y-Math.round(l),c.width,c.height);l=Math.round(l);m=Math.round(m);c.y==c.bottom&&(c.bottom<s?c.bottom++:c.y--);c.x==c.right&&(c.right<r?c.right++:c.x--);var D=n+c.x/g,w=n+
c.right/g,y=r-c.right,v=q+c.y/g,g=q+c.bottom/g,A=s-c.bottom,x=l+c.x,z=m+c.y,s=f-(s-c.bottom),r=e-(r-c.right);k.drawImage(b,a,n,q,c.x,c.y,l,m,c.x,c.y);k.drawImage(b,a,D,q,c.width,c.y,x,m,r-c.x,c.y);k.drawImage(b,a,w,q,y,c.y,l+r,m,e-r,c.y);k.drawImage(b,a,n,v,c.x,c.height,l,z,c.x,s-c.y);k.drawImage(b,a,D,v,c.width,c.height,x,z,r-c.x,s-c.y);k.drawImage(b,a,w,v,y,c.height,l+r,z,e-r,s-c.y);k.drawImage(b,a,n,g,c.x,A,l,m+s,c.x,f-s);k.drawImage(b,a,D,g,c.width,A,x,m+s,r-c.x,f-s);k.drawImage(b,a,w,g,y,A,l+
r,m+s,e-r,f-s)}}};c._measureBounds=function(){var b=this._texture;return b?d.Rectangle.identity.initialize(0,0,b._textureWidth,b._textureHeight):e.prototype._measureBounds.call(this)};a.renderFilter=d.RenderFilter.getInstance();return a}(d.DisplayObject);d.Bitmap=f;f.prototype.__class__="egret.Bitmap"})(egret||(egret={}));
(function(d){var f=function(e){function a(){e.call(this);this._text="";this._textChanged=!1;this._font=null;this._fontChanged=!1;this._textOffsetY=this._textOffsetX=this._textHeight=this._textWidth=this._lineSpacing=this._letterSpacing=0;this.textLinesChange=!0;this._lineHeights=[];this.needDraw=this.cacheAsBitmap=!0}__extends(a,e);var c=a.prototype;Object.defineProperty(c,"text",{get:function(){return this._text},set:function(b){this.$setText(b)},enumerable:!0,configurable:!0});c.$setText=function(b){this._text!=
b&&(this._textChanged=!0,this._text=b,this._setSizeDirty())};Object.defineProperty(c,"font",{get:function(){return this._font},set:function(b){this.$setFont(b)},enumerable:!0,configurable:!0});c.$setFont=function(b){this._font!=b&&(this._font=b,this._fontChanged=!0,this._setSizeDirty())};Object.defineProperty(c,"letterSpacing",{get:function(){return this._letterSpacing},set:function(b){this._setLetterSpacing(b)},enumerable:!0,configurable:!0});c._setLetterSpacing=function(b){this._letterSpacing=b;
this._setSizeDirty()};Object.defineProperty(c,"lineSpacing",{get:function(){return this._lineSpacing},set:function(b){this._setLineSpacing(b)},enumerable:!0,configurable:!0});c._setLineSpacing=function(b){this._lineSpacing=b};c._setSizeDirty=function(){e.prototype._setSizeDirty.call(this);this.textLinesChange=!0};c._render=function(b){var c=this._getTextLines(),e=c.length;if(0!=e){for(var f=this._font,p=f._getFirstCharHeight(),p=Math.ceil(p*a.EMPTY_FACTOR),g=0,k=this._DO_Props_._hasHeightSet?this._DO_Props_._explicitHeight:
Number.POSITIVE_INFINITY,l=this._lineHeights,m=0;m<e;m++){var n=l[m];if(0<m&&g+n>k)break;for(var q=c[m],r=q.length,s=0,D=0;D<r;D++){var w=q.charAt(D),y=f.getTexture(w);if(y){var w=y._bitmapWidth||y._textureWidth,v=y._bitmapHeight||y._textureHeight;this._texture_to_render=y;d.RenderFilter.getInstance().drawImage(b,this,y._bitmapX,y._bitmapY,w,v,s+y._offsetX,g+y._offsetY,w,v);s+=y._textureWidth+this._letterSpacing}else" "==w?s+=p:d.$warn(1011,w)}g+=n+this._lineSpacing}this._texture_to_render=null}};
c._measureBounds=function(){var b=this._getTextLines();return 0==b.length?d.Rectangle.identity.initialize(0,0,0,0):d.Rectangle.identity.initialize(this._textOffsetX,this._textOffsetY,this._textWidth-this._textOffsetX,this._textHeight-this._textOffsetY+(b.length-1)*this._lineSpacing)};c._getTextLines=function(){if(!this.textLinesChange)return this._textLines;var b=[];this._textLines=b;this.textLinesChange=!1;var c=[];this._lineHeights=c;if(!this._text||!this._font)return b;for(var e=0,f=0,p=0,g=0,
k=this._DO_Props_._hasWidthSet,l=this._DO_Props_._hasWidthSet?this._DO_Props_._explicitWidth:Number.POSITIVE_INFINITY,m=this._font,n=m._getFirstCharHeight(),q=Math.ceil(n*a.EMPTY_FACTOR),r=this._text.split(/(?:\r\n|\r|\n)/),s=r.length,D=!0,w=0;w<s;w++){for(var y=r[w],v=y.length,A=0,x=0,z=!0,B=0;B<v;B++){z||(x+=this._letterSpacing);var F=y.charAt(B),E,G=0,C=0,H=m.getTexture(F);if(H)F=H._textureWidth,E=H._textureHeight,G=H._offsetX,C=H._offsetY;else if(" "==F)F=q,E=n;else{d.$warn(1011,F);z&&(z=!1);
continue}z&&(z=!1,p=Math.min(G,p));D&&(g=Math.min(C,g));k&&0<B&&x+F>l?(b.push(y.substring(0,B)),c.push(A),f+=A,e=Math.max(x,e),y=y.substring(B),v=y.length,B=0,x=F,A=E):(x+=F,A=Math.max(E,A))}D&&(D=!1);b.push(y);c.push(A);f+=A;e=Math.max(x,e)}this._textWidth=e;this._textHeight=f;this._textOffsetX=p;this._textOffsetY=g;return b};a.EMPTY_FACTOR=0.33;return a}(d.DisplayObject);d.BitmapText=f;f.prototype.__class__="egret.BitmapText"})(egret||(egret={}));
(function(d){var f=function(){function d(){}d.LINEAR="linear";d.RADIAL="radial";return d}();d.GradientType=f;f.prototype.__class__="egret.GradientType"})(egret||(egret={}));
(function(d){var f=function(){function a(){this.fillStyle=this.strokeStyle=this.commandQueue=this._renderContext=null;this._dirty=!1;this.lineY=this.lineX=0;this._firstCheck=!0;this._lastY=this._lastX=this._maxY=this._maxX=this._minY=this._minX=0;this.commandQueue=[]}var c=a.prototype;c.beginFill=function(b,a){void 0===a&&(a=1);this.fillStyle=this._parseColor(b,a);this._pushCommand(new e(this._setStyle,this,[this.fillStyle]))};c._parseColor=function(b,a){return"rgba("+(b>>16)+","+((b&65280)>>8)+","+
(b&255)+","+a+")"};c._setStyle=function(b){d.Graphics._currentFillStyle=b;this._renderContext.fillStyle=b;this._renderContext.beginPath()};c.beginGradientFill=function(b,a,c,d,f){void 0===f&&(f=null);this.fillStyle=b=this.getGradient(b,a,c,d,f);this._pushCommand(new e(this._setStyle,this,[b]))};c.getGradient=function(b,a,c,e,f){var g=d.MainContext.instance.rendererContext,k=new d.Matrix;f?(k.a=819.2*f.a,k.b=819.2*f.b,k.c=819.2*f.c,k.d=819.2*f.d,k.tx=f.tx,k.ty=f.ty):(k.a=100,k.d=100);b=b==d.GradientType.LINEAR?
g.createLinearGradient(-1,0,1,0):g.createRadialGradient(0,0,0,0,0,1);f=a.length;for(g=0;g<f;g++)b.addColorStop(e[g]/255,this._parseColor(a[g],c[g]));b.matrix=k;return b};c.drawRect=function(b,a,c,d){this._pushCommand(new e(function(b,a,c,d){this._renderContext.beginPath();this._renderContext.rect(b,a,c,d);this._renderContext.closePath()},this,[b,a,c,d]));this._checkRect(b,a,c,d)};c.drawCircle=function(b,a,c){this._pushCommand(new e(function(b,a,c){this._renderContext.beginPath();this._renderContext.arc(b,
a,c,0,2*Math.PI);this._renderContext.closePath()},this,[b,a,c]));this._checkRect(b-c,a-c,2*c,2*c)};c.drawRoundRect=function(b,a,c,d,f,g){this._pushCommand(new e(function(b,a,c,d,h,e){h/=2;e=e?e/2:h;c=b+c;d=a+d;var f=d-e;this._renderContext.beginPath();this._renderContext.moveTo(c,f);this._renderContext.quadraticCurveTo(c,d,c-h,d);this._renderContext.lineTo(b+h,d);this._renderContext.quadraticCurveTo(b,d,b,d-e);this._renderContext.lineTo(b,a+e);this._renderContext.quadraticCurveTo(b,a,b+h,a);this._renderContext.lineTo(c-
h,a);this._renderContext.quadraticCurveTo(c,a,c,a+e);this._renderContext.lineTo(c,f);this._renderContext.closePath()},this,[b,a,c,d,f,g]));this._checkRect(b,a,c,d)};c.drawEllipse=function(b,a,c,d){this._pushCommand(new e(function(b,a,c,d){b+=c/2;a+=d/2;var h=c>d?c:d;c/=h;d/=h;h/=2;this._renderContext.scale(c,d);this._renderContext.beginPath();this._renderContext.arc(b/c,a/d,h,0,2*Math.PI);this._renderContext.closePath();this._renderContext.scale(1/c,1/d)},this,[b,a,c,d]));this._checkRect(b,a,c,d)};
c.lineStyle=function(b,a,c,d,f,g,k,l){void 0===b&&(b=NaN);void 0===a&&(a=0);void 0===c&&(c=1);void 0===d&&(d=!1);void 0===f&&(f="normal");void 0===g&&(g=null);void 0===k&&(k=null);void 0===l&&(l=3);this.strokeStyle&&(this._createEndLineCommand(),this._pushCommand(this._endLineCommand));this.strokeStyle=this._parseColor(a,c);this._pushCommand(new e(function(b,a){this._renderContext.lineWidth=b;this._renderContext.strokeStyle=a;this._renderContext.beginPath()},this,[b,this.strokeStyle]));this.moveTo(this.lineX,
this.lineY)};c.lineTo=function(b,a){this._pushCommand(new e(function(b,a){this._renderContext.lineTo(b,a)},this,[b,a]));this._checkPoint(this.lineX,this.lineY);this.lineX=b;this.lineY=a;this._checkPoint(b,a)};c.curveTo=function(b,a,c,d){this._pushCommand(new e(function(b,a,c,d){this._renderContext.quadraticCurveTo(b,a,c,d)},this,[b,a,c,d]));this._checkPoint(this.lineX,this.lineY);this.lineX=c;this.lineY=d;this._checkPoint(b,a);this._checkPoint(c,d)};c.cubicCurveTo=function(b,a,c,d,f,g){this._pushCommand(new e(function(b,
a,c,d,h,e){this._renderContext.bezierCurveTo(b,a,c,d,h,e)},this,[b,a,c,d,f,g]));this._checkPoint(this.lineX,this.lineY);this.lineX=f;this.lineY=g;this._checkPoint(b,a);this._checkPoint(c,d);this._checkPoint(f,g)};c.moveTo=function(b,a){this._pushCommand(new e(function(b,a){this._renderContext.moveTo(b,a)},this,[b,a]));this.lineX=b;this.lineY=a};c.clear=function(){this.lineY=this.lineX=this.commandQueue.length=0;this.fillStyle=this.strokeStyle=null;this._maxY=this._maxX=this._minY=this._minX=0;this._dirty=
this._firstCheck=!0};c.endFill=function(){null!=this.fillStyle&&(this._fill(),this.fillStyle=null)};c._beginDraw=function(b){};c._endDraw=function(b){};c._draw=function(b){var a=this.commandQueue.length;if(0!=a){this._beginDraw(b);for(var c=0;c<a;c++){var d=this.commandQueue[c];d.method.apply(d.thisObject,d.args)}this.fillStyle&&(this._createEndFillCommand(),d=this._endFillCommand,d.method.apply(d.thisObject,d.args));this.strokeStyle&&(this._createEndLineCommand(),d=this._endLineCommand,d.method.apply(d.thisObject,
d.args));this._endDraw(b);this._dirty=!1}};c._checkRect=function(b,a,c,d){this._firstCheck?(this._firstCheck=!1,this._minX=b,this._minY=a,this._maxX=b+c,this._maxY=a+d):(this._minX=Math.min(this._minX,b),this._minY=Math.min(this._minY,a),this._maxX=Math.max(this._maxX,b+c),this._maxY=Math.max(this._maxY,a+d));this._dirty=!0};c._checkPoint=function(b,a){this._firstCheck?(this._firstCheck=!1,this._minX=b,this._minY=a,this._maxX=b,this._maxY=a):(this._minX=Math.min(this._minX,b),this._minY=Math.min(this._minY,
a),this._maxX=Math.max(this._maxX,b),this._maxY=Math.max(this._maxY,a));this._lastX=b;this._lastY=a;this._dirty=!0};c._measureBounds=function(){return d.Rectangle.identity.initialize(this._minX,this._minY,this._maxX-this._minX,this._maxY-this._minY)};c._createEndFillCommand=function(){this._endFillCommand||(this._endFillCommand=new e(function(){this._renderContext.fill();this._renderContext.closePath()},this,null))};c._fill=function(){this.fillStyle&&(this._createEndFillCommand(),this._pushCommand(this._endFillCommand));
this.strokeStyle&&(this._createEndLineCommand(),this._pushCommand(this._endLineCommand))};c._createEndLineCommand=function(){this._endLineCommand||(this._endLineCommand=new e(function(){this._renderContext.stroke();this._renderContext.closePath()},this,null))};c._pushCommand=function(b){this.commandQueue.push(b);this._dirty=!0};return a}();d.Graphics=f;f.prototype.__class__="egret.Graphics";var e=function(){return function(a,c,b){this.method=a;this.thisObject=c;this.args=b}}();e.prototype.__class__=
"egret.Command"})(egret||(egret={}));
(function(d){var f=function(e){function a(){e.call(this);this._graphics=null}__extends(a,e);var c=a.prototype;Object.defineProperty(c,"graphics",{get:function(){this._graphics||(this._graphics=new d.Graphics,this.needDraw=!0);return this._graphics},enumerable:!0,configurable:!0});c._draw=function(b){this._graphics&&this._graphics._dirty&&this._setCacheDirty();e.prototype._draw.call(this,b)};c._render=function(b){this._graphics&&this._graphics._draw(b)};c._measureBounds=function(){var b=this._graphics;
return b?b._measureBounds():e.prototype._measureBounds.call(this)};return a}(d.DisplayObject);d.Shape=f;f.prototype.__class__="egret.Shape"})(egret||(egret={}));
(function(d){var f=function(e){function a(){e.call(this);this._graphics=null}__extends(a,e);var c=a.prototype;Object.defineProperty(c,"graphics",{get:function(){this._graphics||(this._graphics=new d.Graphics,this.needDraw=!0);return this._graphics},enumerable:!0,configurable:!0});c._draw=function(b){this._graphics&&this._graphics._dirty&&this._setCacheDirty();e.prototype._draw.call(this,b)};c._render=function(b){this._graphics&&this._graphics._draw(b);e.prototype._render.call(this,b)};c._measureBounds=
function(){for(var b=0,a=0,c=0,e=0,f=this._children.length,g=0;g<f;g++){var k=this._children[g];if(k.visible){var l=k.getBounds(d.Rectangle.identity,!1),m=l.x,n=l.y,q=l.width,l=l.height,k=k._getMatrix(),k=d.DisplayObject.getTransformBounds(d.Rectangle.identity.initialize(m,n,q,l),k),m=k.x,n=k.y,q=k.width+k.x,k=k.height+k.y;if(m<b||0==g)b=m;if(q>a||0==g)a=q;if(n<c||0==g)c=n;if(k>e||0==g)e=k}}if(this._graphics){f=this._graphics._measureBounds();m=f.x;n=f.y;q=f.width+f.x;k=f.height+f.y;if(m<b||0==g)b=
m;if(q>a||0==g)a=q;if(n<c||0==g)c=n;if(k>e||0==g)e=k}return d.Rectangle.identity.initialize(b,c,a-b,e-c)};c.hitTest=function(b,a,c){void 0===c&&(c=!1);var f=e.prototype.hitTest.call(this,b,a,c);return f?f:this._graphics?d.DisplayObject.prototype.hitTest.call(this,b,a,c):null};return a}(d.DisplayObjectContainer);d.Sprite=f;f.prototype.__class__="egret.Sprite"})(egret||(egret={}));
(function(d){var f=function(){function e(){}e._getStartLine=function(a){var c=e._getTextHeight(a),b=0;a._DO_Props_._hasHeightSet&&(!(c<a._DO_Props_._explicitHeight)&&c>a._DO_Props_._explicitHeight&&(b=Math.max(a._TF_Props_._scrollV-1,0),b=Math.min(a._TF_Props_._numLines-1,b)),a._TF_Props_._multiline||(b=Math.max(a._TF_Props_._scrollV-1,0),b=Math.min(a._TF_Props_._numLines-1,b)));return b};e._getHalign=function(a){var c=a._getLinesArr(),b=0;a._TF_Props_._textAlign==d.HorizontalAlign.CENTER?b=0.5:a._TF_Props_._textAlign==
d.HorizontalAlign.RIGHT&&(b=1);a._TF_Props_._type==d.TextFieldType.INPUT&&!a._TF_Props_._multiline&&1<c.length&&(b=0);return b};e._getTextHeight=function(a){return d.TextFieldType.INPUT!=a._TF_Props_._type||a._TF_Props_._multiline?a._TF_Props_._textMaxHeight+(a._TF_Props_._numLines-1)*a._TF_Props_._lineSpacing:a._TF_Props_._size};e._getValign=function(a){var c=e._getTextHeight(a);return a._DO_Props_._hasHeightSet&&c<a._DO_Props_._explicitHeight?(c=0,a._TF_Props_._verticalAlign==d.VerticalAlign.MIDDLE?
c=0.5:a._TF_Props_._verticalAlign==d.VerticalAlign.BOTTOM&&(c=1),c):0};e._getTextElement=function(a,c,b){c=e._getHit(a,c,b);a=a._getLinesArr();return c&&a[c.lineIndex]&&a[c.lineIndex].elements[c.textElementIndex]?a[c.lineIndex].elements[c.textElementIndex]:null};e._getHit=function(a,c,b){var d=a._getLinesArr();if(0==a._TF_Props_._textMaxWidth)return null;var f=0,u=e._getTextHeight(a),p=0;a._DO_Props_._hasHeightSet&&a._DO_Props_._explicitHeight>u&&(p=e._getValign(a)*(a._DO_Props_._explicitHeight-u),
0!=p&&(b-=p));p=0;for(u=e._getStartLine(a);u<d.length;u++){var g=d[u];if(p+g.height>=b){f=u+1;break}else p+=g.height;if(p+a._TF_Props_._lineSpacing>b)return null;p+=a._TF_Props_._lineSpacing}if(0===f)return null;a=d[f-1];for(u=b=0;u<a.elements.length;u++)if(d=a.elements[u],b+d.width<c)b+=d.width;else return{lineIndex:f-1,textElementIndex:u};return null};e._getScrollNum=function(a){var c=1;if(a._TF_Props_._multiline){var b=a.height,d=a.size;a=a.lineSpacing;c=Math.floor(b/(d+a));b-(d+a)*c>d/2&&c++}return c};
return e}();d.TextFieldUtils=f;f.prototype.__class__="egret.TextFieldUtils"})(egret||(egret={}));
(function(d){var f=function(){return function(){this._text=this._type="";this._displayAsPassword=!1;this._fontFamily=d.TextField.default_fontFamily;this._size=30;this._bold=this._italic=!1;this._textColorString="#FFFFFF";this._textColor=16777215;this._strokeColorString="#000000";this._stroke=this._strokeColor=0;this._border=!1;this._borderColor=0;this._background=!1;this._backgroundColor=16777215;this._textAlign="left";this._verticalAlign="top";this._maxChars=this._textMaxHeight=this._textMaxWidth=
0;this._scrollV=-1;this._numLines=this._lineSpacing=0;this._wordWrap=this._multiline=!1;this._restrictNot=this._restrictAnd=null}}();d.TextFieldProperties=f;f.prototype.__class__="egret.TextFieldProperties"})(egret||(egret={}));
(function(d){var f=function(e){function a(){e.call(this);this._inputEnabled=!1;this._bgGraphics=this._inputUtils=null;this._isFlow=!1;this._textArr=[];this._isArrayChanged=!1;this._linesArr=[];this._isTyping=!1;this.needDraw=!0;this._TF_Props_=new d.TextFieldProperties}__extends(a,e);var c=a.prototype;c.isInput=function(){return this._TF_Props_._type==d.TextFieldType.INPUT};c._setTouchEnabled=function(b){e.prototype._setTouchEnabled.call(this,b);this.isInput()&&(this._inputEnabled=!0)};Object.defineProperty(c,
"type",{get:function(){return this._TF_Props_._type},set:function(b){this._setType(b)},enumerable:!0,configurable:!0});c._setType=function(b){var a=this._TF_Props_;a._type!=b&&(a._type=b,a._type==d.TextFieldType.INPUT?(this._DO_Props_._hasWidthSet||this._setWidth(100),this._DO_Props_._hasHeightSet||this._setHeight(30),null==this._inputUtils&&(this._inputUtils=new d.InputController),this._inputUtils.init(this),this._setDirty(),this._DO_Props_._stage&&this._inputUtils._addStageText()):this._inputUtils&&
(this._inputUtils._removeStageText(),this._inputUtils=null))};Object.defineProperty(c,"text",{get:function(){return this._getText()},set:function(b){this._setText(b)},enumerable:!0,configurable:!0});c._getText=function(){return this._TF_Props_._type==d.TextFieldType.INPUT?this._inputUtils._getText():this._TF_Props_._text};c._setSizeDirty=function(){e.prototype._setSizeDirty.call(this);this._isArrayChanged=!0};c._setTextDirty=function(){this._setSizeDirty()};c._setBaseText=function(b){null==b&&(b=
"");var a=this._TF_Props_;b=b.toString();this._isFlow=!1;a._text!=b&&(this._setTextDirty(),a._text=b,b="",b=a._displayAsPassword?this.changeToPassText(a._text):a._text,this.setMiddleStyle([{text:b}]))};c._setText=function(b){null==b&&(b="");this._setBaseText(b);this._inputUtils&&this._inputUtils._setText(this._TF_Props_._text)};Object.defineProperty(c,"displayAsPassword",{get:function(){return this._TF_Props_._displayAsPassword},set:function(b){this._setDisplayAsPassword(b)},enumerable:!0,configurable:!0});
c._setDisplayAsPassword=function(b){var a=this._TF_Props_;a._displayAsPassword!=b&&(a._displayAsPassword=b,this._setTextDirty(),b="",b=a._displayAsPassword?this.changeToPassText(a._text):a._text,this.setMiddleStyle([{text:b}]))};Object.defineProperty(c,"fontFamily",{get:function(){return this._TF_Props_._fontFamily},set:function(b){this._setFontFamily(b)},enumerable:!0,configurable:!0});c._setFontFamily=function(b){this._TF_Props_._fontFamily!=b&&(this._setTextDirty(),this._TF_Props_._fontFamily=
b)};Object.defineProperty(c,"size",{get:function(){return this._TF_Props_._size},set:function(b){this._setSize(b)},enumerable:!0,configurable:!0});c._setSize=function(b){this._TF_Props_._size!=b&&(this._setTextDirty(),this._TF_Props_._size=b)};Object.defineProperty(c,"italic",{get:function(){return this._TF_Props_._italic},set:function(b){this._setItalic(b)},enumerable:!0,configurable:!0});c._setItalic=function(b){this._TF_Props_._italic!=b&&(this._setTextDirty(),this._TF_Props_._italic=b)};Object.defineProperty(c,
"bold",{get:function(){return this._TF_Props_._bold},set:function(b){this._setBold(b)},enumerable:!0,configurable:!0});c._setBold=function(b){this._TF_Props_._bold!=b&&(this._setTextDirty(),this._TF_Props_._bold=b)};Object.defineProperty(c,"textColor",{get:function(){return this._TF_Props_._textColor},set:function(b){this._setTextColor(b)},enumerable:!0,configurable:!0});c._setTextColor=function(b){this._TF_Props_._textColor!=b&&(this._setTextDirty(),this._TF_Props_._textColor=b,this._TF_Props_._textColorString=
d.toColorString(b))};Object.defineProperty(c,"strokeColor",{get:function(){return this._TF_Props_._strokeColor},set:function(b){this._setStrokeColor(b)},enumerable:!0,configurable:!0});c._setStrokeColor=function(b){this._TF_Props_._strokeColor!=b&&(this._setTextDirty(),this._TF_Props_._strokeColor=b,this._TF_Props_._strokeColorString=d.toColorString(b))};Object.defineProperty(c,"stroke",{get:function(){return this._TF_Props_._stroke},set:function(b){this._setStroke(b)},enumerable:!0,configurable:!0});
c._setStroke=function(b){this._TF_Props_._stroke!=b&&(this._setTextDirty(),this._TF_Props_._stroke=b)};Object.defineProperty(c,"textAlign",{get:function(){return this._TF_Props_._textAlign},set:function(b){this._setTextAlign(b)},enumerable:!0,configurable:!0});c._setTextAlign=function(b){this._TF_Props_._textAlign!=b&&(this._setTextDirty(),this._TF_Props_._textAlign=b)};Object.defineProperty(c,"verticalAlign",{get:function(){return this._TF_Props_._verticalAlign},set:function(b){this._setVerticalAlign(b)},
enumerable:!0,configurable:!0});c._setVerticalAlign=function(b){this._TF_Props_._verticalAlign!=b&&(this._setTextDirty(),this._TF_Props_._verticalAlign=b)};Object.defineProperty(c,"maxChars",{get:function(){return this._TF_Props_._maxChars},set:function(b){this._setMaxChars(b)},enumerable:!0,configurable:!0});c._setMaxChars=function(b){this._TF_Props_._maxChars!=b&&(this._TF_Props_._maxChars=b)};Object.defineProperty(c,"scrollV",{get:function(){return Math.min(Math.max(this._TF_Props_._scrollV,1),
this.maxScrollV)},set:function(b){this._TF_Props_._scrollV=Math.max(b,1);this._setDirty()},enumerable:!0,configurable:!0});Object.defineProperty(c,"maxScrollV",{get:function(){this._getLinesArr();return Math.max(this._TF_Props_._numLines-d.TextFieldUtils._getScrollNum(this)+1,1)},enumerable:!0,configurable:!0});Object.defineProperty(c,"selectionBeginIndex",{get:function(){return 0},enumerable:!0,configurable:!0});Object.defineProperty(c,"selectionEndIndex",{get:function(){return 0},enumerable:!0,
configurable:!0});Object.defineProperty(c,"caretIndex",{get:function(){return 0},enumerable:!0,configurable:!0});c._setSelection=function(b,a){};Object.defineProperty(c,"lineSpacing",{get:function(){return this._TF_Props_._lineSpacing},set:function(b){this._setLineSpacing(b)},enumerable:!0,configurable:!0});c._setLineSpacing=function(b){this._TF_Props_._lineSpacing!=b&&(this._setTextDirty(),this._TF_Props_._lineSpacing=b)};c._getLineHeight=function(){return this._TF_Props_._lineSpacing+this._TF_Props_._size};
Object.defineProperty(c,"numLines",{get:function(){return this._TF_Props_._numLines},enumerable:!0,configurable:!0});Object.defineProperty(c,"multiline",{get:function(){return this._TF_Props_._multiline},set:function(b){this._setMultiline(b)},enumerable:!0,configurable:!0});c._setMultiline=function(b){this._TF_Props_._multiline=b;this._setDirty()};Object.defineProperty(c,"restrict",{get:function(){var b=this._TF_Props_,a=null;null!=b._restrictAnd&&(a=b._restrictAnd);null!=b._restrictNot&&(null==a&&
(a=""),a+="^"+b._restrictNot);return a},set:function(b){var a=this._TF_Props_;if(null==b)a._restrictAnd=null,a._restrictNot=null;else{for(var c=-1;c<b.length&&(c=b.indexOf("^",c),0!=c);)if(0<c){if("\\"!=b.charAt(c-1))break;c++}else break;0==c?(a._restrictAnd=null,a._restrictNot=b.substring(c+1)):0<c?(a._restrictAnd=b.substring(0,c),a._restrictNot=b.substring(c+1)):(a._restrictAnd=b,a._restrictNot=null)}},enumerable:!0,configurable:!0});c._setWidth=function(b){e.prototype._setWidth.call(this,b)};c._setHeight=
function(b){e.prototype._setHeight.call(this,b)};Object.defineProperty(c,"border",{get:function(){return this._TF_Props_._border},set:function(b){this._TF_Props_._border=b;this.fillBackground()},enumerable:!0,configurable:!0});Object.defineProperty(c,"borderColor",{get:function(){return this._TF_Props_._borderColor},set:function(b){this._TF_Props_._borderColor=b;this.fillBackground()},enumerable:!0,configurable:!0});Object.defineProperty(c,"background",{get:function(){return this._TF_Props_._background},
set:function(b){this._TF_Props_._background=b;this.fillBackground()},enumerable:!0,configurable:!0});Object.defineProperty(c,"backgroundColor",{get:function(){return this._TF_Props_._backgroundColor},set:function(b){this._TF_Props_._backgroundColor=b;this.fillBackground()},enumerable:!0,configurable:!0});c.fillBackground=function(){var b=this._bgGraphics,a=this._TF_Props_;b&&b.clear();if(a._background||a._border)null==b&&(b=this._bgGraphics=new d.Graphics),a._background&&b.beginFill(a._backgroundColor,
1),a._border&&b.lineStyle(1,a._borderColor),b.drawRect(0,0,this._getWidth(),this._getHeight()),b.endFill()};c.setFocus=function(){d.$warn(1013)};c._onRemoveFromStage=function(){e.prototype._onRemoveFromStage.call(this);this._removeEvent();this._TF_Props_._type==d.TextFieldType.INPUT&&this._inputUtils._removeStageText()};c._onAddToStage=function(){e.prototype._onAddToStage.call(this);this._addEvent();this._TF_Props_._type==d.TextFieldType.INPUT&&this._inputUtils._addStageText()};c._updateBaseTransform=
function(){this._getLinesArr();0==this._TF_Props_._textMaxWidth&&this._TF_Props_._type!=d.TextFieldType.INPUT||e.prototype._updateTransform.call(this)};c._updateTransform=function(){this._TF_Props_._type==d.TextFieldType.INPUT?this._DO_Props_._normalDirty?this._inputUtils._updateProperties():this._inputUtils._updateTransform():this._updateBaseTransform()};c._draw=function(b){e.prototype._draw.call(this,b)};c._render=function(b){this._bgGraphics&&this._bgGraphics._draw(b);var a=this._TF_Props_;if(a._type==
d.TextFieldType.INPUT){if(this._isTyping)return}else if(0==a._textMaxWidth)return;this.drawText(b);this._clearDirty()};c._measureBounds=function(){var b=this._TF_Props_;this._getLinesArr();return 0==b._textMaxWidth?d.Rectangle.identity.initialize(0,0,0,0):d.Rectangle.identity.initialize(0,0,b._textMaxWidth,d.TextFieldUtils._getTextHeight(this))};Object.defineProperty(c,"textFlow",{get:function(){return this._textArr},set:function(b){var a=this._TF_Props_;this._isFlow=!0;var c="";null==b&&(b=[]);for(var d=
0;d<b.length;d++)c+=b[d].text;a._displayAsPassword?this._setBaseText(c):(a._text=c,this.setMiddleStyle(b))},enumerable:!0,configurable:!0});c.changeToPassText=function(b){if(this._TF_Props_._displayAsPassword){for(var a="",c=0,d=b.length;c<d;c++)switch(b.charAt(c)){case "\n":a+="\n";break;case "\r":break;default:a+="*"}return a}return b};c.setMiddleStyle=function(b){this._isArrayChanged=!0;this._textArr=b;this._setSizeDirty()};Object.defineProperty(c,"textWidth",{get:function(){return this._TF_Props_._textMaxWidth},
enumerable:!0,configurable:!0});Object.defineProperty(c,"textHeight",{get:function(){return d.TextFieldUtils._getTextHeight(this)},enumerable:!0,configurable:!0});c.appendText=function(b){this.appendElement({text:b})};c.appendElement=function(b){var a=this._TF_Props_,c=a._text+b.text;a._displayAsPassword?this._setBaseText(c):(a._text=c,this._textArr.push(b),this.setMiddleStyle(this._textArr))};c._getLinesArr=function(){var b=this._TF_Props_;if(!this._isArrayChanged)return this._linesArr;this._isArrayChanged=
!1;var a=this._textArr,c=d.MainContext.instance.rendererContext;this._linesArr.length=0;b._textMaxHeight=0;b._textMaxWidth=0;if(this._DO_Props_._hasWidthSet&&0==this._DO_Props_._explicitWidth)return b._numLines=0,[{width:0,height:0,charNum:0,elements:[],hasNextLine:!1}];this._isFlow||c.setupFont(this);for(var e=this._linesArr,f=0,g=0,k=0,l=0,m,n=0,q=a.length;n<q;n++){var r=a[n];r.style=r.style||{};for(var s=r.text.toString().split(/(?:\r\n|\r|\n)/),D=0,w=s.length;D<w;D++){null==e[l]&&(m={width:0,
height:0,elements:[],charNum:0,hasNextLine:!1},e[l]=m,g=k=f=0);var k=b._type==d.TextFieldType.INPUT?b._size:Math.max(k,r.style.size||b._size),y=!0;if(""==s[D])D==w-1&&(y=!1);else{this._isFlow&&c.setupFont(this,r.style);var v=c.measureText(s[D]);if(this._DO_Props_._hasWidthSet)if(f+v<=this._DO_Props_._explicitWidth)m.elements.push({width:v,text:s[D],style:r.style}),f+=v,g+=s[D].length,D==w-1&&(y=!1);else{for(var A=0,x=0,z=s[D],B=this._TF_Props_._wordWrap?z.split(/\b/):z.match(/./g),F=B.length,E=0;A<
F;A++){v=c.measureText(B[A]);if(0!=f&&f+v>this._DO_Props_._explicitWidth&&0!=f+A)break;E+=B[A].length;x+=v;f+=v;g+=E}if(0<A){m.elements.push({width:x,text:z.substring(0,E),style:r.style});v=z.substring(E);A=0;for(x=v.length;A<x&&" "==v.charAt(A);A++);s[D]=v.substring(A)}""!=s[D]&&(D--,y=!1)}else f+=v,g+=s[D].length,m.elements.push({width:v,text:s[D],style:r.style}),D==w-1&&(y=!1)}y&&(g++,m.hasNextLine=!0);D<s.length-1&&(m.width=f,m.height=k,m.charNum=g,b._textMaxWidth=Math.max(b._textMaxWidth,f),
b._textMaxHeight+=k,l++)}n==a.length-1&&m&&(m.width=f,m.height=k,m.charNum=g,b._textMaxWidth=Math.max(b._textMaxWidth,f),b._textMaxHeight+=k)}b._numLines=e.length;this.fillBackground();return e};Object.defineProperty(c,"wordWrap",{get:function(){return this._TF_Props_._wordWrap},set:function(b){this._TF_Props_._wordWrap=b},enumerable:!0,configurable:!0});c.drawText=function(b){var a=this._TF_Props_,c=this._getLinesArr();if(0!=a._textMaxWidth){var e=this._DO_Props_._hasWidthSet?this._DO_Props_._explicitWidth:
a._textMaxWidth,f=d.TextFieldUtils._getTextHeight(this),g=0,k=d.TextFieldUtils._getStartLine(this);if(this._DO_Props_._hasHeightSet&&this._DO_Props_._explicitHeight>f)var l=d.TextFieldUtils._getValign(this),g=g+l*(this._DO_Props_._explicitHeight-f);for(var g=Math.round(g),f=d.TextFieldUtils._getHalign(this),l=0,m=k,n=a._numLines;m<n;m++){var q=c[m],r=q.height,g=g+r/2;if(m!=k){if(a._type==d.TextFieldType.INPUT&&!a._multiline)break;if(this._DO_Props_._hasHeightSet&&g>this._DO_Props_._explicitHeight)break}for(var l=
Math.round((e-q.width)*f),s=0,D=q.elements.length;s<D;s++){var w=q.elements[s];b.drawText(this,w.text,l,g+(r-(w.style.size||a._size))/2,w.width,w.style);l+=w.width}g+=r/2+a._lineSpacing}}};c._addEvent=function(){this.addEventListener(d.TouchEvent.TOUCH_TAP,this.onTapHandler,this)};c._removeEvent=function(){this.removeEventListener(d.TouchEvent.TOUCH_TAP,this.onTapHandler,this)};c.onTapHandler=function(b){if(this._TF_Props_._type!=d.TextFieldType.INPUT&&(b=d.TextFieldUtils._getTextElement(this,b.localX,
b.localY),null!=b&&(b=b.style)&&b.href&&b.href.match(/^event:/))){var a=b.href.match(/^event:/)[0];d.TextEvent.dispatchTextEvent(this,d.TextEvent.LINK,b.href.substring(a.length))}};a.default_fontFamily="Arial";return a}(d.DisplayObject);d.TextField=f;f.prototype.__class__="egret.TextField"})(egret||(egret={}));
(function(d){var f=function(){function d(){this._replaceArr=[];this.resutlArr=[];this.initReplaceArr()}var a=d.prototype;a.initReplaceArr=function(){this._replaceArr=[];this._replaceArr.push([/&lt;/g,"<"]);this._replaceArr.push([/&gt;/g,">"]);this._replaceArr.push([/&amp;/g,"&"]);this._replaceArr.push([/&quot;/g,'"']);this._replaceArr.push([/&apos;/g,"'"])};a.replaceSpecial=function(a){for(var b=0;b<this._replaceArr.length;b++)a=a.replace(this._replaceArr[b][0],this._replaceArr[b][1]);return a};a.parser=
function(a){this.stackArray=[];this.resutlArr=[];for(var b=0,d=a.length;b<d;){var e=a.indexOf("<",b);0>e?(this.addToResultArr(a.substring(b)),b=d):(this.addToResultArr(a.substring(b,e)),b=a.indexOf(">",e),"/"==a.charAt(e+1)?this.stackArray.pop():this.addToArray(a.substring(e+1,b)),b+=1)}return this.resutlArr};a.addToResultArr=function(a){""!=a&&(a=this.replaceSpecial(a),0<this.stackArray.length?this.resutlArr.push({text:a,style:this.stackArray[this.stackArray.length-1]}):this.resutlArr.push({text:a}))};
a.changeStringToObject=function(a){a=a.trim();var b={},d=[];if("i"==a.charAt(0)||"b"==a.charAt(0))this.addProperty(b,a,"true");else if(d=a.match(/^(font|a)\s/))for(a=a.substring(d[0].length).trim(),d=0;d=a.match(this.getHeadReg());){var e=d[0],f="";a=a.substring(e.length).trim();'"'==a.charAt(0)?(d=a.indexOf('"',1),f=a.substring(1,d),d+=1):"'"==a.charAt(0)?(d=a.indexOf("'",1),f=a.substring(1,d),d+=1):(f=a.match(/(\S)+/)[0],d=f.length);this.addProperty(b,e.substring(0,e.length-1).trim(),f.trim());
a=a.substring(d).trim()}return b};a.getHeadReg=function(){return/^(color|textcolor|strokecolor|stroke|b|bold|i|italic|size|fontfamily|href)(\s)*=/};a.addProperty=function(a,b,d){switch(b.toLowerCase()){case "color":case "textcolor":d=d.replace(/#/,"0x");a.textColor=parseInt(d);break;case "strokecolor":d=d.replace(/#/,"0x");a.strokeColor=parseInt(d);break;case "stroke":a.stroke=parseInt(d);break;case "b":case "bold":a.bold="true"==d;break;case "i":case "italic":a.italic="true"==d;break;case "size":a.size=
parseInt(d);break;case "fontfamily":a.fontFamily=d;break;case "href":a.href=this.replaceSpecial(d)}};a.addToArray=function(a){a=this.changeStringToObject(a);if(0!=this.stackArray.length){var b=this.stackArray[this.stackArray.length-1],d;for(d in b)null==a[d]&&(a[d]=b[d])}this.stackArray.push(a)};return d}();d.HtmlTextParser=f;f.prototype.__class__="egret.HtmlTextParser"})(egret||(egret={}));
(function(d){var f=function(){function d(){}d.DYNAMIC="dynamic";d.INPUT="input";return d}();d.TextFieldType=f;f.prototype.__class__="egret.TextFieldType"})(egret||(egret={}));
(function(d){var f=function(e){function a(b){e.call(this);this._bitmapY=this._bitmapX=this._sourceHeight=this._sourceWidth=0;this._textureMap={};this.texture=b;this._sourceWidth=b._sourceWidth;this._sourceHeight=b._sourceHeight;this._bitmapX=b._bitmapX-b._offsetX;this._bitmapY=b._bitmapY-b._offsetY}__extends(a,e);var c=a.prototype;c.getTexture=function(b){return this._textureMap[b]};c.createTexture=function(b,a,c,e,f,g,k,l,m){void 0===g&&(g=0);void 0===k&&(k=0);"undefined"===typeof l&&(l=g+e);"undefined"===
typeof m&&(m=k+f);var n=this.texture._clone(),q=d.MainContext.instance.rendererContext._texture_scale_factor;n._bitmapX=this._bitmapX+a;n._bitmapY=this._bitmapY+c;n._bitmapWidth=e*q;n._bitmapHeight=f*q;n._offsetX=g;n._offsetY=k;n._textureWidth=l*q;n._textureHeight=m*q;n._sourceWidth=this._sourceWidth;n._sourceHeight=this._sourceHeight;return this._textureMap[b]=n};c.dispose=function(){this.texture&&this.texture.dispose()};return a}(d.HashObject);d.SpriteSheet=f;f.prototype.__class__="egret.SpriteSheet"})(egret||
(egret={}));
(function(d){var f=function(e){function a(){e.call(this);this._text=null;this._isFocus=!1}__extends(a,e);var c=a.prototype;c.init=function(b){this._text=b;this.stageText=d.StageText.create();this.stageText._setTextField(this._text)};c._addStageText=function(){this._text._inputEnabled||(this._text._DO_Props_._touchEnabled=!0);this.stageText._add();this.stageText._addListeners();this.stageText.addEventListener("updateText",this.updateTextHandler,this);this._text.addEventListener(d.TouchEvent.TOUCH_BEGIN,this.onMouseDownHandler,
this);d.MainContext.instance.stage.addEventListener(d.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this);this.stageText.addEventListener("blur",this.blurHandler,this);this.stageText.addEventListener("focus",this.focusHandler,this)};c._removeStageText=function(){this._text._inputEnabled||(this._text._DO_Props_._touchEnabled=!1);this.stageText._remove();this.stageText._removeListeners();this.stageText._removeInput();this.stageText.removeEventListener("updateText",this.updateTextHandler,this);this._text.removeEventListener(d.TouchEvent.TOUCH_BEGIN,
this.onMouseDownHandler,this);d.MainContext.instance.stage.removeEventListener(d.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this);this.stageText.removeEventListener("blur",this.blurHandler,this);this.stageText.removeEventListener("focus",this.focusHandler,this)};c._getText=function(){return this.stageText._getText()};c._setText=function(b){this.stageText._setText(b)};c.focusHandler=function(b){this._isFocus||(this._isFocus=!0,b.showing||(this._text._isTyping=!0),this._text.dispatchEvent(new d.FocusEvent(d.FocusEvent.FOCUS_IN,
!0)))};c.blurHandler=function(b){this._isFocus&&(this._isFocus=!1,this._text._isTyping=!1,this.stageText.$onBlur(),this._text.dispatchEvent(new d.FocusEvent(d.FocusEvent.FOCUS_OUT,!0)))};c.onMouseDownHandler=function(b){b.stopPropagation();this._text._DO_Props_._visible&&!this._isFocus&&(this.stageText._show(this._text._TF_Props_._multiline,this._text.size,this._text.width,this._text.height),b=this._text.localToGlobal(),this.stageText._initElement(b.x,b.y,this._text._worldTransform.a,this._text._worldTransform.d))};
c.onStageDownHandler=function(b){this.stageText._hide()};c.updateTextHandler=function(b){b=this._text._TF_Props_;var a=this.stageText._getText(),c=!1;null!=b._restrictAnd&&(c=new RegExp("["+b._restrictAnd+"]","g"),a=(a=a.match(c))?a.join(""):"",c=!0);null!=b._restrictNot&&(c=new RegExp("[^"+b._restrictNot+"]","g"),a=(a=a.match(c))?a.join(""):"",c=!0);c&&this.stageText._setText(a);this.resetText();this._text.dispatchEvent(new d.Event(d.Event.CHANGE,!0))};c.resetText=function(){this._text._setBaseText(this.stageText._getText())};
c._hideInput=function(){this.stageText._removeInput()};c._updateTransform=function(){this._text._updateBaseTransform();!this._text._DO_Props_._visible&&this.stageText&&this._hideInput()};c._updateProperties=function(){if(!this._isFocus){var b=this._text._DO_Props_._stage;if(null==b)this.stageText._setVisible(!1);else{for(var a=this._text,c=a._DO_Props_._visible;c;){a=a.parent;if(a==b)break;c=a._DO_Props_._visible}this.stageText._setVisible(c)}this.stageText._setMultiline(this._text._TF_Props_._multiline);
this.stageText._setTextType(this._text._TF_Props_._displayAsPassword?"password":"text");this.stageText._setText(this._text._TF_Props_._text);this.stageText._resetStageText()}this._updateTransform()};return a}(d.HashObject);d.InputController=f;f.prototype.__class__="egret.InputController"})(egret||(egret={}));
(function(d){var f=function(d){function a(b,a){d.call(this,b);this.firstCharHeight=0;"string"==typeof a?this.charList=this.parseConfig(a):a&&a.hasOwnProperty("frames")?this.charList=a.frames:this.charList={}}__extends(a,d);var c=a.prototype;c.getTexture=function(b){var a=this._textureMap[b];if(!a){a=this.charList[b];if(!a)return null;a=this.createTexture(b,a.x,a.y,a.w,a.h,a.offX,a.offY,a.sourceW,a.sourceH);this._textureMap[b]=a}return a};c._getFirstCharHeight=function(){if(0==this.firstCharHeight)for(var b in this.charList){var a=
this.charList[b];if(a){var c=a.sourceH;void 0===c&&(c=a.h,void 0===c&&(c=0),a=a.offY,void 0===a&&(a=0),c+=a);if(!(0>=c)){this.firstCharHeight=c;break}}}return this.firstCharHeight};c.parseConfig=function(b){b=b.split("\r\n").join("\n");b=b.split("\n");for(var a=this.getConfigByKey(b[3],"count"),c={},d=4;d<4+a;d++){var e=b[d],f=String.fromCharCode(this.getConfigByKey(e,"id")),k={};c[f]=k;k.x=this.getConfigByKey(e,"x");k.y=this.getConfigByKey(e,"y");k.w=this.getConfigByKey(e,"width");k.h=this.getConfigByKey(e,
"height");k.offX=this.getConfigByKey(e,"xoffset");k.offY=this.getConfigByKey(e,"yoffset")}return c};c.getConfigByKey=function(b,a){for(var c=b.split(" "),d=0,e=c.length;d<e;d++){var f=c[d];if(a==f.substring(0,a.length))return c=f.substring(a.length+1),parseInt(c)}return 0};return a}(d.SpriteSheet);d.BitmapFont=f;f.prototype.__class__="egret.BitmapFont"})(egret||(egret={}));
(function(d){var f=function(e){function a(b){e.call(this);this._isAddedToStage=!1;this._frames=this._movieClipData=this._textureToRender=null;this._totalFrames=0;this._frameLabels=null;this._frameIntervalTime=0;this._eventPool=null;this._isPlaying=!1;this._isStopped=!0;this._passedTime=this._displayedKeyFrameNum=this._nextFrameNum=this._currentFrameNum=this._playTimes=0;this._setMovieClipData(b);this.needDraw=!0}__extends(a,e);var c=a.prototype;c._init=function(){this._reset();var b=this._movieClipData;
b&&b._isDataValid()&&(this._frames=b.frames,this._totalFrames=b.numFrames,this._frameLabels=b.labels,this._frameIntervalTime=1E3/b.frameRate,this._initFrame())};c._reset=function(){this._frames=null;this._playTimes=0;this._isPlaying=!1;this.setIsStopped(!0);this._currentFrameNum=0;this._nextFrameNum=1;this._passedTime=this._displayedKeyFrameNum=0;this._eventPool=[]};c._initFrame=function(){this._movieClipData._isTextureValid()&&(this._advanceFrame(),this._constructFrame())};c._render=function(b){var c=
this._textureToRender;if(this._texture_to_render=c){var d=Math.round(c._offsetX),e=Math.round(c._offsetY),f=c._bitmapWidth||c._textureWidth,g=c._bitmapHeight||c._textureHeight,k=Math.round(f),l=Math.round(g);a.renderFilter.drawImage(b,this,c._bitmapX,c._bitmapY,f,g,d,e,k,l)}};c._measureBounds=function(){var b=this._textureToRender;return b?d.Rectangle.identity.initialize(b._offsetX,b._offsetY,b._textureWidth,b._textureHeight):e.prototype._measureBounds.call(this)};c._onAddToStage=function(){e.prototype._onAddToStage.call(this);
this._isAddedToStage=!0;this._isPlaying&&1<this._totalFrames&&this.setIsStopped(!1)};c._onRemoveFromStage=function(){e.prototype._onRemoveFromStage.call(this);this._isAddedToStage=!1;this.setIsStopped(!0)};c._getFrameLabelByName=function(b,a){void 0===a&&(a=!1);a&&(b=b.toLowerCase());var c=this._frameLabels;if(c)for(var d=null,e=0;e<c.length;e++)if(d=c[e],a?d.name.toLowerCase()===b:d.name===b)return d;return null};c._getFrameLabelByFrame=function(b){var a=this._frameLabels;if(a)for(var c=null,d=0;d<
a.length;d++)if(c=a[d],c.frame===b)return c;return null};c._getFrameLabelForFrame=function(b){var a=null,c=null,d=this._frameLabels;if(d)for(var e=0;e<d.length;e++){c=d[e];if(c.frame>b)break;a=c}return a};c.play=function(b){void 0===b&&(b=0);this._isPlaying=!0;this.setPlayTimes(b);1<this._totalFrames&&this._isAddedToStage&&this.setIsStopped(!1)};c.stop=function(){this._isPlaying=!1;this.setIsStopped(!0)};c.prevFrame=function(){this.gotoAndStop(this._currentFrameNum-1)};c.nextFrame=function(){this.gotoAndStop(this._currentFrameNum+
1)};c.gotoAndPlay=function(b,a){void 0===a&&(a=0);(0===arguments.length||2<arguments.length)&&d.$error(1022,"MovieClip.gotoAndPlay()");this.play(a);this._gotoFrame(b)};c.gotoAndStop=function(b){1!=arguments.length&&d.$error(1022,"MovieClip.gotoAndStop()");this.stop();this._gotoFrame(b)};c._gotoFrame=function(b){var a;"string"===typeof b?a=this._getFrameLabelByName(b).frame:(a=parseInt(b+"",10),a!=b&&d.$error(1022,"Frame Label Not Found"));1>a?a=1:a>this._totalFrames&&(a=this._totalFrames);a!==this._nextFrameNum&&
(this._nextFrameNum=a,this._advanceFrame(),this._constructFrame(),this._handlePendingEvent())};c._advanceTime=function(b){var a=this._frameIntervalTime;b=this._passedTime+b;this._passedTime=b%a;a=b/a;if(!(1>a)){for(;1<=a;){a--;this._nextFrameNum++;if(this._nextFrameNum>this._totalFrames)if(-1==this._playTimes)this._eventPool.push(d.Event.LOOP_COMPLETE),this._nextFrameNum=1;else if(this._playTimes--,0<this._playTimes)this._eventPool.push(d.Event.LOOP_COMPLETE),this._nextFrameNum=1;else{this._nextFrameNum=
this._totalFrames;this._eventPool.push(d.Event.COMPLETE);this.stop();break}this._advanceFrame()}this._constructFrame();this._handlePendingEvent();this._setDirty()}};c._advanceFrame=function(){this._currentFrameNum=this._nextFrameNum};c._constructFrame=function(){var b=this._currentFrameNum;this._displayedKeyFrameNum!=b&&(this._textureToRender=this._movieClipData.getTextureByFrame(b),this._DO_Props_._sizeDirty=!0,this._displayedKeyFrameNum=b)};c._handlePendingEvent=function(){if(0!=this._eventPool.length){this._eventPool.reverse();
for(var b=this._eventPool,a=b.length,c=!1,e=!1,f=0;f<a;f++){var g=b.pop();g==d.Event.LOOP_COMPLETE?e=!0:g==d.Event.COMPLETE?c=!0:this.dispatchEventWith(g)}e&&this.dispatchEventWith(d.Event.LOOP_COMPLETE);c&&this.dispatchEventWith(d.Event.COMPLETE)}};Object.defineProperty(c,"totalFrames",{get:function(){return this._totalFrames},enumerable:!0,configurable:!0});Object.defineProperty(c,"currentFrame",{get:function(){return this._currentFrameNum},enumerable:!0,configurable:!0});Object.defineProperty(c,
"currentFrameLabel",{get:function(){var b=this._getFrameLabelByFrame(this._currentFrameNum);return b&&b.name},enumerable:!0,configurable:!0});Object.defineProperty(c,"currentLabel",{get:function(){var b=this._getFrameLabelForFrame(this._currentFrameNum);return b?b.name:null},enumerable:!0,configurable:!0});Object.defineProperty(c,"frameRate",{get:function(){return this.movieClipData.frameRate},set:function(b){b!=this._movieClipData.frameRate&&(this._movieClipData.frameRate=b,this._frameIntervalTime=
1E3/this._movieClipData.frameRate)},enumerable:!0,configurable:!0});Object.defineProperty(c,"isPlaying",{get:function(){return this._isPlaying},enumerable:!0,configurable:!0});Object.defineProperty(c,"movieClipData",{get:function(){return this._movieClipData},set:function(b){this._setMovieClipData(b)},enumerable:!0,configurable:!0});c._setMovieClipData=function(b){this._movieClipData!=b&&(this._movieClipData=b,this._init())};c.setPlayTimes=function(b){if(0>b||1<=b)this._playTimes=0>b?-1:Math.floor(b)};
c.setIsStopped=function(b){this._isStopped!=b&&((this._isStopped=b)?(this._playTimes=0,d.Ticker.getInstance().unregister(this._advanceTime,this)):(this._playTimes=0==this._playTimes?1:this._playTimes,d.Ticker.getInstance().register(this._advanceTime,this)))};a.renderFilter=d.RenderFilter.getInstance();return a}(d.DisplayObject);d.MovieClip=f;f.prototype.__class__="egret.MovieClip"})(egret||(egret={}));
(function(d){var f=function(d){function a(b,a){d.call(this);this._name=b;this._frame=a|0}__extends(a,d);var c=a.prototype;Object.defineProperty(c,"name",{get:function(){return this._name},enumerable:!0,configurable:!0});Object.defineProperty(c,"frame",{get:function(){return this._frame},enumerable:!0,configurable:!0});c.clone=function(){return new a(this._name,this._frame)};return a}(d.EventDispatcher);d.FrameLabel=f;f.prototype.__class__="egret.FrameLabel"})(egret||(egret={}));
(function(d){var f=function(e){function a(){e.call(this);this._mcData=null;this.numFrames=1;this.frames=[];this.labels=null;this.frameRate=0;this.spriteSheet=this.textureData=null}__extends(a,e);var c=a.prototype;c._init=function(b,a,c){this.textureData=a;this.spriteSheet=c;this._setMCData(b)};c.getKeyFrameData=function(b){b=this.frames[b-1];b.frame&&(b=this.frames[b.frame-1]);return b};c.getTextureByFrame=function(b){b=this.getKeyFrameData(b);if(b.res){var a=this.getTextureByResName(b.res);a._offsetX=
b.x|0;a._offsetY=b.y|0;return a}return null};c.getTextureByResName=function(b){var a=this.spriteSheet.getTexture(b);a||(a=this.textureData[b],a=this.spriteSheet.createTexture(b,a.x,a.y,a.w,a.h));return a};c._isDataValid=function(){return 0<this.frames.length};c._isTextureValid=function(){return null!=this.textureData&&null!=this.spriteSheet};c._fillMCData=function(b){this.frameRate=b.frameRate||24;this._fillFramesData(b.frames);this._fillFrameLabelsData(b.labels)};c._fillFramesData=function(b){for(var a=
this.frames,c=b?b.length:0,d,e=0;e<c;e++)if(d=b[e],a.push(d),d.duration){var f=parseInt(d.duration);if(1<f){d=a.length;for(var k=1;k<f;k++)a.push({frame:d})}}this.numFrames=a.length};c._fillFrameLabelsData=function(b){if(b){var a=b.length;if(0<a){this.labels=[];for(var c=0;c<a;c++){var e=b[c];this.labels.push(new d.FrameLabel(e.name,e.frame))}}}};Object.defineProperty(c,"mcData",{get:function(){return this._mcData},set:function(b){this._setMCData(b)},enumerable:!0,configurable:!0});c._setMCData=function(b){this._mcData!=
b&&(this._mcData=b)&&this._fillMCData(b)};return a}(d.HashObject);d.MovieClipData=f;f.prototype.__class__="egret.MovieClipData"})(egret||(egret={}));
(function(d){var f=function(e){function a(b,a){e.call(this);this.enableCache=!0;this._mcDataCache={};this._mcDataSet=b;this.setTexture(a)}__extends(a,e);var c=a.prototype;c.clearCache=function(){this._mcDataCache={}};c.generateMovieClipData=function(b){void 0===b&&(b="");if(""==b&&this._mcDataSet)for(b in this._mcDataSet.mc)break;if(""==b)return null;var a=this._findFromCache(b,this._mcDataCache);a||(a=new d.MovieClipData,this._fillData(b,a,this._mcDataCache));return a};c._findFromCache=function(b,
a){return this.enableCache&&a[b]?a[b]:null};c._fillData=function(b,a,c){if(this._mcDataSet){var d=this._mcDataSet.mc[b];d&&(a._init(d,this._mcDataSet.res,this._spriteSheet),this.enableCache&&(c[b]=a))}};Object.defineProperty(c,"mcDataSet",{get:function(){return this._mcDataSet},set:function(b){this._mcDataSet=b},enumerable:!0,configurable:!0});Object.defineProperty(c,"texture",{set:function(b){this.setTexture(b)},enumerable:!0,configurable:!0});Object.defineProperty(c,"spriteSheet",{get:function(){return this._spriteSheet},
enumerable:!0,configurable:!0});c.setTexture=function(b){this._spriteSheet=b?new d.SpriteSheet(b):null};return a}(d.EventDispatcher);d.MovieClipDataFactory=f;f.prototype.__class__="egret.MovieClipDataFactory"})(egret||(egret={}));
(function(d){var f=function(d){function a(){d.call(this);this._scaleY=this._scaleX=1;this._size=30;this._color="#FFFFFF";this._fontFamily="Arial";this._italic=this._bold=!1;this._textAlign="left";this._verticalAlign="top";this._visible=!1;this._height=this._width=0;this._multiline=!1;this._maxChars=0}__extends(a,d);var c=a.prototype;c._setTextField=function(b){this._textfield=b};c._getText=function(){return null};c._setText=function(b){};c._setTextType=function(b){};c._getTextType=function(){return null};
c._show=function(b,a,c,d){};c._add=function(){};c._remove=function(){};c._hide=function(){};c._addListeners=function(){};c._removeListeners=function(){};c._setScale=function(b,a){this._scaleX=b;this._scaleY=a};c.changePosition=function(b,a){};c._setSize=function(b){this._size=b};c._setTextColor=function(b){this._color=b};c._setTextFontFamily=function(b){this._fontFamily=b};c._setBold=function(b){this._bold=b};c._setItalic=function(b){this._italic=b};c._setTextAlign=function(b){this._textAlign=b};
c._setVerticalAlign=function(b){this._verticalAlign=b};c._setVisible=function(b){this._visible=b};c._setWidth=function(b){this._width=b};c._setHeight=function(b){this._height=b};c._setMultiline=function(b){this._multiline=b};c._setMaxChars=function(b){this._maxChars=b};c._resetStageText=function(){};c._initElement=function(b,a,c,d){};c._removeInput=function(){};a.create=function(){return null};c.$onBlur=function(){};return a}(d.EventDispatcher);d.StageText=f;f.prototype.__class__="egret.StageText"})(egret||
(egret={}));(function(d){var f=function(){function d(){}d.GET="get";d.POST="post";return d}();d.URLRequestMethod=f;f.prototype.__class__="egret.URLRequestMethod"})(egret||(egret={}));(function(d){var f=function(){function d(){}d.BINARY="binary";d.TEXT="text";d.VARIABLES="variables";d.TEXTURE="texture";d.SOUND="sound";return d}();d.URLLoaderDataFormat=f;f.prototype.__class__="egret.URLLoaderDataFormat"})(egret||(egret={}));
(function(d){var f=function(d){function a(b){void 0===b&&(b=null);d.call(this);this.variables=null;null!==b&&this.decode(b)}__extends(a,d);var c=a.prototype;c.decode=function(b){this.variables||(this.variables={});b=b.split("+").join(" ");for(var a,c=/[?&]?([^=]+)=([^&]*)/g;a=c.exec(b);){var d=decodeURIComponent(a[1]);a=decodeURIComponent(a[2]);if(!1==d in this.variables)this.variables[d]=a;else{var e=this.variables[d];e instanceof Array?e.push(a):this.variables[d]=[e,a]}}};c.toString=function(){if(!this.variables)return"";
var b=this.variables,a=[],c;for(c in b)a.push(this.encodeValue(c,b[c]));return a.join("&")};c.encodeValue=function(b,a){return a instanceof Array?this.encodeArray(b,a):encodeURIComponent(b)+"="+encodeURIComponent(a)};c.encodeArray=function(b,a){return b?0==a.length?encodeURIComponent(b)+"=":a.map(function(a){return encodeURIComponent(b)+"="+encodeURIComponent(a)}).join("&"):""};return a}(d.HashObject);d.URLVariables=f;f.prototype.__class__="egret.URLVariables"})(egret||(egret={}));
(function(d){var f=function(){return function(d,a){this.value=this.name="";this.name=d;this.value=a}}();d.URLRequestHeader=f;f.prototype.__class__="egret.URLRequestHeader"})(egret||(egret={}));(function(d){var f=function(e){function a(a){void 0===a&&(a=null);e.call(this);this.data=null;this.method=d.URLRequestMethod.GET;this.url="";this.requestHeaders=[];this.url=a}__extends(a,e);return a}(d.HashObject);d.URLRequest=f;f.prototype.__class__="egret.URLRequest"})(egret||(egret={}));
(function(d){var f=function(e){function a(b){void 0===b&&(b=null);e.call(this);this.dataFormat=d.URLLoaderDataFormat.TEXT;this._request=this.data=null;this._status=-1;b&&this.load(b)}__extends(a,e);var c=a.prototype;c.load=function(b){this._request=b;this.data=null;d.MainContext.instance.netContext.proceed(this)};c.__recycle=function(){this.data=this._request=null};return a}(d.EventDispatcher);d.URLLoader=f;f.prototype.__class__="egret.URLLoader"})(egret||(egret={}));
(function(d){var f=function(e){function a(){e.call(this);this._sourceHeight=this._sourceWidth=this._textureHeight=this._textureWidth=this._offsetY=this._offsetX=this._bitmapHeight=this._bitmapWidth=this._bitmapY=this._bitmapX=0;this._bitmapData=null}__extends(a,e);var c=a.prototype;Object.defineProperty(c,"textureWidth",{get:function(){return this._textureWidth},enumerable:!0,configurable:!0});Object.defineProperty(c,"textureHeight",{get:function(){return this._textureHeight},enumerable:!0,configurable:!0});
c._setBitmapData=function(b){var a=d.MainContext.instance.rendererContext._texture_scale_factor;this._bitmapData=b;this._sourceWidth=b.width;this._sourceHeight=b.height;this._textureWidth=this._sourceWidth*a;this._textureHeight=this._sourceHeight*a;this._bitmapWidth=this._textureWidth;this._bitmapHeight=this._textureHeight;this._offsetX=this._offsetY=this._bitmapX=this._bitmapY=0};c.getPixel32=function(b,a){throw Error();};c.dispose=function(){var b=this._bitmapData;b.dispose&&b.dispose()};c._clone=
function(){var b=new a;b._bitmapData=this._bitmapData;return b};c.draw=function(b,a,c,d,e,f,k,l,m,n){};c.toDataURL=function(b,a){throw Error();};c.saveToFile=function(b,a,c){throw Error();};c._drawForCanvas=function(b,a,c,d,e,f,k,l,m,n){var q=this._bitmapData;q&&q.avaliable&&(void 0!=n?this._drawRepeatImageForCanvas(b,a,c,d,e,f,k,l,m,n):b.drawImage(q,a,c,d,e,f,k,l,m))};c._drawForNative=function(b,a,c,d,e,f,k,l,m,n){var q=this._bitmapData;q&&q.avaliable&&(a=Math.max(0,a),c=Math.max(0,c),d=Math.max(0,
d),e=Math.max(0,e),void 0!==n?this._drawRepeatImageForNative(b,a,c,d,e,f,k,l,m,n):b.drawImage(q,a,c,d,e,f,k,l,m))};c._drawRepeatImageForNative=function(b,a,c,e,f,g,k,l,m,n){n=d.MainContext.instance.rendererContext._texture_scale_factor;e*=n;for(f*=n;g<l;g+=e)for(var q=k;q<m;q+=f){var r=Math.min(e,l-g),s=Math.min(f,m-q);this._drawForNative(b,a,c,r/n,s/n,g,q,r,s,void 0)}};c._drawRepeatImageForCanvas=function(b,a,c,e,f,g,k,l,m,n){if(void 0===this.pattern){var q=d.MainContext.instance.rendererContext._texture_scale_factor,
r=this._bitmapData,s=r;if(r.width!=e||r.height!=f||1!=q)s=document.createElement("canvas"),s.width=e*q,s.height=f*q,s.getContext("2d").drawImage(r,a,c,e,f,0,0,e*q,f*q);this.pattern=b.createPattern(s,n)}b.fillStyle=this.pattern;b.translate(g,k);b.fillRect(0,0,l,m);b.translate(-g,-k)};c._disposeForCanvas=function(){a.deleteWebGLTexture(this);var b=this._bitmapData;b.onload=null;b.onerror=null;b.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKTWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/sl0p8zAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAATSURBVHjaYvj//z8DAAAA//8DAAj8Av7TpXVhAAAAAElFTkSuQmCC";
b.avaliable=!1;console.log("_disposeForCanvas")};c._disposeForNative=function(){var b=this._bitmapData;b.dispose();b.avaliable=!1;console.log("_disposeForNative")};a.deleteWebGLTexture=function(b){if(b=b._bitmapData){var a=b.webGLTexture;if(a)for(var c in a){var d=a[c];d.glContext.deleteTexture(d)}b.webGLTexture=null}};a.createBitmapData=function(b,a){};a._createBitmapDataForCanvasAndWebGl=function(b,c){var e=a._bitmapDataFactory[b];e||(e=document.createElement("img"),e.setAttribute("bitmapSrc",b),
a._bitmapDataFactory[b]=e);if(e.avaliable)c(0,e);else{a.crossOrigin?e.setAttribute("crossOrigin",a.crossOrigin):e.hasAttribute("crossOrigin")&&e.removeAttribute("crossOrigin");var f=window.URL||window.webkitURL;if(null==a._bitmapCallbackMap[b])if(a._addToCallbackList(b,c),0!=b.indexOf("data:")&&0!=b.indexOf("http:")&&0!=b.indexOf("https:")&&d.Browser.getInstance().isIOS()&&7<=parseInt(d.Browser.getInstance().getIOSVersion().charAt(0))&&f){var p=new XMLHttpRequest;p.open("get",b,!0);p.responseType=
"blob";p.onerror=function(){a._onError(b,e)};p.onload=function(){if(200==this.status){var c=this.response;e.onload=function(){f.revokeObjectURL(e.src);a._onLoad(b,e)};e.onerror=function(){a._onError(b,e)};e.src=f.createObjectURL(c)}else a._onError(b,e)};p.send()}else e.onload=function(){a._onLoad(b,e)},e.onerror=function(){a._onError(b,e)},e.src=b;else a._addToCallbackList(b,c)}};a._onLoad=function(b,c){c.avaliable=!0;c.onload&&(c.onload=null);c.onerror&&(c.onerror=null);var d=a._bitmapCallbackMap[b];
if(d&&d.length){delete a._bitmapCallbackMap[b];for(var e=d.length,f=0;f<e;f++)(0,d[f])(0,c)}};a._onError=function(b,c){var d=a._bitmapCallbackMap[b];if(d&&d.length){delete a._bitmapCallbackMap[b];for(var e=d.length,f=0;f<e;f++)(0,d[f])(1,c)}};a._createBitmapDataForNative=function(b,c){console.log("_createBitmapDataForNative:"+b);var e=a._bitmapDataFactory[b];e?(e.avaliable||(console.log("reload"),e.reload(),e.avaliable=!0),c(0,e)):d.NativeNetContext.__use_asyn?a._bitmapCallbackMap[b]?a._addToCallbackList(b,
c):(a._addToCallbackList(b,c),e=new d.PromiseObject,e.onSuccessFunc=function(c){a._bitmapDataFactory[b]=c;a._onLoad(b,c)},e.onErrorFunc=function(){a._onError(b,null)},console.log("addTextureAsyn"),egret_native.Texture.addTextureAsyn(b,e)):(console.log("addTexture"),e=egret_native.Texture.addTexture(b),a._bitmapDataFactory[b]=e,e.avaliable=!0,c(0,e))};a._addToCallbackList=function(b,c){var d=a._bitmapCallbackMap[b];d||(d=[]);d.push(c);a._bitmapCallbackMap[b]=d};a.crossOrigin=null;a._bitmapDataFactory=
{};a._bitmapCallbackMap={};return a}(d.HashObject);d.Texture=f;f.prototype.__class__="egret.Texture"})(egret||(egret={}));
(function(d){var f=function(e){function a(){e.call(this)}__extends(a,e);var c=a.prototype;c.init=function(){this._bitmapData=document.createElement("canvas");this._bitmapData.avaliable=!0;this.renderContext=d.RendererContext.createRendererContext(this._bitmapData)};c.drawToTexture=function(b,c,e){var f=c||b.getBounds(d.Rectangle.identity);if(0==f.width||0==f.height)return!1;this._bitmapData||this.init();var p=f.x,g=f.y,k=f.width,f=f.height,l,m,n=d.MainContext.instance.rendererContext._texture_scale_factor;
l=k/n;m=f/n;l=Math.round(l);m=Math.round(m);this.setSize(l,m);this.begin();b._worldTransform.identity();b._worldTransform.a=1/n;b._worldTransform.d=1/n;e&&(b._worldTransform.a*=e,b._worldTransform.d*=e);e=b._DO_Props_._anchorOffsetX;n=b._DO_Props_._anchorOffsetY;if(0!=b._DO_Props_._anchorX||0!=b._DO_Props_._anchorY)e=b._DO_Props_._anchorX*l,n=b._DO_Props_._anchorY*m;this._offsetX=p+e;this._offsetY=g+n;b._worldTransform.append(1,0,0,1,-this._offsetX,-this._offsetY);c&&(this._offsetX-=p,this._offsetY-=
g);b.worldAlpha=1;if(b instanceof d.DisplayObjectContainer)for(c=b._children,p=0,g=c.length;p<g;p++)c[p]._updateTransform();this.renderContext.setTransform(b._worldTransform);c=d.RenderFilter.getInstance();p=c._drawAreaList.concat();c._drawAreaList.length=0;this.renderContext.clearScreen();this.renderContext.onRenderStart();d.Texture.deleteWebGLTexture(this);b._hasFilters()&&b._setGlobalFilters(this.renderContext);(g=b.mask||b._DO_Props_._scrollRect)&&this.renderContext.pushMask(g);e=d.MainContext.__use_new_draw;
d.MainContext.__use_new_draw=!1;b._render(this.renderContext);d.MainContext.__use_new_draw=e;g&&this.renderContext.popMask();b._hasFilters()&&b._removeGlobalFilters(this.renderContext);a.identityRectangle.width=l;a.identityRectangle.height=m;c.addDrawArea(a.identityRectangle);this.renderContext.onRenderFinish();c._drawAreaList=p;this._sourceWidth=l;this._sourceHeight=m;this._textureWidth=Math.round(k);this._textureHeight=Math.round(f);this.end();return!0};c.setSize=function(b,a){var c=this._bitmapData;
c.width=b;c.height=a;c.style.width=b+"px";c.style.height=a+"px";this.renderContext._cacheCanvas&&(this.renderContext._cacheCanvas.width=b,this.renderContext._cacheCanvas.height=a)};c.begin=function(){};c.end=function(){};c.dispose=function(){this._bitmapData&&(this.renderContext=this._bitmapData=null)};a.create=function(){return a._pool.length?a._pool.pop():new a};a.release=function(b){a._pool.push(b)};a.identityRectangle=new d.Rectangle;a._pool=[];return a}(d.Texture);d.RenderTexture=f;f.prototype.__class__=
"egret.RenderTexture"})(egret||(egret={}));
(function(d){var f=function(e){function a(){e.call(this);this.renderCost=0;this._texture_scale_factor=1;this.profiler=d.Profiler.getInstance();a.blendModesForGL||a.initBlendMode()}__extends(a,e);var c=a.prototype;Object.defineProperty(c,"texture_scale_factor",{get:function(){return this._texture_scale_factor},set:function(b){this._setTextureScaleFactor(b)},enumerable:!0,configurable:!0});c._setTextureScaleFactor=function(b){this._texture_scale_factor=b};c.clearScreen=function(){};c.clearRect=function(b,
a,c,d){};c.drawImage=function(b,a,c,d,e,f,k,l,m,n){this.profiler.onDrawImage()};c.drawImageScale9=function(b,a,c,d,e,f,k,l,m,n){return!1};c._addOneDraw=function(){this.profiler.onDrawImage()};c.setTransform=function(b){};c.setAlpha=function(b,a){};c.setupFont=function(b,a){};c.measureText=function(b){return 0};c.drawText=function(b,a,c,d,e,f){this.profiler.onDrawImage()};c.strokeRect=function(b,a,c,d,e){};c.pushMask=function(b){};c.popMask=function(){};c.onRenderStart=function(){};c.onRenderFinish=
function(){};c.createLinearGradient=function(b,a,c,d){return null};c.createRadialGradient=function(b,a,c,d,e,f){return null};c.setGlobalFilters=function(b){};c.drawCursor=function(b,a,c,d){};a.createRendererContext=function(b){return null};a.initBlendMode=function(){a.blendModesForGL={};a.blendModesForGL[d.BlendMode.NORMAL]=[1,771];a.blendModesForGL[d.BlendMode.ADD]=[770,1];a.blendModesForGL[d.BlendMode.ERASE]=[0,771];a.blendModesForGL[d.BlendMode.ERASE_REVERSE]=[0,770]};a.registerBlendModeForGL=
function(b,c,e,f){a.blendModesForGL[b]&&!f?d.$warn(1005,b):a.blendModesForGL[b]=[c,e]};a.imageSmoothingEnabled=!0;a.blendModesForGL=null;return a}(d.HashObject);d.RendererContext=f;f.prototype.__class__="egret.RendererContext"})(egret||(egret={}));(function(d){var f=function(){function d(){}d.MOUSE="mouse";d.TOUCH="touch";d.mode="touch";return d}();d.InteractionMode=f;f.prototype.__class__="egret.InteractionMode"})(egret||(egret={}));
(function(d){var f=function(e){function a(){e.call(this);this._currentTouchTarget={};this.maxTouches=2;this.touchDownTarget={};this.touchingIdentifiers=[];this.lastTouchY=this.lastTouchX=-1}__extends(a,e);var c=a.prototype;c.run=function(){};c.getTouchData=function(b,a,c){var d=this._currentTouchTarget[b];null==d&&(d={},this._currentTouchTarget[b]=d);d.stageX=a;d.stageY=c;d.identifier=b;return d};c.dispatchEvent=function(b,a){d.TouchEvent.dispatchTouchEvent(a.target,b,a.identifier,a.stageX,a.stageY,
!1,!1,!1,!0==this.touchDownTarget[a.identifier])};c.onTouchBegan=function(b,a,c){if(this.touchingIdentifiers.length!=this.maxTouches){this.lastTouchX=b;this.lastTouchY=a;var e=d.MainContext.instance.stage.hitTest(b,a);e&&(b=this.getTouchData(c,b,a),this.touchDownTarget[c]=!0,b.target=e,b.beginTarget=e,this.dispatchEvent(d.TouchEvent.TOUCH_BEGIN,b));this.touchingIdentifiers.push(c)}};c.onTouchMove=function(b,a,c){if(-1!=this.touchingIdentifiers.indexOf(c)&&(b!=this.lastTouchX||a!=this.lastTouchY)){this.lastTouchX=
b;this.lastTouchY=a;var e=d.MainContext.instance.stage.hitTest(b,a);e&&(b=this.getTouchData(c,b,a),b.target=e,this.dispatchEvent(d.TouchEvent.TOUCH_MOVE,b))}};c.onTouchEnd=function(b,a,c){var e=this.touchingIdentifiers.indexOf(c);-1!=e&&(this.touchingIdentifiers.splice(e,1),e=d.MainContext.instance.stage.hitTest(b,a))&&(b=this.getTouchData(c,b,a),delete this.touchDownTarget[c],c=b.beginTarget,b.target=e,this.dispatchEvent(d.TouchEvent.TOUCH_END,b),c==e?this.dispatchEvent(d.TouchEvent.TOUCH_TAP,b):
b.beginTarget&&(b.target=b.beginTarget,this.dispatchEvent(d.TouchEvent.TOUCH_RELEASE_OUTSIDE,b)),delete this._currentTouchTarget[b.identifier])};return a}(d.HashObject);d.TouchContext=f;f.prototype.__class__="egret.TouchContext"})(egret||(egret={}));
(function(d){var f=function(e){function a(){e.call(this)}__extends(a,e);var c=a.prototype;c.proceed=function(b){};a._getUrl=function(b){var a=b.url;-1==a.indexOf("?")&&b.method==d.URLRequestMethod.GET&&b.data&&b.data instanceof d.URLVariables&&(a=a+"?"+b.data.toString());return a};c.getChangeList=function(){return[]};c.getVirtualUrl=function(b){return b};return a}(d.HashObject);d.NetContext=f;f.prototype.__class__="egret.NetContext"})(egret||(egret={}));
(function(d){var f=function(d){function a(){d.call(this)}__extends(a,d);var c=a.prototype;c.executeMainLoop=function(b,a){};c.setFrameRate=function(b){};return a}(d.HashObject);d.DeviceContext=f;f.prototype.__class__="egret.DeviceContext"})(egret||(egret={}));(function(d){var f=function(){function d(){}d.call=function(a,c){};d.addCallback=function(a,c){};return d}();d.ExternalInterface=f;f.prototype.__class__="egret.ExternalInterface"})(egret||(egret={}));
(function(d){var f=function(e){function a(){e.call(this);this.trans=null;this.webPSupport=!1;this.header=null;this.ua=navigator.userAgent.toLowerCase();this.trans=this.getTrans("transform")}__extends(a,e);var c=a.prototype;a.getInstance=function(){null==a.instance&&(a.instance=new a);return a.instance};Object.defineProperty(c,"isMobile",{get:function(){d.$warn(1E3);return d.MainContext.deviceType==d.MainContext.DEVICE_MOBILE},enumerable:!0,configurable:!0});c.isIOS=function(){return 0>this.ua.indexOf("windows")&&
(0<=this.ua.indexOf("iphone")||0<=this.ua.indexOf("ipad")||0<=this.ua.indexOf("ipod"))};c.getIOSVersion=function(){return this.ua.toLowerCase().match(/cpu [^\d]*\d.*like mac os x/)[0].match(/\d(_\d)*/)[0]};c.getUserAgent=function(){return this.ua};c.getTrans=function(b,a){void 0===a&&(a=!1);var c="";a?c=this.getHeader(b):(null==this.header&&(this.header=this.getHeader("transform")),c=this.header);return""==c?b:c+b.charAt(0).toUpperCase()+b.substring(1,b.length)};c.getHeader=function(b){var a=document.createElement("div").style;
if(b in a)return"";b=b.charAt(0).toUpperCase()+b.substring(1,b.length);for(var c=["webkit","ms","Moz","O"],d=0;d<c.length;d++)if(c[d]+b in a)return c[d];return""};c.$new=function(b){return this.$(document.createElement(b))};c.$=function(b){var c=document;if(b=b instanceof HTMLElement?b:c.querySelector(b))b.find=b.find||this.$,b.hasClass=b.hasClass||function(b){return this.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)"))},b.addClass=b.addClass||function(b){this.hasClass(b)||(this.className&&(this.className+=
" "),this.className+=b);return this},b.removeClass=b.removeClass||function(b){this.hasClass(b)&&(this.className=this.className.replace(b,""));return this},b.remove=b.remove||function(){},b.appendTo=b.appendTo||function(b){b.appendChild(this);return this},b.prependTo=b.prependTo||function(b){b.childNodes[0]?b.insertBefore(this,b.childNodes[0]):b.appendChild(this);return this},b.transforms=b.transforms||function(){this.style[a.getInstance().trans]=a.getInstance().translate(this.position)+a.getInstance().rotate(this.rotation)+
a.getInstance().scale(this.scale)+a.getInstance().skew(this.skew);return this},b.position=b.position||{x:0,y:0},b.rotation=b.rotation||0,b.scale=b.scale||{x:1,y:1},b.skew=b.skew||{x:0,y:0},b.translates=function(b,a){this.position.x=b;this.position.y=a-d.MainContext.instance.stage.stageHeight;this.transforms();return this},b.rotate=function(b){this.rotation=b;this.transforms();return this},b.resize=function(b,a){this.scale.x=b;this.scale.y=a;this.transforms();return this},b.setSkew=function(b,a){this.skew.x=
b;this.skew.y=a;this.transforms();return this};return b};c.translate=function(b){return"translate("+b.x+"px, "+b.y+"px) "};c.rotate=function(b){return"rotate("+b+"deg) "};c.scale=function(b){return"scale("+b.x+", "+b.y+") "};c.skew=function(b){return"skewX("+-b.x+"deg) skewY("+b.y+"deg)"};return a}(d.HashObject);d.Browser=f;f.prototype.__class__="egret.Browser"})(egret||(egret={}));
(function(d){var f=function(){function d(){}d.getItem=function(a){return null};d.setItem=function(a,c){return!1};d.removeItem=function(a){};d.clear=function(){};return d}();d.localStorage=f;f.prototype.__class__="egret.localStorage"})(egret||(egret={}));
(function(d){var f=function(){function e(){}e.parse=function(a){a=d.SAXParser.getInstance().parserXML(a);if(!a||!a.childNodes)return null;for(var c=a.childNodes.length,b=!1,h=0;h<c;h++){var f=a.childNodes[h];if(1==f.nodeType){b=!0;break}}return b?e.parseNode(f):null};e.parseNode=function(a){if(!a||1!=a.nodeType)return null;var c={};c.localName=a.localName;c.name=a.nodeName;a.namespaceURI&&(c.namespace=a.namespaceURI);a.prefix&&(c.prefix=a.prefix);for(var b=a.attributes,d=b.length,f=0;f<d;f++){var u=
b[f],p=u.name;0!=p.indexOf("xmlns:")&&(c["$"+p]=u.value)}b=a.childNodes;d=b.length;for(f=0;f<d;f++)if(u=e.parseNode(b[f]))c.children||(c.children=[]),u.parent=c,c.children.push(u);!c.children&&(a=a.textContent.trim())&&(c.text=a);return c};e.findChildren=function(a,c,b){b?b.length=0:b=[];e.findByPath(a,c,b);return b};e.findByPath=function(a,c,b){var d=c.indexOf("."),f;-1==d?(f=c,d=!0):(f=c.substring(0,d),c=c.substring(d+1),d=!1);if(a=a.children)for(var u=a.length,p=0;p<u;p++){var g=a[p];g.localName==
f&&(d?b.push(g):e.findByPath(g,c,b))}};e.getAttributes=function(a,c){c?c.length=0:c=[];for(var b in a)"$"==b.charAt(0)&&c.push(b.substring(1));return c};return e}();d.XML=f;f.prototype.__class__="egret.XML"})(egret||(egret={}));
(function(d){var f=function(){function a(){}a.LITTLE_ENDIAN="littleEndian";a.BIG_ENDIAN="bigEndian";return a}();d.Endian=f;f.prototype.__class__="egret.Endian";var e=function(){function a(b){this.BUFFER_EXT_SIZE=0;this.EOF_code_point=this.EOF_byte=-1;this._setArrayBuffer(b||new ArrayBuffer(this.BUFFER_EXT_SIZE));this.endian=f.BIG_ENDIAN}var c=a.prototype;c._setArrayBuffer=function(b){this.write_position=b.byteLength;this.data=new DataView(b);this._position=0};Object.defineProperty(c,"buffer",{get:function(){return this.data.buffer},
set:function(b){this.data=new DataView(b)},enumerable:!0,configurable:!0});Object.defineProperty(c,"dataView",{get:function(){return this.data},set:function(b){this.data=b;this.write_position=b.byteLength},enumerable:!0,configurable:!0});Object.defineProperty(c,"bufferOffset",{get:function(){return this.data.byteOffset},enumerable:!0,configurable:!0});Object.defineProperty(c,"position",{get:function(){return this._position},set:function(b){this._position=b;this.write_position=b>this.write_position?
b:this.write_position},enumerable:!0,configurable:!0});Object.defineProperty(c,"length",{get:function(){return this.write_position},set:function(b){this.write_position=b;var a=new Uint8Array(new ArrayBuffer(b)),c=this.data.buffer.byteLength;c>b&&(this._position=b);b=Math.min(c,b);a.set(new Uint8Array(this.data.buffer,0,b));this.buffer=a.buffer},enumerable:!0,configurable:!0});Object.defineProperty(c,"bytesAvailable",{get:function(){return this.data.byteLength-this._position},enumerable:!0,configurable:!0});
c.clear=function(){this._setArrayBuffer(new ArrayBuffer(this.BUFFER_EXT_SIZE))};c.readBoolean=function(){return this.validate(a.SIZE_OF_BOOLEAN)?0!=this.data.getUint8(this.position++):null};c.readByte=function(){return this.validate(a.SIZE_OF_INT8)?this.data.getInt8(this.position++):null};c.readBytes=function(b,c,d){void 0===c&&(c=0);void 0===d&&(d=0);if(0==d)d=this.bytesAvailable;else if(!this.validate(d))return null;b?b.validateBuffer(d):b=new a(new ArrayBuffer(d));for(var e=0;e<d;e++)b.data.setUint8(e+
c,this.data.getUint8(this.position++))};c.readDouble=function(){if(!this.validate(a.SIZE_OF_FLOAT64))return null;var b=this.data.getFloat64(this.position,this.endian==f.LITTLE_ENDIAN);this.position+=a.SIZE_OF_FLOAT64;return b};c.readFloat=function(){if(!this.validate(a.SIZE_OF_FLOAT32))return null;var b=this.data.getFloat32(this.position,this.endian==f.LITTLE_ENDIAN);this.position+=a.SIZE_OF_FLOAT32;return b};c.readInt=function(){if(!this.validate(a.SIZE_OF_INT32))return null;var b=this.data.getInt32(this.position,
this.endian==f.LITTLE_ENDIAN);this.position+=a.SIZE_OF_INT32;return b};c.readShort=function(){if(!this.validate(a.SIZE_OF_INT16))return null;var b=this.data.getInt16(this.position,this.endian==f.LITTLE_ENDIAN);this.position+=a.SIZE_OF_INT16;return b};c.readUnsignedByte=function(){return this.validate(a.SIZE_OF_UINT8)?this.data.getUint8(this.position++):null};c.readUnsignedInt=function(){if(!this.validate(a.SIZE_OF_UINT32))return null;var b=this.data.getUint32(this.position,this.endian==f.LITTLE_ENDIAN);
this.position+=a.SIZE_OF_UINT32;return b};c.readUnsignedShort=function(){if(!this.validate(a.SIZE_OF_UINT16))return null;var b=this.data.getUint16(this.position,this.endian==f.LITTLE_ENDIAN);this.position+=a.SIZE_OF_UINT16;return b};c.readUTF=function(){if(!this.validate(a.SIZE_OF_UINT16))return null;var b=this.data.getUint16(this.position,this.endian==f.LITTLE_ENDIAN);this.position+=a.SIZE_OF_UINT16;return 0<b?this.readUTFBytes(b):""};c.readUTFBytes=function(b){if(!this.validate(b))return null;var a=
new Uint8Array(this.buffer,this.bufferOffset+this.position,b);this.position+=b;return this.decodeUTF8(a)};c.writeBoolean=function(b){this.validateBuffer(a.SIZE_OF_BOOLEAN);this.data.setUint8(this.position++,b?1:0)};c.writeByte=function(b){this.validateBuffer(a.SIZE_OF_INT8);this.data.setInt8(this.position++,b)};c.writeBytes=function(b,a,c){void 0===a&&(a=0);void 0===c&&(c=0);if(!(0>a||0>c)&&(c=0==c?b.length-a:Math.min(b.length-a,c),0<c)){this.validateBuffer(c);b=new DataView(b.buffer);for(var d=a;d<
c+a;d++)this.data.setUint8(this.position++,b.getUint8(d))}};c.writeDouble=function(b){this.validateBuffer(a.SIZE_OF_FLOAT64);this.data.setFloat64(this.position,b,this.endian==f.LITTLE_ENDIAN);this.position+=a.SIZE_OF_FLOAT64};c.writeFloat=function(b){this.validateBuffer(a.SIZE_OF_FLOAT32);this.data.setFloat32(this.position,b,this.endian==f.LITTLE_ENDIAN);this.position+=a.SIZE_OF_FLOAT32};c.writeInt=function(b){this.validateBuffer(a.SIZE_OF_INT32);this.data.setInt32(this.position,b,this.endian==f.LITTLE_ENDIAN);
this.position+=a.SIZE_OF_INT32};c.writeShort=function(b){this.validateBuffer(a.SIZE_OF_INT16);this.data.setInt16(this.position,b,this.endian==f.LITTLE_ENDIAN);this.position+=a.SIZE_OF_INT16};c.writeUnsignedInt=function(b){this.validateBuffer(a.SIZE_OF_UINT32);this.data.setUint32(this.position,b,this.endian==f.LITTLE_ENDIAN);this.position+=a.SIZE_OF_UINT32};c.writeUTF=function(b){b=this.encodeUTF8(b);var c=b.length;this.validateBuffer(a.SIZE_OF_UINT16+c);this.data.setUint16(this.position,c,this.endian===
f.LITTLE_ENDIAN);this.position+=a.SIZE_OF_UINT16;this._writeUint8Array(b,!1)};c.writeUTFBytes=function(b){this._writeUint8Array(this.encodeUTF8(b))};c.toString=function(){return"[ByteArray] length:"+this.length+", bytesAvailable:"+this.bytesAvailable};c._writeUint8Array=function(b,a){void 0===a&&(a=!0);a&&this.validateBuffer(this.position+b.length);for(var c=0;c<b.length;c++)this.data.setUint8(this.position++,b[c])};c.validate=function(b){if(0<this.data.byteLength&&this._position+b<=this.data.byteLength)return!0;
d.$error(1025)};c.validateBuffer=function(b,a){void 0===a&&(a=!1);this.write_position=b>this.write_position?b:this.write_position;b+=this._position;if(this.data.byteLength<b||a){var c=new Uint8Array(new ArrayBuffer(b+this.BUFFER_EXT_SIZE)),d=Math.min(this.data.buffer.byteLength,b+this.BUFFER_EXT_SIZE);c.set(new Uint8Array(this.data.buffer,0,d));this.buffer=c.buffer}};c.encodeUTF8=function(b){var a=0;b=this.stringToCodePoints(b);for(var c=[];b.length>a;){var d=b[a++];if(this.inRange(d,55296,57343))this.encoderError(d);
else if(this.inRange(d,0,127))c.push(d);else{var e,f;this.inRange(d,128,2047)?(e=1,f=192):this.inRange(d,2048,65535)?(e=2,f=224):this.inRange(d,65536,1114111)&&(e=3,f=240);for(c.push(this.div(d,Math.pow(64,e))+f);0<e;){var k=this.div(d,Math.pow(64,e-1));c.push(128+k%64);e-=1}}}return new Uint8Array(c)};c.decodeUTF8=function(b){for(var a=0,c="",d,e=0,f=0,k=0,l=0;b.length>a;){d=b[a++];if(d===this.EOF_byte)d=0!==f?this.decoderError(!1):this.EOF_code_point;else if(0===f)this.inRange(d,0,127)||(this.inRange(d,
194,223)?(f=1,l=128,e=d-192):this.inRange(d,224,239)?(f=2,l=2048,e=d-224):this.inRange(d,240,244)?(f=3,l=65536,e=d-240):this.decoderError(!1),e*=Math.pow(64,f),d=null);else if(this.inRange(d,128,191))if(k+=1,e+=(d-128)*Math.pow(64,f-k),k!==f)d=null;else{var m=e,n=l,l=k=f=e=0;d=this.inRange(m,n,1114111)&&!this.inRange(m,55296,57343)?m:this.decoderError(!1,d)}else l=k=f=e=0,a--,d=this.decoderError(!1,d);null!==d&&d!==this.EOF_code_point&&(65535>=d?0<d&&(c+=String.fromCharCode(d)):(d-=65536,c+=String.fromCharCode(55296+
(d>>10&1023)),c+=String.fromCharCode(56320+(d&1023))))}return c};c.encoderError=function(b){d.$error(1026,b)};c.decoderError=function(b,a){b&&d.$error(1027);return a||65533};c.inRange=function(b,a,c){return a<=b&&b<=c};c.div=function(b,a){return Math.floor(b/a)};c.stringToCodePoints=function(b){for(var a=[],c=0,d=b.length;c<b.length;){var e=b.charCodeAt(c);if(this.inRange(e,55296,57343))if(this.inRange(e,56320,57343))a.push(65533);else if(c===d-1)a.push(65533);else{var f=b.charCodeAt(c+1);this.inRange(f,
56320,57343)?(e&=1023,f&=1023,c+=1,a.push(65536+(e<<10)+f)):a.push(65533)}else a.push(e);c+=1}return a};a.SIZE_OF_BOOLEAN=1;a.SIZE_OF_INT8=1;a.SIZE_OF_INT16=2;a.SIZE_OF_INT32=4;a.SIZE_OF_UINT8=1;a.SIZE_OF_UINT16=2;a.SIZE_OF_UINT32=4;a.SIZE_OF_FLOAT32=4;a.SIZE_OF_FLOAT64=8;return a}();d.ByteArray=e;e.prototype.__class__="egret.ByteArray"})(egret||(egret={}));
(function(d){d.getOption=function(d){if(window.location){var e=location.search;if(""==e)return"";for(var e=e.slice(1),e=e.split("&"),a=e.length,c=0;c<a;c++){var b=e[c].split("=");if(b[0]==d)return b[1]}}return""}})(egret||(egret={}));
(function(d){var f=function(e){function a(b,a,c){e.call(this);this._target=null;this.loop=this.ignoreGlobalPause=this._useTicks=!1;this._actions=this._steps=this.pluginData=null;this.paused=!1;this.duration=0;this._prevPos=-1;this.position=null;this._stepPosition=this._prevPosition=0;this.passive=!1;this.initialize(b,a,c)}__extends(a,e);var c=a.prototype;a.get=function(b,c,d,e){void 0===c&&(c=null);void 0===d&&(d=null);void 0===e&&(e=!1);e&&a.removeTweens(b);return new a(b,c,d)};a.removeTweens=function(b){if(b.tween_count){for(var c=
a._tweens,d=c.length-1;0<=d;d--)c[d]._target==b&&(c[d].paused=!0,c.splice(d,1));b.tween_count=0}};a.pauseTweens=function(b){if(b.tween_count)for(var a=d.Tween._tweens,c=a.length-1;0<=c;c--)a[c]._target==b&&(a[c].paused=!0)};a.resumeTweens=function(b){if(b.tween_count)for(var a=d.Tween._tweens,c=a.length-1;0<=c;c--)a[c]._target==b&&(a[c].paused=!1)};a.tick=function(b,c){void 0===c&&(c=!1);for(var d=a._tweens.concat(),e=d.length-1;0<=e;e--){var f=d[e];c&&!f.ignoreGlobalPause||f.paused||f.tick(f._useTicks?
1:b)}};a._register=function(b,c){var e=b._target,f=a._tweens;if(c)e&&(e.tween_count=0<e.tween_count?e.tween_count+1:1),f.push(b),a._inited||(d.Ticker.getInstance().register(a.tick,null),a._inited=!0);else for(e&&e.tween_count--,e=f.length;e--;)if(f[e]==b){f.splice(e,1);break}};a.removeAllTweens=function(){for(var b=a._tweens,c=0,d=b.length;c<d;c++){var e=b[c];e.paused=!0;e._target.tweenjs_count=0}b.length=0};c.initialize=function(b,c,d){this._target=b;c&&(this._useTicks=c.useTicks,this.ignoreGlobalPause=
c.ignoreGlobalPause,this.loop=c.loop,c.onChange&&this.addEventListener("change",c.onChange,c.onChangeObj),c.override&&a.removeTweens(b));this.pluginData=d||{};this._curQueueProps={};this._initQueueProps={};this._steps=[];this._actions=[];c&&c.paused?this.paused=!0:a._register(this,!0);c&&null!=c.position&&this.setPosition(c.position,a.NONE)};c.setPosition=function(b,a){void 0===a&&(a=1);0>b&&(b=0);var c=b,d=!1;c>=this.duration&&(this.loop?c%=this.duration:(c=this.duration,d=!0));if(c==this._prevPos)return d;
var e=this._prevPos;this.position=this._prevPos=c;this._prevPosition=b;if(this._target)if(d)this._updateTargetProps(null,1);else if(0<this._steps.length){for(var f=0,k=this._steps.length;f<k&&!(this._steps[f].t>c);f++);f=this._steps[f-1];this._updateTargetProps(f,(this._stepPosition=c-f.t)/f.d)}0!=a&&0<this._actions.length&&(this._useTicks?this._runActions(c,c):1==a&&c<e?(e!=this.duration&&this._runActions(e,this.duration),this._runActions(0,c,!0)):this._runActions(e,c));d&&this.setPaused(!0);this.dispatchEventWith("change");
return d};c._runActions=function(b,a,c){void 0===c&&(c=!1);var d=b,e=a,f=-1,k=this._actions.length,l=1;b>a&&(d=a,e=b,f=k,k=l=-1);for(;(f+=l)!=k;){a=this._actions[f];var m=a.t;(m==e||m>d&&m<e||c&&m==b)&&a.f.apply(a.o,a.p)}};c._updateTargetProps=function(b,c){var d,e,f,g;if(b||1!=c){if(this.passive=!!b.v)return;b.e&&(c=b.e(c,0,1,1));d=b.p0;e=b.p1}else this.passive=!1,d=e=this._curQueueProps;for(var k in this._initQueueProps){null==(f=d[k])&&(d[k]=f=this._initQueueProps[k]);null==(g=e[k])&&(e[k]=g=f);
f=f==g||0==c||1==c||"number"!=typeof f?1==c?g:f:f+(g-f)*c;var l=!1;if(g=a._plugins[k])for(var m=0,n=g.length;m<n;m++){var q=g[m].tween(this,k,f,d,e,c,!!b&&d==e,!b);q==a.IGNORE?l=!0:f=q}l||(this._target[k]=f)}};c.setPaused=function(b){this.paused=b;a._register(this,!b);return this};c._cloneProps=function(b){var a={},c;for(c in b)a[c]=b[c];return a};c._addStep=function(b){0<b.d&&(this._steps.push(b),b.t=this.duration,this.duration+=b.d);return this};c._appendQueueProps=function(b){var c,d,e,f,g,k;for(k in b)if(void 0===
this._initQueueProps[k]){d=this._target[k];if(c=a._plugins[k])for(e=0,f=c.length;e<f;e++)d=c[e].init(this,k,d);this._initQueueProps[k]=this._curQueueProps[k]=void 0===d?null:d}for(k in b){d=this._curQueueProps[k];if(c=a._plugins[k])for(g=g||{},e=0,f=c.length;e<f;e++)c[e].step&&c[e].step(this,k,d,b[k],g);this._curQueueProps[k]=b[k]}g&&this._appendQueueProps(g);return this._curQueueProps};c._addAction=function(b){b.t=this.duration;this._actions.push(b);return this};c._set=function(b,a){for(var c in b)a[c]=
b[c]};c.wait=function(b,a){if(null==b||0>=b)return this;var c=this._cloneProps(this._curQueueProps);return this._addStep({d:b,p0:c,p1:c,v:a})};c.to=function(b,a,c){void 0===c&&(c=void 0);if(isNaN(a)||0>a)a=0;return this._addStep({d:a||0,p0:this._cloneProps(this._curQueueProps),e:c,p1:this._cloneProps(this._appendQueueProps(b))})};c.call=function(b,a,c){void 0===a&&(a=void 0);void 0===c&&(c=void 0);return this._addAction({f:b,p:c?c:[],o:a?a:this._target})};c.set=function(b,a){void 0===a&&(a=null);
return this._addAction({f:this._set,o:this,p:[b,a?a:this._target]})};c.play=function(b){b||(b=this);return this.call(b.setPaused,b,[!1])};c.pause=function(b){b||(b=this);return this.call(b.setPaused,b,[!0])};c.tick=function(b){this.paused||this.setPosition(this._prevPosition+b)};a.NONE=0;a.LOOP=1;a.REVERSE=2;a._tweens=[];a.IGNORE={};a._plugins={};a._inited=!1;return a}(d.EventDispatcher);d.Tween=f;f.prototype.__class__="egret.Tween"})(egret||(egret={}));
(function(d){var f=function(){function e(){d.$error(1014)}e.get=function(a){-1>a&&(a=-1);1<a&&(a=1);return function(c){return 0==a?c:0>a?c*(c*-a+1+a):c*((2-c)*a+(1-a))}};e.getPowIn=function(a){return function(c){return Math.pow(c,a)}};e.getPowOut=function(a){return function(c){return 1-Math.pow(1-c,a)}};e.getPowInOut=function(a){return function(c){return 1>(c*=2)?0.5*Math.pow(c,a):1-0.5*Math.abs(Math.pow(2-c,a))}};e.sineIn=function(a){return 1-Math.cos(a*Math.PI/2)};e.sineOut=function(a){return Math.sin(a*
Math.PI/2)};e.sineInOut=function(a){return-0.5*(Math.cos(Math.PI*a)-1)};e.getBackIn=function(a){return function(c){return c*c*((a+1)*c-a)}};e.getBackOut=function(a){return function(c){return--c*c*((a+1)*c+a)+1}};e.getBackInOut=function(a){a*=1.525;return function(c){return 1>(c*=2)?0.5*c*c*((a+1)*c-a):0.5*((c-=2)*c*((a+1)*c+a)+2)}};e.circIn=function(a){return-(Math.sqrt(1-a*a)-1)};e.circOut=function(a){return Math.sqrt(1- --a*a)};e.circInOut=function(a){return 1>(a*=2)?-0.5*(Math.sqrt(1-a*a)-1):0.5*
(Math.sqrt(1-(a-=2)*a)+1)};e.bounceIn=function(a){return 1-e.bounceOut(1-a)};e.bounceOut=function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375};e.bounceInOut=function(a){return 0.5>a?0.5*e.bounceIn(2*a):0.5*e.bounceOut(2*a-1)+0.5};e.getElasticIn=function(a,c){var b=2*Math.PI;return function(d){if(0==d||1==d)return d;var e=c/b*Math.asin(1/a);return-(a*Math.pow(2,10*(d-=1))*Math.sin((d-e)*b/c))}};e.getElasticOut=
function(a,c){var b=2*Math.PI;return function(d){if(0==d||1==d)return d;var e=c/b*Math.asin(1/a);return a*Math.pow(2,-10*d)*Math.sin((d-e)*b/c)+1}};e.getElasticInOut=function(a,c){var b=2*Math.PI;return function(d){var e=c/b*Math.asin(1/a);return 1>(d*=2)?-0.5*a*Math.pow(2,10*(d-=1))*Math.sin((d-e)*b/c):a*Math.pow(2,-10*(d-=1))*Math.sin((d-e)*b/c)*0.5+1}};e.quadIn=e.getPowIn(2);e.quadOut=e.getPowOut(2);e.quadInOut=e.getPowInOut(2);e.cubicIn=e.getPowIn(3);e.cubicOut=e.getPowOut(3);e.cubicInOut=e.getPowInOut(3);
e.quartIn=e.getPowIn(4);e.quartOut=e.getPowOut(4);e.quartInOut=e.getPowInOut(4);e.quintIn=e.getPowIn(5);e.quintOut=e.getPowOut(5);e.quintInOut=e.getPowInOut(5);e.backIn=e.getBackIn(1.7);e.backOut=e.getBackOut(1.7);e.backInOut=e.getBackInOut(1.7);e.elasticIn=e.getElasticIn(1,0.3);e.elasticOut=e.getElasticOut(1,0.3);e.elasticInOut=e.getElasticInOut(1,0.3*1.5);return e}();d.Ease=f;f.prototype.__class__="egret.Ease"})(egret||(egret={}));
(function(d){var f=function(e){function a(){e.call(this);this.path="";this.audio=null;this.type=a.EFFECT;this._pauseTime=0;this._listeners=[]}__extends(a,e);var c=a.prototype;Object.defineProperty(c,"position",{get:function(){return this.audio?Math.floor(1E3*this.audio._getCurrentTime()):0},enumerable:!0,configurable:!0});c.play=function(b,a){void 0===b&&(b=!1);void 0===a&&(a=0);var c=this.audio;c&&(c._setCurrentTime(a/1E3),c._setLoop(b),c._play(this.type))};c.stop=function(){var b=this.audio;b&&
(this._pauseTime=0,b._setCurrentTime(0),b._pause())};c.pause=function(){var b=this.audio;b&&(this._pauseTime=b._getCurrentTime(),b._pause())};c.resume=function(){var b=this.audio;b&&(b._setCurrentTime(this._pauseTime),this._pauseTime=0,b._play(this.type))};c.load=function(){var b=this.audio;b&&b._load()};c.addEventListener=function(b,a,c){e.prototype.addEventListener.call(this,b,a,c);var f=this;this.audio&&1==this._eventsMap[b].length&&(a=b==d.SoundEvent.SOUND_COMPLETE||"ended"==b?function(b){d.Event._dispatchByTarget(d.SoundEvent,
f,d.SoundEvent.SOUND_COMPLETE);d.Event._dispatchByTarget(d.Event,f,"ended")}:function(b){d.Event._dispatchByTarget(d.Event,f,b.type)},this._listeners.push({type:b,func:a}),b=f.getVirtualType(b),this.audio._addEventListener(b,a,!1))};c.removeEventListener=function(b,a,c){e.prototype.removeEventListener.call(this,b,a,c);if(this.audio&&(!this._eventsMap||!this._eventsMap[b]||0==this._eventsMap[b].length))for(c=0;c<this._listeners.length;c++)if(a=this._listeners[c],a.type==b){this._listeners.splice(c,
1);b=this.getVirtualType(b);this.audio._removeEventListener(b,a.func,!1);break}};c.getVirtualType=function(b){switch(b){case d.SoundEvent.SOUND_COMPLETE:return"ended";default:return b}};Object.defineProperty(c,"volume",{get:function(){return this.audio?this.audio._getVolume():0},set:function(b){var a=this.audio;a&&a._setVolume(Math.max(0,Math.min(b,1)))},enumerable:!0,configurable:!0});c.setVolume=function(b){d.$warn(1031);this.volume=b};c.getVolume=function(){d.$warn(1032);return this.volume};c.preload=
function(b,a,c){void 0===a&&(a=null);void 0===c&&(c=null);this.type=b;this.audio._preload(b,a,c)};c._setAudio=function(b){this.audio=b};c.destroy=function(){this.audio._destroy()};a.MUSIC="music";a.EFFECT="effect";return a}(d.EventDispatcher);d.Sound=f;f.prototype.__class__="egret.Sound"})(egret||(egret={}));
(function(d){var f=function(){function d(){}d.isNumber=function(a){return"number"===typeof a&&!isNaN(a)};d.sin=function(a){var c=Math.floor(a),b=c+1,f=d.sinInt(c),t=d.sinInt(b);return(a-c)*t+(b-a)*f};d.sinInt=function(a){a%=360;0>a&&(a+=360);return 90>a?egret_sin_map[a]:180>a?egret_cos_map[a-90]:270>a?-egret_sin_map[a-180]:-egret_cos_map[a-270]};d.cos=function(a){var c=Math.floor(a),b=c+1,f=d.cosInt(c),t=d.cosInt(b);return(a-c)*t+(b-a)*f};d.cosInt=function(a){a%=360;0>a&&(a+=360);return 90>a?egret_cos_map[a]:
180>a?-egret_sin_map[a-90]:270>a?-egret_cos_map[a-180]:egret_sin_map[a-270]};return d}();d.NumberUtils=f;f.prototype.__class__="egret.NumberUtils"})(egret||(egret={}));for(var egret_sin_map={},egret_cos_map={},NumberUtils_i=0;90>=NumberUtils_i;NumberUtils_i++)egret_sin_map[NumberUtils_i]=Math.sin(NumberUtils_i*egret.Matrix.DEG_TO_RAD),egret_cos_map[NumberUtils_i]=Math.cos(NumberUtils_i*egret.Matrix.DEG_TO_RAD);
Function.prototype.bind||(Function.prototype.bind=function(d){"function"!==typeof this&&egret.$error(1029);var f=Array.prototype.slice.call(arguments,1),e=this,a=function(){},c=function(){return e.apply(this instanceof a&&d?this:d,f.concat(Array.prototype.slice.call(arguments)))};a.prototype=this.prototype;c.prototype=new a;return c});
(function(d){var f=function(){function e(){this.downloadingSizeThisObject=this.downloadingSizeFunc=this.onErrorThisObject=this.onErrorFunc=this.onSuccessThisObject=this.onSuccessFunc=null}var a=e.prototype;e.create=function(){return e.promiseObjectList.length?e.promiseObjectList.pop():new d.PromiseObject};a.onSuccess=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];this.onSuccessFunc&&this.onSuccessFunc.apply(this.onSuccessThisObject,a);this.destroy()};a.onError=function(){for(var a=
[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];this.onErrorFunc&&this.onErrorFunc.apply(this.onErrorThisObject,a);this.destroy()};a.downloadingSize=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];this.downloadingSizeFunc&&this.downloadingSizeFunc.apply(this.downloadingSizeThisObject,a)};a.destroy=function(){this.downloadingSizeThisObject=this.downloadingSizeFunc=this.onErrorThisObject=this.onErrorFunc=this.onSuccessThisObject=this.onSuccessFunc=void 0;e.promiseObjectList.push(this)};
e.promiseObjectList=[];return e}();d.PromiseObject=f;f.prototype.__class__="egret.PromiseObject"})(egret||(egret={}));
(function(d){var f=function(e){function a(b){void 0===b&&(b=60);e.call(this);this.frameRate=b;this._time=0;this._requestAnimationId=NaN;this._isActivate=!0;a.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;a.cancelAnimationFrame=window.cancelAnimationFrame||window.msCancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.oCancelAnimationFrame||
window.cancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame;a.requestAnimationFrame||(a.requestAnimationFrame=function(a){return window.setTimeout(a,1E3/b)});a.cancelAnimationFrame||(a.cancelAnimationFrame=function(b){return window.clearTimeout(b)});a.instance=this;this.registerListener()}__extends(a,e);var c=a.prototype;c.setFrameRate=function(b){0==60%b&&(a.countTime=
60/b-1)};c.enterFrame=function(){var b=a.instance,c=a._thisObject,e=a._callback,f=d.getTimer(),p=f-b._time;b._requestAnimationId=a.requestAnimationFrame.call(window,a.prototype.enterFrame);a.count<a.countTime?a.count++:(a.count=0,e.call(c,p),b._time=f)};c.executeMainLoop=function(b,c){a._callback=b;a._thisObject=c;this.enterFrame()};c.reset=function(){var b=a.instance;b._requestAnimationId&&(b._time=d.getTimer(),a.cancelAnimationFrame.call(window,b._requestAnimationId),b.enterFrame())};c.registerListener=
function(){var b=this,c=function(){b._isActivate&&(b._isActivate=!1,d.MainContext.instance.stage.dispatchEvent(new d.Event(d.Event.DEACTIVATE)))},e=function(){b._isActivate||(b._isActivate=!0,a.instance.reset(),d.MainContext.instance.stage.dispatchEvent(new d.Event(d.Event.ACTIVATE)))},f=function(){document[p]?c():e()};window.addEventListener("focus",e,!1);window.addEventListener("blur",c,!1);var p,g;"undefined"!==typeof document.hidden?(p="hidden",g="visibilitychange"):"undefined"!==typeof document.mozHidden?
(p="mozHidden",g="mozvisibilitychange"):"undefined"!==typeof document.msHidden?(p="msHidden",g="msvisibilitychange"):"undefined"!==typeof document.webkitHidden?(p="webkitHidden",g="webkitvisibilitychange"):"undefined"!==typeof document.oHidden&&(p="oHidden",g="ovisibilitychange");"onpageshow"in window&&"onpagehide"in window&&(window.addEventListener("pageshow",e,!1),window.addEventListener("pagehide",c,!1));p&&g&&document.addEventListener(g,f,!1);f=navigator.userAgent;g=/micromessenger/gi.test(f);
var k=/mqq/ig.test(f);if(/mobile.*qq/gi.test(f)||g)k=!1;k&&(f=window.browser||{},f.execWebFn=f.execWebFn||{},f.execWebFn.postX5GamePlayerMessage=function(b){b=b.type;"app_enter_background"==b?c():"app_enter_foreground"==b&&e()},window.browser=f)};a.instance=null;a.countTime=0;a.requestAnimationFrame=null;a.cancelAnimationFrame=null;a._thisObject=null;a._callback=null;a.count=0;return a}(d.DeviceContext);d.HTML5DeviceContext=f;f.prototype.__class__="egret.HTML5DeviceContext"})(egret||(egret={}));var egret_html5_localStorage;
(function(d){d.getItem=function(d){return window.localStorage.getItem(d)};d.setItem=function(d,e){try{return window.localStorage.setItem(d,e),!0}catch(a){return egret.$warn(1018,d,e),!1}};d.removeItem=function(d){window.localStorage.removeItem(d)};d.clear=function(){window.localStorage.clear()};d.init=function(){for(var f in d)egret.localStorage[f]=d[f]}})(egret_html5_localStorage||(egret_html5_localStorage={}));egret_html5_localStorage.init();
(function(d){var f=function(e){function a(b,a){void 0===a&&(a=!0);e.call(this);this.useCacheCanvas=a;d.Texture.prototype.draw=d.Texture.prototype._drawForCanvas;d.Texture.prototype.dispose=d.Texture.prototype._disposeForCanvas;this.canvas=b||this.createCanvas();this.canvasContext=this.canvas.getContext("2d");a?(this._cacheCanvas=document.createElement("canvas"),this._cacheCanvas.width=this.canvas.width,this._cacheCanvas.height=this.canvas.height,this.drawCanvasContext=this._cacheCanvasContext=this._cacheCanvas.getContext("2d")):
this.drawCanvasContext=this.canvasContext;var c=this.drawCanvasContext;if(void 0==c.imageSmoothingEnabled){for(var f=["webkitImageSmoothingEnabled","mozImageSmoothingEnabled","msImageSmoothingEnabled"],p=0;p<f.length;p++){var g=f[p];if(void 0!=c[g])break}Object.defineProperty(c,"imageSmoothingEnabled",{get:function(){return this[g]},set:function(b){this[g]=b},enumerable:!0,configurable:!0})}this.onResize();var k=this.drawCanvasContext.setTransform,l=this;this.drawCanvasContext.setTransform=function(b,
a,c,d,e,f){l._matrixA=b;l._matrixB=a;l._matrixC=c;l._matrixD=d;l._matrixTx=e;l._matrixTy=f;k.call(l.drawCanvasContext,b,a,c,d,e,f)};this._matrixA=1;this._matrixC=this._matrixB=0;this._matrixD=1;this._transformTy=this._transformTx=this._matrixTy=this._matrixTx=0;this.initBlendMode()}__extends(a,e);var c=a.prototype;c.createCanvas=function(){var b=d.Browser.getInstance().$("#egretCanvas");if(!b){var a=document.getElementById(d.StageDelegate.canvas_div_name),b=d.Browser.getInstance().$new("canvas");
b.id="egretCanvas";a.appendChild(b)}d.MainContext.instance.stage.addEventListener(d.Event.RESIZE,this.onResize,this);return b};c.onResize=function(){if(this.canvas){var b=document.getElementById(d.StageDelegate.canvas_div_name);this.canvas.width=d.MainContext.instance.stage.stageWidth;this.canvas.height=d.MainContext.instance.stage.stageHeight;this.canvas.style.width=b.style.width;this.canvas.style.height=b.style.height;this.useCacheCanvas&&(this._cacheCanvas.width=this.canvas.width,this._cacheCanvas.height=
this.canvas.height);this.drawCanvasContext.imageSmoothingEnabled=d.RendererContext.imageSmoothingEnabled}};c.clearScreen=function(){for(var b=d.RenderFilter.getInstance().getDrawAreaList(),a=0,c=b.length;a<c;a++){var e=b[a];this.clearRect(e.x,e.y,e.width,e.height)}b=d.MainContext.instance.stage;this.useCacheCanvas&&this._cacheCanvasContext.clearRect(0,0,b.stageWidth,b.stageHeight);this.renderCost=0};c.clearRect=function(b,a,c,d){this.canvasContext.clearRect(b,a,c,d)};c.drawImage=function(b,a,c,f,
p,g,k,l,m,n){void 0===n&&(n=void 0);g+=this._transformTx;k+=this._transformTy;var q=d.getTimer();b.draw(this.drawCanvasContext,a,c,f,p,g,k,l,m,n);e.prototype.drawImage.call(this,b,a,c,f,p,g,k,l,m,n);this.renderCost+=d.getTimer()-q};c.setTransform=function(b){1==b.a&&0==b.b&&0==b.c&&1==b.d&&1==this._matrixA&&0==this._matrixB&&0==this._matrixC&&1==this._matrixD?(this._transformTx=b.tx-this._matrixTx,this._transformTy=b.ty-this._matrixTy):(this._transformTx=this._transformTy=0,this._matrixA==b.a&&this._matrixB==
b.b&&this._matrixC==b.c&&this._matrixD==b.d&&this._matrixTx==b.tx&&this._matrixTy==b.ty||this.drawCanvasContext.setTransform(b.a,b.b,b.c,b.d,b.tx,b.ty))};c.setAlpha=function(b,a){this.drawCanvasContext.globalAlpha=b;a?(this.blendValue=this.blendModes[a],this.drawCanvasContext.globalCompositeOperation=this.blendValue):this.blendValue!=d.BlendMode.NORMAL&&(this.blendValue=this.blendModes[d.BlendMode.NORMAL],this.drawCanvasContext.globalCompositeOperation=this.blendValue)};c.initBlendMode=function(){this.blendModes=
{};this.blendModes[d.BlendMode.NORMAL]="source-over";this.blendModes[d.BlendMode.ADD]="lighter";this.blendModes[d.BlendMode.ERASE]="destination-out";this.blendModes[d.BlendMode.ERASE_REVERSE]="destination-in"};c.setupFont=function(b,a){void 0===a&&(a=null);a=a||{};var c=b._TF_Props_,d=null==a.size?c._size:a.size,e=null==a.fontFamily?c._fontFamily:a.fontFamily,f=this.drawCanvasContext,k=(null==a.italic?c._italic:a.italic)?"italic ":"normal ",k=k+((null==a.bold?c._bold:a.bold)?"bold ":"normal ");f.font=
k+(d+"px "+e);f.textAlign="left";f.textBaseline="middle"};c.measureText=function(b){return this.drawCanvasContext.measureText(b).width};c.drawText=function(b,a,c,f,p,g){void 0===g&&(g=null);this.setupFont(b,g);g=g||{};var k=b._TF_Props_,l;l=null!=g.textColor?d.toColorString(g.textColor):k._textColorString;var m;m=null!=g.strokeColor?d.toColorString(g.strokeColor):k._strokeColorString;var k=null!=g.stroke?g.stroke:k._stroke,n=this.drawCanvasContext;n.fillStyle=l;n.strokeStyle=m;k&&(n.lineWidth=2*k,
n.strokeText(a,c+this._transformTx,f+this._transformTy,p||65535));n.fillText(a,c+this._transformTx,f+this._transformTy,p||65535);e.prototype.drawText.call(this,b,a,c,f,p,g)};c.strokeRect=function(b,a,c,d,e){this.drawCanvasContext.strokeStyle=e;this.drawCanvasContext.strokeRect(b,a,c,d)};c.pushMask=function(b){this.drawCanvasContext.save();this.drawCanvasContext.beginPath();this.drawCanvasContext.rect(b.x+this._transformTx,b.y+this._transformTy,b.width,b.height);this.drawCanvasContext.clip();this.drawCanvasContext.closePath()};
c.popMask=function(){this.drawCanvasContext.restore();this.drawCanvasContext.setTransform(1,0,0,1,0,0)};c.onRenderStart=function(){this.drawCanvasContext.save()};c.onRenderFinish=function(){this.drawCanvasContext.restore();this.drawCanvasContext.setTransform(1,0,0,1,0,0);if(this.useCacheCanvas)for(var b=this._cacheCanvas.width,a=this._cacheCanvas.height,c=d.RenderFilter.getInstance().getDrawAreaList(),e=0,f=c.length;e<f;e++){var g=c[e],k=g.x,l=g.y,m=g.width,g=g.height;k+m>b&&(m=b-k);l+g>a&&(g=a-l);
0<m&&0<g&&this.canvasContext.drawImage(this._cacheCanvas,k,l,m,g,k,l,m,g)}};c.drawCursor=function(b,a,c,d){this.drawCanvasContext.strokeStyle="#40a5ff";this.drawCanvasContext.lineWidth=2;this.drawCanvasContext.beginPath();this.drawCanvasContext.moveTo(Math.round(b+this._transformTx),Math.round(a+this._transformTy));this.drawCanvasContext.lineTo(Math.round(c+this._transformTx),Math.round(d+this._transformTy));this.drawCanvasContext.closePath();this.drawCanvasContext.stroke()};c.createLinearGradient=
function(b,a,c,d){return this.drawCanvasContext.createLinearGradient(b,a,c,d)};c.createRadialGradient=function(b,a,c,d,e,f){return this.drawCanvasContext.createRadialGradient(b,a,c,d,e,f)};return a}(d.RendererContext);d.HTML5CanvasRenderer=f;f.prototype.__class__="egret.HTML5CanvasRenderer"})(egret||(egret={}));egret.RendererContext.createRendererContext=function(d){return new egret.HTML5CanvasRenderer(d,!1)};
egret.Graphics.prototype._beginDraw=function(d){this._renderContext=d.drawCanvasContext;var f=d._transformTx;d=d._transformTy;0==f&&0==d||this._renderContext.translate(f,d)};egret.Graphics.prototype._endDraw=function(d){this._renderContext=d.drawCanvasContext;var f=d._transformTx;d=d._transformTy;0==f&&0==d||this._renderContext.translate(-f,-d)};var originCanvas2DFill=CanvasRenderingContext2D.prototype.fill;
CanvasRenderingContext2D.prototype.fill=function(){var d=this.fillStyle;"string"!=typeof d?(d=d.matrix)?(this.transform(d.a,d.b,d.c,d.d,d.tx,d.ty),originCanvas2DFill.call(this),d=egret.MainContext.instance.rendererContext,d._transformTx=d._transformTy=0,this.setTransform(d._matrixA,d._matrixB,d._matrixC,d._matrixD,d._matrixTx,d._matrixTy)):originCanvas2DFill.call(this):originCanvas2DFill.call(this)};
(function(d){var f=function(e){function a(b){e.call(this);this.glID=this.gl=this.canvas=null;this.size=2E3;this.vertices=null;this.vertSize=5;this.indices=null;this.projectionY=this.projectionX=NaN;this.shaderManager=null;this.contextLost=!1;this.glContextId=0;this.currentBlendMode="";this.currentBaseTexture=null;this.currentBatchSize=0;this.worldTransform=null;this.worldAlpha=1;this.maskList=[];this.maskDataFreeList=[];this.graphicsIndexBuffer=this.graphicsBuffer=this.graphicsIndices=this.graphicsPoints=
this.filterType=null;this.graphicsStyle={};d.Texture.prototype.dispose=d.Texture.prototype._disposeForCanvas;this.canvas=b||this.createCanvas();this.canvas.addEventListener("webglcontextlost",this.handleContextLost.bind(this),!1);this.canvas.addEventListener("webglcontextrestored",this.handleContextRestored.bind(this),!1);this.html5Canvas=document.createElement("canvas");this.canvasContext=new d.HTML5CanvasRenderer(this.html5Canvas);this.onResize();this.projectionX=this.canvas.width/2;this.projectionY=
-this.canvas.height/2;b=6*this.size;this.vertices=new Float32Array(4*this.size*this.vertSize);this.indices=new Uint16Array(b);for(var a=0,c=0;a<b;a+=6,c+=4)this.indices[a+0]=c+0,this.indices[a+1]=c+1,this.indices[a+2]=c+2,this.indices[a+3]=c+0,this.indices[a+4]=c+2,this.indices[a+5]=c+3;this.initWebGL();this.shaderManager=new d.WebGLShaderManager(this.gl);this.worldTransform=new d.Matrix;this.initAll()}__extends(a,e);var c=a.prototype;c.onRenderFinish=function(){this._drawWebGL()};a.initWebGLCanvas=
function(){d.RenderTexture.WebGLCanvas||(d.RenderTexture.WebGLCanvas=document.createElement("canvas"),d.RenderTexture.WebGLCanvas.avaliable=!0,d.RenderTexture.WebGLRenderer=new d.WebGLRenderer(d.RenderTexture.WebGLCanvas),d.RenderTexture.WebGLRenderer.setAlpha(1))};c.initAll=function(){a.isInit||(a.isInit=!0,egret_webgl_graphics.init(),d.TextField.prototype._makeBitmapCache=function(){this.renderTexture||(this.renderTexture=new d.RenderTexture);var b=this.getBounds(d.Rectangle.identity);if(0==b.width||
0==b.height)return this._texture_to_render=null,!1;this._bitmapData||(this._bitmapData=document.createElement("canvas"),this._bitmapData.avaliable=!0,this.renderContext=d.RendererContext.createRendererContext(this._bitmapData));var a=this._bitmapData,c=b.width,b=b.height,e,f,g=d.MainContext.instance.rendererContext._texture_scale_factor;e=c/g;f=b/g;e=Math.round(e);f=Math.round(f);a.width=e;a.height=f;a.style.width=e+"px";a.style.height=f+"px";this.renderContext._cacheCanvas&&(this.renderContext._cacheCanvas.width=
e,this.renderContext._cacheCanvas.height=f);this._worldTransform.identity();this._worldTransform.a=1/g;this._worldTransform.d=1/g;this.renderContext.setTransform(this._worldTransform);this.worldAlpha=1;a=d.RenderFilter.getInstance();g=a._drawAreaList.concat();a._drawAreaList.length=0;this.renderContext.clearScreen();this.renderContext.onRenderStart();d.Texture.deleteWebGLTexture(this.renderTexture);this.renderTexture.dispose();this._hasFilters()&&this._setGlobalFilters(this.renderContext);var k=this.mask||
this._DO_Props_._scrollRect;k&&this.renderContext.pushMask(k);this._render(this.renderContext);k&&this.renderContext.popMask();this._hasFilters()&&this._removeGlobalFilters(this.renderContext);d.RenderTexture.identityRectangle.width=e;d.RenderTexture.identityRectangle.height=f;a.addDrawArea(d.RenderTexture.identityRectangle);this.renderContext.onRenderFinish();a._drawAreaList=g;this.renderTexture._bitmapData=this._bitmapData;this.renderTexture._sourceWidth=e;this.renderTexture._sourceHeight=f;this.renderTexture._textureWidth=
c;this.renderTexture._textureHeight=b;this._texture_to_render=this.renderTexture;return!0},d.TextField.prototype._draw=function(b){this._TF_Props_._type==d.TextFieldType.INPUT&&this._isTyping||(this.getDirty()&&(this._texture_to_render=this.renderTexture,this._DO_Props_._cacheAsBitmap=!0),d.DisplayObject.prototype._draw.call(this,b))},d.RenderTexture.prototype.init=function(){this._bitmapData=document.createElement("canvas");this._bitmapData.avaliable=!0;this.canvasContext=this._bitmapData.getContext("2d");
a.initWebGLCanvas();this._webglBitmapData=d.RenderTexture.WebGLCanvas;this.renderContext=d.RenderTexture.WebGLRenderer},d.RenderTexture.prototype.setSize=function(b,a){this._webglBitmapData&&this.renderContext.setSize(b,a);if(this._bitmapData){var c=this._bitmapData;c.width=b;c.height=a;c.style.width=b+"px";c.style.height=a+"px"}},d.RenderTexture.prototype.end=function(){},d.RenderTexture.prototype.drawToTexture=function(b,a,c){var e=a||b.getBounds(d.Rectangle.identity);if(0==e.width||0==e.height)return!1;
"undefined"==typeof c&&(c=1);this._bitmapData||this.init();var f=e.x,g=e.y,k=e.width,e=e.height,e=e/c,l=d.MainContext.instance.rendererContext._texture_scale_factor,k=Math.round(k/c),e=Math.round(e);this.setSize(k,e);var m=this._bitmapData,n=k/l*c,q=e/l*c;m.width=n;m.height=q;m.style.width=n+"px";m.style.height=q+"px";this.begin();b._worldTransform.identity();m=b._DO_Props_._anchorOffsetX;n=b._DO_Props_._anchorOffsetY;if(0!=b._DO_Props_._anchorX||0!=b._DO_Props_._anchorY)m=b._DO_Props_._anchorX*k,
n=b._DO_Props_._anchorY*e;this._offsetX=f+m;this._offsetY=g+n;b._worldTransform.append(1,0,0,1,-this._offsetX,-this._offsetY);a&&(this._offsetX-=f,this._offsetY-=g);b.worldAlpha=1;a=d.MainContext.__use_new_draw;d.MainContext.__use_new_draw=!1;if(b instanceof d.DisplayObjectContainer)for(f=b._children,g=0,m=f.length;g<m;g++)f[g]._updateTransform();this.renderContext.setTransform(b._worldTransform);f=d.RenderFilter.getInstance();g=f._drawAreaList.concat();f._drawAreaList.length=0;m=this.renderContext.gl;
m.viewport(0,0,k,e);m.bindFramebuffer(m.FRAMEBUFFER,null);m.clearColor(0,0,0,0);m.clear(m.COLOR_BUFFER_BIT);this.renderContext.onRenderStart();d.Texture.deleteWebGLTexture(this);b._hasFilters()&&b._setGlobalFilters(this.renderContext);(m=b.mask||b._DO_Props_._scrollRect)&&this.renderContext.pushMask(m);b._render(this.renderContext);this.renderContext._drawWebGL();d.MainContext.__use_new_draw=a;m&&this.renderContext.popMask();b._hasFilters()&&b._removeGlobalFilters(this.renderContext);d.RenderTexture.identityRectangle.width=
k;d.RenderTexture.identityRectangle.height=e;f.addDrawArea(d.RenderTexture.identityRectangle);this.renderContext.onRenderFinish();f._drawAreaList=g;this._sourceWidth=k/l*c;this._sourceHeight=e/l*c;this._textureWidth=k*c;this._textureHeight=e*c;this.canvasContext.drawImage(this._webglBitmapData,0,0,k,e,0,0,this._sourceWidth,this._sourceHeight);return!0})};c.createCanvas=function(){var b=d.Browser.getInstance().$("#egretCanvas");if(!b){var a=document.getElementById(d.StageDelegate.canvas_div_name),
b=d.Browser.getInstance().$new("canvas");b.id="egretCanvas";a.appendChild(b)}d.MainContext.instance.stage.addEventListener(d.Event.RESIZE,this.onResize,this);return b};c.onResize=function(){this.setSize(d.MainContext.instance.stage.stageWidth,d.MainContext.instance.stage.stageHeight)};c.setSize=function(b,a){var c=document.getElementById(d.StageDelegate.canvas_div_name);this.canvas&&(this.canvas.width=b,this.canvas.height=a,this.canvas.style.width=c.style.width,this.canvas.style.height=c.style.height,
this.projectionX=this.canvas.width/2,this.projectionY=-this.canvas.height/2);this.html5Canvas&&(this.html5Canvas.width=b,this.html5Canvas.height=a,this.html5Canvas.style.width=c.style.width,this.html5Canvas.style.height=c.style.height);this.width=b;this.height=a};c.handleContextLost=function(){this.contextLost=!0};c.handleContextRestored=function(){this.initWebGL();this.shaderManager.setContext(this.gl);this.contextLost=!1};c.initWebGL=function(){for(var b={},c,e=["experimental-webgl","webgl"],f=
0;f<e.length;f++){try{c=this.canvas.getContext(e[f],b)}catch(p){}if(c)break}c||d.$error(1021);a.glID++;this.glID=a.glID;this.setContext(c)};c.setContext=function(b){this.gl=b;b.id=this.glContextId++;this.vertexBuffer=b.createBuffer();this.indexBuffer=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.indexBuffer);b.bufferData(b.ELEMENT_ARRAY_BUFFER,this.indices,b.STATIC_DRAW);b.bindBuffer(b.ARRAY_BUFFER,this.vertexBuffer);b.bufferData(b.ARRAY_BUFFER,this.vertices,b.DYNAMIC_DRAW);b.disable(b.DEPTH_TEST);
b.disable(b.CULL_FACE);b.enable(b.BLEND);b.colorMask(!0,!0,!0,!0)};c.start=function(){if(!this.contextLost){var b=this.gl;b.activeTexture(b.TEXTURE0);b.bindBuffer(b.ARRAY_BUFFER,this.vertexBuffer);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var a;a="colorTransform"==this.filterType?this.shaderManager.colorTransformShader:"blur"==this.filterType?this.shaderManager.blurShader:this.shaderManager.defaultShader;this.shaderManager.activateShader(a);a.syncUniforms();b.uniform2f(a.projectionVector,
this.projectionX,this.projectionY);var c=4*this.vertSize;b.vertexAttribPointer(a.aVertexPosition,2,b.FLOAT,!1,c,0);b.vertexAttribPointer(a.aTextureCoord,2,b.FLOAT,!1,c,8);b.vertexAttribPointer(a.colorAttribute,2,b.FLOAT,!1,c,16)}};c.clearScreen=function(){var b=this.gl;b.colorMask(!0,!0,!0,!0);for(var a=d.RenderFilter.getInstance().getDrawAreaList(),c=0,e=a.length;c<e;c++){var f=a[c];b.viewport(f.x,f.y,f.width,f.height);b.bindFramebuffer(b.FRAMEBUFFER,null);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT)}b.viewport(0,
0,this.width,this.height);this.renderCost=0};c.setBlendMode=function(b){b||(b=d.BlendMode.NORMAL);if(this.currentBlendMode!=b){var a=d.RendererContext.blendModesForGL[b];a&&(this._drawWebGL(),this.gl.blendFunc(a[0],a[1]),this.currentBlendMode=b)}};c.drawRepeatImage=function(b,a,c,e,f,g,k,l,m,n){n=d.MainContext.instance.rendererContext._texture_scale_factor;e*=n;for(f*=n;g<l;g+=e)for(var q=k;q<m;q+=f){var r=Math.min(e,l-g),s=Math.min(f,m-q);this.drawImage(b,a,c,r/n,s/n,g,q,r,s)}};c.drawImage=function(b,
a,c,d,e,f,k,l,m,n){void 0===n&&(n=void 0);if(!this.contextLost){var q=b._bitmapData;if(q&&q.avaliable)if(void 0!==n)this.drawRepeatImage(b,a,c,d,e,f,k,l,m,n);else{if(this.filters)for(n=0;1>n;n++)if("glow"==this.filters[0].type){this.useGlow(b,a,c,d,e,f,k,l,m);return}this._drawImage(b,a,c,d,e,f,k,l,m)}}};c._drawImage=function(b,a,c,d,e,f,k,l,m){this.createWebGLTexture(b);var n=b._bitmapData.webGLTexture[this.glID];if(n!==this.currentBaseTexture||this.currentBatchSize>=this.size-1)this._drawWebGL(),
this.currentBaseTexture=n;var q=this.worldTransform,r=q.a,s=q.b,D=q.c,w=q.d,y=q.tx,v=q.ty;0==f&&0==k||q.append(1,0,0,1,f,k);1==d/l&&1==e/m||q.append(l/d,0,0,m/e,0,0);f=q.a;k=q.b;l=q.c;m=q.d;var n=q.tx,A=q.ty;q.a=r;q.b=s;q.c=D;q.d=w;q.tx=y;q.ty=v;r=b._sourceWidth;s=b._sourceHeight;b=d;q=e;a/=r;c/=s;d/=r;e/=s;r=this.vertices;s=4*this.currentBatchSize*this.vertSize;D=this.worldAlpha;r[s++]=n;r[s++]=A;r[s++]=a;r[s++]=c;r[s++]=D;r[s++]=f*b+n;r[s++]=k*b+A;r[s++]=d+a;r[s++]=c;r[s++]=D;r[s++]=f*b+l*q+n;r[s++]=
m*q+k*b+A;r[s++]=d+a;r[s++]=e+c;r[s++]=D;r[s++]=l*q+n;r[s++]=m*q+A;r[s++]=a;r[s++]=e+c;r[s++]=D;this.currentBatchSize++};c.useGlow=function(b,c,e,f,p,g,k,l,m){var n=this.filters[0],q=n.distance||0,r=n.angle||0,s=0,D=0;0!=q&&0!=r&&(s=Math.ceil(q*d.NumberUtils.cos(r)),D=Math.ceil(q*d.NumberUtils.sin(r)));var q=n.quality,r=n.blurX/10,w=n.blurY/10,y=l+2*r+20+Math.abs(s),v=m+2*w+20+Math.abs(D);a.initWebGLCanvas();var A=d.RenderTexture.WebGLRenderer,x=d.RenderTexture.WebGLCanvas,z=d.RenderTexture.create();
z._bitmapData||z.init();z.setSize(y,v);z._sourceWidth=y;z._sourceHeight=v;var B=d.RenderTexture.create();B._bitmapData||B.init();B.setSize(y,v);B._sourceWidth=y;B._sourceHeight=v;A.clearScreen();A.filterType="colorTransform";A.setGlobalColorTransform([0,0,0,0,n._red,0,0,0,0,n._green,0,0,0,0,n._blue,0,0,0,0,255*n.alpha]);A.setAlpha(1,d.BlendMode.NORMAL);A.setTransform(new d.Matrix(1,0,0,1,0,0));A.drawImage(b,c,e,f,p,r+10,w+10,l,m);A._drawWebGL();A.filterType=null;z.canvasContext.clearRect(0,0,y,v);
z.canvasContext.drawImage(x,0,0,y,v,0,0,y,v);A.clearScreen();A.setAlpha(1,d.BlendMode.NORMAL);A.setTransform(new d.Matrix(1,0,0,1,0,0));A.filterType="blur";A.setBlurData(r,0);d.Texture.deleteWebGLTexture(z);A.drawImage(z,r,w,y-2*r,v-2*w,r,w,y-2*r,v-2*w);A._drawWebGL();A.filterType=null;B.canvasContext.clearRect(0,0,y,v);B.canvasContext.drawImage(x,0,0,y,v,0,0,y,v);A.clearScreen();A.setAlpha(1,d.BlendMode.NORMAL);A.setTransform(new d.Matrix(1,0,0,1,0,0));A.filterType="blur";A.setBlurData(0,w);d.Texture.deleteWebGLTexture(B);
A.drawImage(B,0,w,y,v-2*w,0,w+5,y,v-2*w);A._drawWebGL();A.filterType=null;z.canvasContext.clearRect(0,0,y,v);z.canvasContext.drawImage(x,0,0,y,v,0,0,y,v);A.clearScreen();A.setAlpha(1,d.BlendMode.NORMAL);A.setTransform(new d.Matrix(1,0,0,1,0,0));d.Texture.deleteWebGLTexture(z);for(n=0;n<q;n++)A.drawImage(z,0,0,y,v,s,D,y,v);A._drawWebGL();A.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA);A.currentBlendMode=null;A.drawImage(b,c,e,f,p,g+r+10,k+w+15,l,m);A._drawWebGL();B.canvasContext.clearRect(0,
0,y,v);B.canvasContext.drawImage(x,0,0,y,v,0,0,y,v);d.Texture.deleteWebGLTexture(B);this._drawImage(B,0,0,y,v,g-r-10,k-w-15,y,v);this._drawWebGL();d.RenderTexture.release(z);d.RenderTexture.release(B)};c._drawWebGL=function(){if(0!=this.currentBatchSize&&!this.contextLost){var b=d.getTimer();this.start();var a=this.gl;a.bindTexture(a.TEXTURE_2D,this.currentBaseTexture);var c=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);a.bufferSubData(a.ARRAY_BUFFER,0,c);a.drawElements(a.TRIANGLES,
6*this.currentBatchSize,a.UNSIGNED_SHORT,0);this.currentBatchSize=0;this.renderCost+=d.getTimer()-b;d.Profiler.getInstance().onDrawImage()}};c.setTransform=function(b){var a=this.worldTransform;a.a=b.a;a.b=b.b;a.c=b.c;a.d=b.d;a.tx=b.tx;a.ty=b.ty};c.setAlpha=function(b,a){this.worldAlpha=b;this.setBlendMode(a)};c.createWebGLTexture=function(b){b=b._bitmapData;b.webGLTexture||(b.webGLTexture={});if(!b.webGLTexture[this.glID]){var a=this.gl;b.webGLTexture[this.glID]=a.createTexture();b.webGLTexture[this.glID].glContext=
a;a.bindTexture(a.TEXTURE_2D,b.webGLTexture[this.glID]);a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,b);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.bindTexture(a.TEXTURE_2D,null)}};c.pushMask=function(b){this._drawWebGL();var a=this.gl;
0==this.maskList.length&&a.enable(a.SCISSOR_TEST);b=this.getScissorRect(b);this.maskList.push(b);this.scissor(b.x,b.y,b.width,b.height)};c.getScissorRect=function(b){var a=this.maskList[this.maskList.length-1],c,e,f;a?a.intersects(a)?(c=Math.max(b.x+this.worldTransform.tx,a.x),e=Math.max(b.y+this.worldTransform.ty,a.y),f=Math.min(b.x+this.worldTransform.tx+b.width,a.x+a.width)-c,b=Math.min(b.y+this.worldTransform.ty+b.height,a.y+a.height)-e):b=f=e=c=0:(c=b.x+this.worldTransform.tx,e=b.y+this.worldTransform.ty,
f=b.width,b=b.height);(a=this.maskDataFreeList.pop())?(a.x=c,a.y=e,a.width=f,a.height=b):a=new d.Rectangle(c,e,f,b);return a};c.popMask=function(){this._drawWebGL();var b=this.gl,a=this.maskList.pop();this.maskDataFreeList.push(a);a=this.maskList.length;0!=a?(a=this.maskList[a-1],(0<a.width||0<a.height)&&this.scissor(a.x,a.y,a.width,a.height)):b.disable(b.SCISSOR_TEST)};c.scissor=function(b,a,c,e){var f=this.gl;0>c&&(c=0);0>e&&(e=0);f.scissor(b,-a+d.MainContext.instance.stage.stageHeight-e,c,e)};
c.setGlobalColorTransform=function(b){this._drawWebGL();if(b){b=b.concat();var a=this.shaderManager.colorTransformShader;a.uniforms.colorAdd.value.w=b.splice(19,1)[0]/255;a.uniforms.colorAdd.value.z=b.splice(14,1)[0]/255;a.uniforms.colorAdd.value.y=b.splice(9,1)[0]/255;a.uniforms.colorAdd.value.x=b.splice(4,1)[0]/255;a.uniforms.matrix.value=b}};c.setBlurData=function(b,a){var c=this.shaderManager.blurShader;c.uniforms.blur.value.x=b;c.uniforms.blur.value.y=a};c.setGlobalFilters=function(b){this._drawWebGL();
this.setFilterProperties(b)};c.setFilterProperties=function(b){if((this.filters=b)&&b.length)for(var a=0;1>a;a++){var c=b[a];this.filterType=c.type;switch(c.type){case "blur":this.setBlurData(c.blurX,c.blurY);break;case "colorTransform":this.setGlobalColorTransform(c._matrix)}}else this.filterType=null};c.setupFont=function(b,a){void 0===a&&(a=null);this.canvasContext.setupFont(b,a)};c.measureText=function(b){return this.canvasContext.measureText(b)};c.renderGraphics=function(b){this._drawWebGL();
var a=this.gl,c=this.shaderManager.primitiveShader;this.graphicsPoints?(this.graphicsPoints.length=0,this.graphicsIndices.length=0):(this.graphicsPoints=[],this.graphicsIndices=[],this.graphicsBuffer=a.createBuffer(),this.graphicsIndexBuffer=a.createBuffer());this.updateGraphics(b);this.shaderManager.activateShader(c);a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA);a.uniformMatrix3fv(c.translationMatrix,!1,this.worldTransform.toArray(!0));a.uniform2f(c.projectionVector,this.projectionX,-this.projectionY);
a.uniform2f(c.offsetVector,0,0);a.uniform3fv(c.tintColor,[1,1,1]);a.uniform1f(c.alpha,this.worldAlpha);a.bindBuffer(a.ARRAY_BUFFER,this.graphicsBuffer);a.vertexAttribPointer(c.aVertexPosition,2,a.FLOAT,!1,24,0);a.vertexAttribPointer(c.colorAttribute,4,a.FLOAT,!1,24,8);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.graphicsIndexBuffer);a.drawElements(a.TRIANGLE_STRIP,this.graphicsIndices.length,a.UNSIGNED_SHORT,0);this.shaderManager.activateShader(this.shaderManager.defaultShader)};c.updateGraphics=function(b){var a=
this.gl;this.buildRectangle(b);a.bindBuffer(a.ARRAY_BUFFER,this.graphicsBuffer);a.bufferData(a.ARRAY_BUFFER,new Float32Array(this.graphicsPoints),a.STATIC_DRAW);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.graphicsIndexBuffer);a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.graphicsIndices),a.STATIC_DRAW)};c.buildRectangle=function(b){var a=b.x,c=b.y,d=b.w;b=b.h;var e=this.graphicsStyle.a,f=this.graphicsStyle.r*e,k=this.graphicsStyle.g*e,l=this.graphicsStyle.b*e,m=this.graphicsPoints,n=this.graphicsIndices,
q=m.length/6;m.push(a,c);m.push(f,k,l,e);m.push(a+d,c);m.push(f,k,l,e);m.push(a,c+b);m.push(f,k,l,e);m.push(a+d,c+b);m.push(f,k,l,e);n.push(q,q,q+1,q+2,q+3,q+3)};c.setGraphicsStyle=function(b,a,c,d){this.graphicsStyle.r=b;this.graphicsStyle.g=a;this.graphicsStyle.b=c;this.graphicsStyle.a=d};a.glID=0;a.isInit=!1;return a}(d.RendererContext);d.WebGLRenderer=f;f.prototype.__class__="egret.WebGLRenderer"})(egret||(egret={}));var egret_webgl_graphics;
(function(d){d.beginFill=function(d,a){void 0===a&&(a=1);this._pushCommand(new f(this._setStyle,this,[(d>>16)/255,((d&65280)>>8)/255,(d&255)/255,a]))};d.beginGradientFill=function(d,a,c,b,f){};d.drawRect=function(d,a,c,b){this._pushCommand(new f(function(b){this.renderContext.renderGraphics(b)},this,[{x:d,y:a,w:c,h:b}]));this._checkRect(d,a,c,b)};d.drawCircle=function(d,a,c){};d.drawRoundRect=function(d,a,c,b,f,t){};d.drawEllipse=function(d,a,c,b){};d.lineStyle=function(d,a,c,b,f,t,u,p){};d.lineTo=
function(d,a){};d.curveTo=function(d,a,c,b){};d.cubicCurveTo=function(d,a,c,b,f,t){};d.moveTo=function(d,a){};d.clear=function(){this._maxY=this._maxX=this._minY=this._minX=this.commandQueue.length=0};d.endFill=function(){};d._pushCommand=function(d){this.commandQueue.push(d)};d._draw=function(d){var a=this.commandQueue.length;if(0!=a)for(this.renderContext=d,d=0;d<a;d++){var c=this.commandQueue[d];c.method.apply(c.thisObject,c.args)}};var f=function(){return function(d,a,c){this.method=d;this.thisObject=
a;this.args=c}}();f.prototype.__class__="egret_webgl_graphics.Command";d._setStyle=function(d,a,c,b){this.renderContext.setGraphicsStyle(d,a,c,b)};d.init=function(){for(var e in d)egret.Graphics.prototype[e]=d[e]}})(egret_webgl_graphics||(egret_webgl_graphics={}));
(function(d){var f=function(){function e(){}e.compileProgram=function(a,c,b){b=e.compileFragmentShader(a,b);c=e.compileVertexShader(a,c);var f=a.createProgram();a.attachShader(f,c);a.attachShader(f,b);a.linkProgram(f);a.getProgramParameter(f,a.LINK_STATUS)||d.$warn(1020);return f};e.compileFragmentShader=function(a,c){return e._compileShader(a,c,a.FRAGMENT_SHADER)};e.compileVertexShader=function(a,c){return e._compileShader(a,c,a.VERTEX_SHADER)};e._compileShader=function(a,c,b){b=a.createShader(b);
a.shaderSource(b,c);a.compileShader(b);return a.getShaderParameter(b,a.COMPILE_STATUS)?b:(d.Logger.info(a.getShaderInfoLog(b)),null)};e.checkCanUseWebGL=function(){if(void 0==e.canUseWebGL)try{var a=document.createElement("canvas");e.canUseWebGL=!!window.WebGLRenderingContext&&!(!a.getContext("webgl")&&!a.getContext("experimental-webgl"))}catch(c){e.canUseWebGL=!1}return e.canUseWebGL};return e}();d.WebGLUtils=f;f.prototype.__class__="egret.WebGLUtils"})(egret||(egret={}));
(function(d){var f=function(){function e(a){this.defaultVertexSrc="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec2 aColor;\nuniform vec2 projectionVector;\nuniform vec2 offsetVector;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nconst vec2 center = vec2(-1.0, 1.0);\nvoid main(void) {\n   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.x, aColor.x, aColor.x, aColor.x);\n}";
this.program=this.gl=null;this.fragmentSrc="precision lowp float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform sampler2D uSampler;\nvoid main(void) {\ngl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;\n}";this.uniforms=null;this.gl=a;this.init()}var a=e.prototype;a.init=function(){var a=this.gl,b=d.WebGLUtils.compileProgram(a,this.defaultVertexSrc,this.fragmentSrc);a.useProgram(b);this.uSampler=a.getUniformLocation(b,"uSampler");this.projectionVector=a.getUniformLocation(b,
"projectionVector");this.offsetVector=a.getUniformLocation(b,"offsetVector");this.dimensions=a.getUniformLocation(b,"dimensions");this.aVertexPosition=a.getAttribLocation(b,"aVertexPosition");this.aTextureCoord=a.getAttribLocation(b,"aTextureCoord");this.colorAttribute=a.getAttribLocation(b,"aColor");-1===this.colorAttribute&&(this.colorAttribute=2);this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute];for(var e in this.uniforms)this.uniforms[e].uniformLocation=a.getUniformLocation(b,
e);this.initUniforms();this.program=b};a.initUniforms=function(){if(this.uniforms){var a=this.gl,b,d;for(d in this.uniforms){b=this.uniforms[d];var e=b.type;"mat2"===e||"mat3"===e||"mat4"===e?(b.glMatrix=!0,b.glValueLength=1,"mat2"===e?b.glFunc=a.uniformMatrix2fv:"mat3"===e?b.glFunc=a.uniformMatrix3fv:"mat4"===e&&(b.glFunc=a.uniformMatrix4fv)):(b.glFunc=a["uniform"+e],b.glValueLength="2f"===e||"2i"===e?2:"3f"===e||"3i"===e?3:"4f"===e||"4i"===e?4:1)}}};a.syncUniforms=function(){if(this.uniforms){var a,
b=this.gl,d;for(d in this.uniforms)a=this.uniforms[d],1===a.glValueLength?!0===a.glMatrix?a.glFunc.call(b,a.uniformLocation,a.transpose,a.value):a.glFunc.call(b,a.uniformLocation,a.value):2===a.glValueLength?a.glFunc.call(b,a.uniformLocation,a.value.x,a.value.y):3===a.glValueLength?a.glFunc.call(b,a.uniformLocation,a.value.x,a.value.y,a.value.z):4===a.glValueLength&&a.glFunc.call(b,a.uniformLocation,a.value.x,a.value.y,a.value.z,a.value.w)}};return e}();d.EgretShader=f;f.prototype.__class__="egret.EgretShader"})(egret||
(egret={}));
(function(d){var f=function(d){function a(a){d.call(this,a);this.fragmentSrc="precision mediump float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform float invert;\nuniform mat4 matrix;\nuniform vec4 colorAdd;\nuniform sampler2D uSampler;\nvoid main(void) {\nvec4 texColor = texture2D(uSampler, vTextureCoord);\nvec4 locColor = texColor * matrix;\nif(texColor.a != 0.0){\nlocColor += colorAdd;\n}\ngl_FragColor = vColor*vec4(locColor.rgb*locColor.a,locColor.a);\n}";this.uniforms={matrix:{type:"mat4",
value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},colorAdd:{type:"4f",value:{x:0,y:0,z:0,w:0}}};this.init()}__extends(a,d);return a}(d.EgretShader);d.ColorTransformShader=f;f.prototype.__class__="egret.ColorTransformShader"})(egret||(egret={}));
(function(d){var f=function(d){function a(a){d.call(this,a);this.fragmentSrc="precision mediump float;uniform vec2 blur;uniform sampler2D uSampler;varying vec2 vTextureCoord;void main(){gl_FragColor = vec4(0.0);gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.028 * blur.x, -0.028 * blur.y))) * 0.0044299121055113265;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.024 * blur.x, -0.024 * blur.y))) * 0.00895781211794;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.020 * blur.x, -0.020 * blur.y))) * 0.0215963866053;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.016 * blur.x, -0.016 * blur.y))) * 0.0443683338718;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.012 * blur.x, -0.012 * blur.y))) * 0.0776744219933;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.008 * blur.x, -0.008 * blur.y))) * 0.115876621105;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.004 * blur.x, -0.004 * blur.y))) * 0.147308056121;gl_FragColor += texture2D(uSampler, vTextureCoord) * 0.159576912161;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.004 * blur.x,  0.004 * blur.y))) * 0.147308056121;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.008 * blur.x,  0.008 * blur.y))) * 0.115876621105;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.012 * blur.x,  0.012 * blur.y))) * 0.0776744219933;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.016 * blur.x,  0.016 * blur.y))) * 0.0443683338718;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.020 * blur.x,  0.020 * blur.y))) * 0.0215963866053;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.024 * blur.x,  0.024 * blur.y))) * 0.00895781211794;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.028 * blur.x,  0.028 * blur.y))) * 0.0044299121055113265;}";this.uniforms=
{blur:{type:"2f",value:{x:2,y:2}}};this.init()}__extends(a,d);return a}(d.EgretShader);d.BlurShader=f;f.prototype.__class__="egret.BlurShader"})(egret||(egret={}));
(function(d){var f=function(){function e(a){this.alpha=this.translationMatrix=this.attributes=this.colorAttribute=this.aVertexPosition=this.tintColor=this.offsetVector=this.projectionVector=this.program=this.gl=null;this.fragmentSrc="precision mediump float;\nvarying vec4 vColor;\nvoid main(void) {\n   gl_FragColor = vColor;\n}";this.vertexSrc="attribute vec2 aVertexPosition;\nattribute vec4 aColor;\nuniform mat3 translationMatrix;\nuniform vec2 projectionVector;\nuniform vec2 offsetVector;\nuniform float alpha;\nuniform vec3 tint;\nvarying vec4 vColor;\nvoid main(void) {\n   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);\n   v -= offsetVector.xyx;\n   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);\n   vColor = aColor * vec4(tint * alpha, alpha);\n}";
this.gl=a;this.init()}e.prototype.init=function(){var a=this.gl,c=d.WebGLUtils.compileProgram(a,this.vertexSrc,this.fragmentSrc);a.useProgram(c);this.projectionVector=a.getUniformLocation(c,"projectionVector");this.offsetVector=a.getUniformLocation(c,"offsetVector");this.tintColor=a.getUniformLocation(c,"tint");this.aVertexPosition=a.getAttribLocation(c,"aVertexPosition");this.colorAttribute=a.getAttribLocation(c,"aColor");this.attributes=[this.aVertexPosition,this.colorAttribute];this.translationMatrix=
a.getUniformLocation(c,"translationMatrix");this.alpha=a.getUniformLocation(c,"alpha");this.program=c};return e}();d.PrimitiveShader=f;f.prototype.__class__="egret.PrimitiveShader"})(egret||(egret={}));
(function(d){var f=function(){function e(a){this.gl=null;this.maxAttibs=10;this.attribState=[];this.tempAttribState=[];this.blurShader=this.colorTransformShader=this.primitiveShader=this.defaultShader=this.currentShader=null;for(var b=0;b<this.maxAttibs;b++)this.attribState[b]=!1;this.setContext(a)}var a=e.prototype;a.setContext=function(a){this.gl=a;this.primitiveShader=new d.PrimitiveShader(a);this.defaultShader=new d.EgretShader(a);this.colorTransformShader=new d.ColorTransformShader(a);this.blurShader=
new d.BlurShader(a);this.activateShader(this.defaultShader)};a.activateShader=function(a){this.currentShader!=a&&(this.gl.useProgram(a.program),this.setAttribs(a.attributes),this.currentShader=a)};a.setAttribs=function(a){var b,d;d=this.tempAttribState.length;for(b=0;b<d;b++)this.tempAttribState[b]=!1;d=a.length;for(b=0;b<d;b++)this.tempAttribState[a[b]]=!0;a=this.gl;d=this.attribState.length;for(b=0;b<d;b++)this.attribState[b]!==this.tempAttribState[b]&&(this.attribState[b]=this.tempAttribState[b],
this.tempAttribState[b]?a.enableVertexAttribArray(b):a.disableVertexAttribArray(b))};return e}();d.WebGLShaderManager=f;f.prototype.__class__="egret.WebGLShaderManager"})(egret||(egret={}));
(function(d){var f=function(e){function a(){e.call(this);d.Texture.createBitmapData=d.Texture._createBitmapDataForCanvasAndWebGl}__extends(a,e);var c=a.prototype;c.initVersion=function(a){this._versionCtr=a};c.proceed=function(a){function c(){if(4==f.readyState)if(f.status!=a._status&&(a._status=f.status,d.HTTPStatusEvent.dispatchHTTPStatusEvent(a,f.status)),400<=f.status||0==f.status)d.IOErrorEvent.dispatchIOErrorEvent(a);else{switch(a.dataFormat){case d.URLLoaderDataFormat.TEXT:a.data=f.responseText;
break;case d.URLLoaderDataFormat.VARIABLES:a.data=new d.URLVariables(f.responseText);break;case d.URLLoaderDataFormat.BINARY:a.data=f.response;break;default:a.data=f.responseText}d.__callAsync(d.Event.dispatchEvent,d.Event,a,d.Event.COMPLETE)}}if(a.dataFormat==d.URLLoaderDataFormat.TEXTURE)this.loadTexture(a);else if(a.dataFormat==d.URLLoaderDataFormat.SOUND)d.Html5Capatibility._audioType==d.AudioType.WEB_AUDIO?this.loadWebAudio(a):d.Html5Capatibility._audioType==d.AudioType.QQ_AUDIO?this.loadQQAudio(a):
this.loadSound(a);else{var e=a._request,f=this.getXHR();f.onreadystatechange=c;var p=this.getVirtualUrl(d.NetContext._getUrl(e));f.open(e.method,p,!0);this.setResponseType(f,a.dataFormat);e.method!=d.URLRequestMethod.GET&&e.data?e.data instanceof d.URLVariables?(f.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),f.send(e.data.toString())):(f.setRequestHeader("Content-Type","multipart/form-data"),f.send(e.data)):f.send()}};c.loadSound=function(a){function c(f){d.clearTimeout(p.__timeoutId);
p.removeEventListener("canplaythrough",c,!1);p.removeEventListener("error",e,!1);f=new d.Html5Audio;f._setAudio(p);var k=new d.Sound;k._setAudio(f);a.data=k;d.__callAsync(d.Event.dispatchEvent,d.Event,a,d.Event.COMPLETE)}function e(f){d.clearTimeout(p.__timeoutId);p.removeEventListener("canplaythrough",c,!1);p.removeEventListener("error",e,!1);d.IOErrorEvent.dispatchIOErrorEvent(a)}var f=this.getVirtualUrl(a._request.url),p=new Audio(f);p.__timeoutId=d.setTimeout(c,this,100);p.addEventListener("canplaythrough",
c,!1);p.addEventListener("error",e,!1);p.load()};c.loadQQAudio=function(a){var c=d.Html5Capatibility._QQRootPath+this.getVirtualUrl(a._request.url);console.log("loadQQAudio");QZAppExternal.preloadSound(function(e){if(0==e.code){e=new d.QQAudio;e._setPath(c);var f=new d.Sound;f._setAudio(e);a.data=f;d.__callAsync(d.Event.dispatchEvent,d.Event,a,d.Event.COMPLETE)}else d.IOErrorEvent.dispatchIOErrorEvent(a)},{bid:-1,url:c,refresh:1})};c.loadWebAudio=function(a){var c=this.getVirtualUrl(a._request.url),
e=new XMLHttpRequest;e.open("GET",c,!0);e.responseType="arraybuffer";console.log("loadWebAudio");e.onload=function(){var f=new d.WebAudio;f._setArrayBuffer(e.response,c,function(){var c=new d.Sound;c._setAudio(f);a.data=c;d.__callAsync(d.Event.dispatchEvent,d.Event,a,d.Event.COMPLETE)})};e.send()};c.getXHR=function(){return window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP")};c.setResponseType=function(a,c){switch(c){case d.URLLoaderDataFormat.TEXT:case d.URLLoaderDataFormat.VARIABLES:a.responseType=
d.URLLoaderDataFormat.TEXT;break;case d.URLLoaderDataFormat.BINARY:a.responseType="arraybuffer";break;default:a.responseType=c}};c.loadTexture=function(a){var c=this.getVirtualUrl(a._request.url);d.Browser.getInstance().webPSupport&&0!=c.indexOf("http:")&&(-1!=c.indexOf(".png")?c=c.replace(".png",".webp"):-1!=c.indexOf(".jpg")&&(c=c.replace(".jpg",".webp")));d.Texture.createBitmapData(c,function(c,e){if(0!=c)d.IOErrorEvent.dispatchIOErrorEvent(a);else{var f=new d.Texture;f._setBitmapData(e);a.data=
f;d.__callAsync(d.Event.dispatchEvent,d.Event,a,d.Event.COMPLETE)}})};c.getVirtualUrl=function(a){return this._versionCtr?this._versionCtr.getVirtualUrl(a):a};return a}(d.NetContext);d.HTML5NetContext=f;f.prototype.__class__="egret.HTML5NetContext"})(egret||(egret={}));
(function(d){var f=function(e){function a(){e.call(this);this._isTouchDown=!1;this.rootDiv=null;this.rootDiv=document.getElementById(d.StageDelegate.canvas_div_name);if(!this.rootDiv){var a=document.getElementById(d.StageDelegate.egret_root_div);this.rootDiv=d.Browser.getInstance().$new("div");this.rootDiv.id=d.StageDelegate.canvas_div_name;a.appendChild(this.rootDiv)}}__extends(a,e);var c=a.prototype;c.prevent=function(a){a.stopPropagation();!0==a.isScroll||d.HTMLInput.getInstance().isInputOn()||
a.preventDefault()};c.run=function(){var a=this;window.navigator.msPointerEnabled?(this.rootDiv.addEventListener("MSPointerDown",function(c){a._onTouchBegin(c);a.prevent(c)},!1),this.rootDiv.addEventListener("MSPointerMove",function(c){a._onTouchMove(c);a.prevent(c)},!1),this.rootDiv.addEventListener("MSPointerUp",function(c){a._onTouchEnd(c);a.prevent(c)},!1)):d.MainContext.deviceType==d.MainContext.DEVICE_MOBILE?this.addTouchListener():d.MainContext.deviceType==d.MainContext.DEVICE_PC&&(this.addTouchListener(),
this.addMouseListener());window.addEventListener("mousedown",function(c){a.inOutOfCanvas(c)?a.dispatchLeaveStageEvent():a._isTouchDown=!0});window.addEventListener("mouseup",function(c){a._isTouchDown&&(a.inOutOfCanvas(c)?a.dispatchLeaveStageEvent():a._onTouchEnd(c));a._isTouchDown=!1})};c.addMouseListener=function(){var a=this;this.rootDiv.addEventListener("mousedown",function(c){a._onTouchBegin(c)});this.rootDiv.addEventListener("mousemove",function(c){a._onTouchMove(c)});this.rootDiv.addEventListener("mouseup",
function(c){a._onTouchEnd(c)})};c.addTouchListener=function(){var a=this;this.rootDiv.addEventListener("touchstart",function(c){for(var d=c.changedTouches.length,e=0;e<d;e++)a._onTouchBegin(c.changedTouches[e]);a.prevent(c)},!1);this.rootDiv.addEventListener("touchmove",function(c){for(var d=c.changedTouches.length,e=0;e<d;e++)a._onTouchMove(c.changedTouches[e]);a.prevent(c)},!1);this.rootDiv.addEventListener("touchend",function(c){for(var d=c.changedTouches.length,e=0;e<d;e++)a._onTouchEnd(c.changedTouches[e]);
a.prevent(c)},!1);this.rootDiv.addEventListener("touchcancel",function(c){for(var d=c.changedTouches.length,e=0;e<d;e++)a._onTouchEnd(c.changedTouches[e]);a.prevent(c)},!1)};c.inOutOfCanvas=function(a){var c=this.getLocation(this.rootDiv,a);a=c.x;var c=c.y,e=d.MainContext.instance.stage;return 0>a||0>c||a>e.stageWidth||c>e.stageHeight?!0:!1};c.dispatchLeaveStageEvent=function(){this.touchingIdentifiers.length=0;d.MainContext.instance.stage.dispatchEventWith(d.Event.LEAVE_STAGE)};c._onTouchBegin=function(a){var c=
this.getLocation(this.rootDiv,a),d=-1;a.hasOwnProperty("identifier")&&(d=a.identifier);this.onTouchBegan(c.x,c.y,d)};c._onTouchMove=function(a){var c=this.getLocation(this.rootDiv,a),d=-1;a.hasOwnProperty("identifier")&&(d=a.identifier);this.onTouchMove(c.x,c.y,d)};c._onTouchEnd=function(a){var c=this.getLocation(this.rootDiv,a),d=-1;a.hasOwnProperty("identifier")&&(d=a.identifier);this.onTouchEnd(c.x,c.y,d)};c.getLocation=function(a,c){var e=document.documentElement,f=window,p,g;"function"===typeof a.getBoundingClientRect?
(g=a.getBoundingClientRect(),p=g.left,g=g.top):g=p=0;p+=f.pageXOffset-e.clientLeft;g+=f.pageYOffset-e.clientTop;null!=c.pageX?(e=c.pageX,f=c.pageY):(p-=document.body.scrollLeft,g-=document.body.scrollTop,e=c.clientX,f=c.clientY);var k=d.Point.identity;k.x=(e-p)/d.StageDelegate.getInstance().getScaleX();k.y=(f-g)/d.StageDelegate.getInstance().getScaleY();return k};return a}(d.TouchContext);d.HTML5TouchContext=f;f.prototype.__class__="egret.HTML5TouchContext"})(egret||(egret={}));
(function(d){var f=function(a){function c(){a.call(this);this._isNeedShow=!1;this.inputDiv=this.inputElement=null;this._gscaleY=this._gscaleX=0;this._isNeesHide=!1;this.textValue="";this._styleInfoes={};e.getInstance()}__extends(c,a);var b=c.prototype;b._initElement=function(a,b,c,e){var f=d.StageDelegate.getInstance().getScaleX(),k=d.StageDelegate.getInstance().getScaleY();this.inputDiv.style.left=a*f+"px";this._textfield._TF_Props_._multiline?(this.inputDiv.style.top=b*k+"px",this.inputElement.style.top=
-this._textfield._TF_Props_._lineSpacing/2+"px"):(this.inputDiv.style.top=b*k+"px",this.inputElement.style.top="0px");this._gscaleX=f*c;this._gscaleY=k*e};b._show=function(a,b,c,d){this._multiline=a;e.getInstance().isCurrentStageText(this)?this.inputElement.onblur=null:(this.inputElement=e.getInstance().getInputElement(this),this.inputDiv=e.getInstance()._inputDIV);this._isNeedShow=e.getInstance()._needShow=!0};b.onBlurHandler=function(){e.getInstance().clearInputElement();window.scrollTo(0,0)};b.executeShow=
function(){this.inputElement.value=this._getText();null==this.inputElement.onblur&&(this.inputElement.onblur=this.onBlurHandler);this._resetStageText();0<this._textfield._TF_Props_._maxChars?this.inputElement.setAttribute("maxlength",this._textfield._TF_Props_._maxChars):this.inputElement.removeAttribute("maxlength");this.inputElement.selectionStart=this.inputElement.value.length;this.inputElement.selectionEnd=this.inputElement.value.length;this.inputElement.focus()};b._hide=function(){this._isNeesHide=
!0;0<=d.Browser.getInstance().getUserAgent().indexOf("ios")&&e.getInstance().disconnectStageText(this)};b._getText=function(){this.textValue||(this.textValue="");return this.textValue};b._setText=function(a){this.textValue=a;this.resetText()};b.resetText=function(){this.inputElement&&(this.inputElement.value=this.textValue)};b.$onBlur=function(){d.Html5Capatibility._System_OS==d.SystemOSType.WPHONE&&d.Event.dispatchEvent(this,"updateText",!1)};b._onInput=function(){if(d.Html5Capatibility._System_OS==
d.SystemOSType.WPHONE){var a=this._textfield._TF_Props_;null==a._restrictAnd&&null==a._restrictNot&&(this.textValue=this.inputElement.value,d.Event.dispatchEvent(this,"updateText",!1),this._textfield._getLinesArr(),this.setAreaHeight())}else this.inputElement.selectionStart==this.inputElement.selectionEnd&&(this.textValue=this.inputElement.value,d.Event.dispatchEvent(this,"updateText",!1),this._textfield._getLinesArr(),this.setAreaHeight())};b.setAreaHeight=function(){var a=this._textfield;if(a.multiline){var b=
d.TextFieldUtils._getTextHeight(a);if(a.height<b)this.setElementStyle("height",(a.height+a.lineSpacing)*this._gscaleY+"px"),this.setElementStyle("padding","0px");else{this.setElementStyle("height",(b+a.lineSpacing)*this._gscaleY+"px");var b=(a.height-b)*this._gscaleY,c=d.TextFieldUtils._getValign(a),c=b*c;this.setElementStyle("padding",c+"px 0px "+(b-c)+"px 0px")}this.setElementStyle("lineHeight",(a.size+a.lineSpacing)*this._gscaleY+"px")}};b._onClickHandler=function(a){this._isNeedShow&&(a.stopImmediatePropagation(),
this._isNeedShow=!1,this.executeShow(),this.dispatchEvent(new d.Event("focus")))};b._onDisconnect=function(){this.inputElement=null;this.dispatchEvent(new d.Event("blur"))};b.setElementStyle=function(a,b){this.inputElement&&this._styleInfoes[a]!=b&&(this.inputElement.style[a]=b)};b._removeInput=function(){this.inputElement&&e.getInstance().disconnectStageText(this)};b._resetStageText=function(){if(this.inputElement){var a=this._textfield,b=a._TF_Props_;this.setElementStyle("fontFamily",b._fontFamily);
this.setElementStyle("fontStyle",b._italic?"italic":"normal");this.setElementStyle("fontWeight",b._bold?"bold":"normal");this.setElementStyle("textAlign",b._textAlign);this.setElementStyle("fontSize",b._size*this._gscaleY+"px");this.setElementStyle("color",b._textColorString);this.setElementStyle("width",a._getSize(d.Rectangle.identity).width*this._gscaleX+"px");this.setElementStyle("verticalAlign",b._verticalAlign);if(b._multiline)this.setAreaHeight();else if(this.setElementStyle("lineHeight",a.size*
this._gscaleY+"px"),a.height<a.size)this.setElementStyle("height",a.height*this._gscaleY+"px"),this.setElementStyle("padding","0px");else{this.setElementStyle("height",a.size*this._gscaleY+"px");var b=(a.height-a.size)*this._gscaleY,c=d.TextFieldUtils._getValign(a),c=b*c;this.setElementStyle("padding",c+"px 0px "+(b-c)+"px 0px")}this.inputDiv.style.clip="rect(0px "+a.width*this._gscaleX+"px "+a.height*this._gscaleY+"px 0px)";this.inputDiv.style.height=a.height*this._gscaleY+"px";this.inputDiv.style.width=
a.width*this._gscaleX+"px"}};return c}(d.StageText);d.HTML5StageText=f;f.prototype.__class__="egret.HTML5StageText";var e=function(){function a(){this._needShow=!1}var c=a.prototype;c.isInputOn=function(){return null!=this._stageText};c.isCurrentStageText=function(a){return this._stageText==a};c.initValue=function(a){a.style.position="absolute";a.style.left="0px";a.style.top="0px";a.style.border="none";a.style.padding="0"};c._initStageDelegateDiv=function(){var b=this,c=d.Browser.getInstance().$("#StageDelegateDiv");
c||(c=d.Browser.getInstance().$new("div"),c.id="StageDelegateDiv",document.getElementById(d.StageDelegate.egret_root_div).appendChild(c),b.initValue(c),c.style.width="0px",c.style.height="0px",b._inputDIV=d.Browser.getInstance().$new("div"),b.initValue(b._inputDIV),b._inputDIV.style.width="0px",b._inputDIV.style.height="0px",b._inputDIV.style.left="0px",b._inputDIV.style.top="-100px",b._inputDIV.style[d.Browser.getInstance().getTrans("transformOrigin")]="0% 0% 0px",c.appendChild(b._inputDIV),document.getElementById(d.StageDelegate.canvas_div_name).addEventListener("click",
function(c){b._needShow?(b._needShow=!1,d.MainContext.instance.stage._changeSizeDispatchFlag=!1,b._stageText._onClickHandler(c),a.getInstance().show()):b._inputElement&&(b.clearInputElement(),b._inputElement.blur(),b._inputElement=null)}),b.initInputElement(!0),b.initInputElement(!1))};c.initInputElement=function(a){var c=this;a?(a=document.createElement("textarea"),a.style.resize="none",c._multiElement=a,a.id="egretTextarea"):(a=document.createElement("input"),c._simpleElement=a,a.id="egretInput");
a.type="text";c._inputDIV.appendChild(a);a.setAttribute("tabindex","-1");a.style.width="1px";a.style.height="12px";c.initValue(a);a.style.outline="thin";a.style.background="none";a.style.overflow="hidden";a.style.wordBreak="break-all";a.style.opacity=0;a.oninput=function(){c._stageText&&c._stageText._onInput()}};c.show=function(){var a=this._inputElement;d.__callAsync(function(){a.style.opacity=1},this)};c.disconnectStageText=function(a){if(null==this._stageText||this._stageText==a)this.clearInputElement(),
this._inputElement&&this._inputElement.blur()};c.clearInputElement=function(){this._inputElement&&(this._inputElement.value="",this._inputElement.onblur=null,this._inputElement.style.width="1px",this._inputElement.style.height="12px",this._inputElement.style.left="0px",this._inputElement.style.top="0px",this._inputElement.style.opacity=0,(this._simpleElement==this._inputElement?this._multiElement:this._simpleElement).style.display="block",this._inputDIV.style.left="0px",this._inputDIV.style.top="-100px",
this._inputDIV.style.height="0px",this._inputDIV.style.width="0px");this._stageText&&(this._stageText._onDisconnect(),this._stageText=null);d.MainContext.instance.stage._changeSizeDispatchFlag=!0};c.getInputElement=function(a){this.clearInputElement();this._stageText=a;this._inputElement=this._stageText._multiline?this._multiElement:this._simpleElement;(this._simpleElement==this._inputElement?this._multiElement:this._simpleElement).style.display="none";return this._inputElement};a.getInstance=function(){null==
a._instance&&(a._instance=new d.HTMLInput);return a._instance};return a}();d.HTMLInput=e;e.prototype.__class__="egret.HTMLInput"})(egret||(egret={}));egret.StageText.create=function(){egret.HTMLInput.getInstance()._initStageDelegateDiv();return new egret.HTML5StageText};
(function(d){var f=function(){function e(){var a=this;this._loop=!1;this.func=function(b){a._audio.removeEventListener("ended",a.func);a._onEndedCall&&a._onEndedCall.call(null,b);a.clear()};this.paused=!0;this._listeners=[];this._onEndedCall=null;this._volume=1;this._startTime=0}var a=e.prototype;a._play=function(a){this.removeListeners();d.Html5Capatibility._audioMustLoad&&this._audio.load();this.paused=!1;this._audio.autoplay=!0;this._audio.volume=this._volume;this._audio.removeEventListener("ended",
this.func);this._audio.addEventListener("ended",this.func);this.initStart();try{this._audio.currentTime=this._startTime}catch(b){}finally{this._audio.play()}};a.clear=function(){try{this._audio.pause()}catch(a){}finally{this.removeListeners(),this._loop&&!this.paused&&this._play()}};a._pause=function(){this.paused=!0;this._audio.pause()};a._load=function(){this._audio.load()};a._setAudio=function(a){this._audio=a};a.initStart=function(){for(var a=0;a<this._listeners.length;a++){var b=this._listeners[a];
this._audio.addEventListener(b.type,b.listener,b.useCapture)}};a._addEventListener=function(a,b,d){void 0===d&&(d=!1);"ended"==a?this._onEndedCall=b:(this._listeners.push({type:a,listener:b,useCapture:d}),this._audio&&this._audio.addEventListener(a,b,d))};a.removeListeners=function(){for(var a=0;a<this._listeners.length;a++){var b=this._listeners[a];this._audio&&this._audio.removeEventListener(b.type,b.listener,b.useCapture)}};a._removeEventListener=function(a,b,d){void 0===d&&(d=!1);if("ended"==
a)this._onEndedCall=null;else for(var e=0;e<this._listeners.length;e++){var f=this._listeners[e];if(f.listener==b&&f.useCapture==d&&f.type==a){this._listeners.splice(e,1);this._audio&&this._audio.removeEventListener(a,b,d);break}}};a._preload=function(a,b,e){void 0===b&&(b=null);void 0===e&&(e=null);d.callLater(b,e)};a._destroy=function(){};a._getVolume=function(){return this._volume};a._setVolume=function(a){this._volume=Math.max(0,Math.min(a,1));this._audio.volume=this._volume};a._setLoop=function(a){this._loop=
a};a._getCurrentTime=function(){return this._audio.currentTime};a._setCurrentTime=function(a){this._startTime=a};return e}();d.Html5Audio=f;f.prototype.__class__="egret.Html5Audio"})(egret||(egret={}));
(function(d){var f=function(){function e(){this.context=e.ctx;this.bufferSource=null;this.paused=!0;this._loop=!1;this._listeners=[];this._onEndedCall=null;this._volume=1;this._currentTime=this._startTime=0;this.gain=e.ctx.createGain?e.ctx.createGain():e.ctx.createGainNode()}var a=e.prototype;e.decodeAudios=function(){if(!(0>=e.decodeArr.length||e.isDecoding)){e.isDecoding=!0;var a=e.decodeArr.shift();e.ctx.decodeAudioData(a.buffer,function(b){a.self.audioBuffer=b;a.callback&&a.callback();e.isDecoding=
!1;e.decodeAudios()},function(){alert(d.getString(1034,a.url));a.callback&&a.callback();e.isDecoding=!1;e.decodeAudios()})}};a._play=function(a){var b=this;this.bufferSource&&(this.bufferSource.onended=null,this.removeListeners(),this.bufferSource=null);a=this.context;var d=this.gain,e=a.createBufferSource();this.bufferSource=e;this.addListeners();e.buffer=this.audioBuffer;e.connect(d);d.connect(a.destination);e.onended=function(a){b.clear();b._onEndedCall&&b._onEndedCall.call(null,a);b._loop&&!b.paused&&
b._play()};this.paused=!1;this._startTime=Date.now();this.gain.gain.value=this._volume;e.start(0,this._currentTime);this._currentTime=0};a.clear=function(){if(this.bufferSource){this.removeListeners();var a=this.bufferSource;a.stop?a.stop(0):a.noteOff(0);this.bufferSource.disconnect();this.bufferSource=null}};a.addListeners=function(){for(var a=0;a<this._listeners.length;a++){var b=this._listeners[a];this.bufferSource.addEventListener(b.type,b.listener,b.useCapture)}};a.removeListeners=function(){for(var a=
0;a<this._listeners.length;a++){var b=this._listeners[a];this.bufferSource.removeEventListener(b.type,b.listener,b.useCapture)}};a._pause=function(){this.paused=!0;this.clear()};a._addEventListener=function(a,b,d){void 0===d&&(d=!1);"ended"==a?this._onEndedCall=b:(this._listeners.push({type:a,listener:b,useCapture:d}),this.bufferSource&&this.bufferSource.addEventListener(a,b,d))};a._removeEventListener=function(a,b,d){void 0===d&&(d=!1);if("ended"==a)this._onEndedCall=null;else for(var e=0;e<this._listeners.length;e++){var f=
this._listeners[e];if(f.listener==b&&f.useCapture==d&&f.type==a){this._listeners.splice(e,1);this.bufferSource&&this.bufferSource.removeEventListener(a,b,d);break}}};a._load=function(){this._setArrayBuffer(this._arrayBuffer,this._url,null)};a._setArrayBuffer=function(a,b,d){this._url=b;this._arrayBuffer=a;e.decodeArr.push({buffer:a,callback:d,self:this,url:b});e.decodeAudios()};a._preload=function(a,b,e){void 0===b&&(b=null);void 0===e&&(e=null);d.callLater(b,e)};a._getVolume=function(){return this._volume};
a._setVolume=function(a){this._volume=a;this.gain.gain.value=a};a._setLoop=function(a){this._loop=a};a._getCurrentTime=function(){return this.bufferSource?(Date.now()-this._startTime)/1E3:0};a._setCurrentTime=function(a){this._currentTime=a};a._destroy=function(){};e.canUseWebAudio=window.AudioContext||window.webkitAudioContext||window.mozAudioContext;e.ctx=e.canUseWebAudio?new (window.AudioContext||window.webkitAudioContext||window.mozAudioContext):void 0;e.decodeArr=[];e.isDecoding=!1;return e}();
d.WebAudio=f;f.prototype.__class__="egret.WebAudio"})(egret||(egret={}));
(function(d){var f=function(){function e(){this._loop=!1;this._currentTime=0}var a=e.prototype;a._play=function(a){this._type=a;a==d.Sound.EFFECT?QZAppExternal.playLocalSound(function(a){},{bid:-1,url:this._path,loop:this._loop?-1:0}):QZAppExternal.playLocalBackSound({bid:-1,url:this._path,loop:this._loop?-1:0})};a._pause=function(){this._type==d.Sound.EFFECT?QZAppExternal.stopSound():QZAppExternal.stopBackSound()};a._addEventListener=function(a,b,d){};a._removeEventListener=function(a,b,d){};a._load=
function(){};a._preload=function(a,b,e){void 0===b&&(b=null);void 0===e&&(e=null);d.callLater(b,e)};a._setPath=function(a){this._path=a};a._getVolume=function(){return 1};a._setVolume=function(a){};a._setLoop=function(a){this._loop=a};a._getCurrentTime=function(){return 0};a._setCurrentTime=function(a){this._currentTime=a};a._destroy=function(){};return e}();d.QQAudio=f;f.prototype.__class__="egret.QQAudio"})(egret||(egret={}));
(function(d){(function(f){function e(a,b){var e=document.createElement("canvas"),f=d.RendererContext.createRendererContext(e),u=a._textureWidth,p=a._textureHeight;null==b&&(b=new d.Rectangle,b.x=0,b.y=0,b.width=u,b.height=p);b.x=Math.min(b.x,u-1);b.y=Math.min(b.y,p-1);b.width=Math.min(b.width,u-b.x);b.height=Math.min(b.height,p-b.y);var g=b.width,k=b.height;e.width=g;e.height=k;e.style.width=g+"px";e.style.height=k+"px";var g={_texture_to_render:a},k=d.MainContext.instance.rendererContext._texture_scale_factor,
l=a._offsetX,m=a._offsetY,n=a._bitmapWidth||u,q=a._bitmapHeight||p,l=Math.round(l*k),m=Math.round(m*k);d.RenderFilter.getInstance().drawImage(f,g,a._bitmapX+b.x/k,a._bitmapY+b.y/k,n*b.width/u,q*b.height/p,l,m,b.width,b.height);return e}function a(a,b){try{return e(this,b).toDataURL(a)}catch(f){return d.$error(1033),null}}d.Texture.prototype.toDataURL=a;d.Texture.prototype.saveToFile=function(c,b,d){c=a.call(this,c,d);null!=c&&(d=c.replace(/^data:image[^;]*/,"data:image/octet-stream"),c=document.createElement("a"),
c.download=b,c.href=d,b=document.createEvent("HTMLEvents"),b.initEvent("click",!1,!1),c.dispatchEvent(b))};d.Texture.prototype.getPixel32=function(a,b){if(this._bitmapData&&this._bitmapData.getContext){var f=this._bitmapData.getContext("2d").getImageData(a-this._offsetX,b-this._offsetY,1,1);return f.data}f=e(this,new d.Rectangle(a-1,b-1,3,3)).getContext("2d").getImageData(1,1,1,1);return f.data}})(d.web||(d.web={}))})(egret||(egret={}));
(function(d){var f=function(){function a(){}a.QQ_AUDIO=1;a.WEB_AUDIO=2;a.HTML5_AUDIO=3;return a}();d.AudioType=f;f.prototype.__class__="egret.AudioType";var e=function(){function a(){}a.WPHONE=1;a.IOS=2;a.ADNROID=3;return a}();d.SystemOSType=e;e.prototype.__class__="egret.SystemOSType";var a=function(a){function b(){a.call(this)}__extends(b,a);b._init=function(){var a=navigator.userAgent.toLowerCase();b.ua=a;b._canUseBlob=!1;b._audioType=f.HTML5_AUDIO;b._AudioClass=d.Html5Audio;b._audioMustLoad=!0;
if(0<=a.indexOf("windows phone"))b._System_OS=e.WPHONE,b._audioMustLoad=!1;else if(0<=a.indexOf("android"))b._System_OS=e.ADNROID,0<=a.indexOf("ucbrowser")&&(b._audioMustLoad=!1),window.hasOwnProperty("QZAppExternal")&&0<=a.indexOf("qzone")&&(b._AudioClass=d.QQAudio,b._audioType=f.QQ_AUDIO,(a=document.getElementsByTagName("base"))&&0<a.length?b._QQRootPath=a[0].baseURI:(a=window.location.href.indexOf("?"),-1==a&&(a=window.location.href.length),a=window.location.href.substring(0,a),a=a.substring(0,
a.lastIndexOf("/")),b._QQRootPath=a+"/"));else if(0<=a.indexOf("iphone")||0<=a.indexOf("ipad")||0<=a.indexOf("ipod"))b._System_OS=e.IOS,7<=b.getIOSVersion()&&(b._canUseBlob=!0,b._AudioClass=d.WebAudio,b._audioType=f.WEB_AUDIO);window.URL||window.webkitURL||(b._canUseBlob=!1);window.AudioContext||window.webkitAudioContext||window.mozAudioContext||b._audioType!=f.WEB_AUDIO||(b._audioType=f.HTML5_AUDIO,b._AudioClass=d.Html5Audio)};b.getIOSVersion=function(){var a=b.ua.toLowerCase().match(/cpu [^\d]*\d.*like mac os x/)[0];
return parseInt(a.match(/\d(_\d)*/)[0])||0};b._canUseBlob=!1;b._audioType=0;b._audioMustLoad=!1;b._QQRootPath="";b._System_OS=0;b.ua="";return b}(d.HashObject);d.Html5Capatibility=a;a.prototype.__class__="egret.Html5Capatibility";a._init()})(egret||(egret={}));
(function(d){var f=function(e){function a(){e.call(this);this.localVersionDataPath="localVersion.manifest";this.localVersionData=null;this.changeVersionDataPath="version.manifest";this.changeVersionData=null;this.baseVersionDataPath="base.manifest";this.baseVersionData=null;this.localVersionCodePath="localCode.manifest";this.serverVersionCodePath="code.manifest";this._call=this._load=null}__extends(a,e);var c=a.prototype;c.fetchVersion=function(){this._load=new d.NativeResourceLoader;this._load.addEventListener(d.IOErrorEvent.IO_ERROR,
this.loadError,this);this._load.addEventListener(d.Event.COMPLETE,this.fileLoadComplete,this);this.initLocalVersionData()};c.initLocalVersionData=function(){var a=this.getData("appVersion.manifest",!0);if(a){if(1==a.debug){this.baseVersionData=null;if(a=this.getData(this.localVersionDataPath,!1))for(var c in a)this.deleteFile(c);this.deleteFile(this.localVersionDataPath);this.deleteFile(this.localVersionCodePath);this.loadOver();return}var d=this.getData("appVersion.manifest",!1);if(null==d||d.version!=
a.version){this.localVersionData=this.getData(this.localVersionDataPath,!0);null==this.localVersionData&&(this.localVersionData={});this.deleteFile(this.localVersionCodePath);this.save("appVersion.manifest",JSON.stringify(a));if(a=this.getData(this.localVersionCodePath,!1))for(c in a)a[c]!=this.localVersionData[c]&&this.deleteFile(c);else a={};for(c in this.localVersionData)a[c]!=this.localVersionData[c]&&this.deleteFile(c);this.save(this.localVersionDataPath,JSON.stringify(this.localVersionData));
this.loadCodeVersion();return}}this.localVersionData=this.getLocalData(this.localVersionDataPath);null==this.localVersionData&&(this.localVersionData=this.getLocalData(this.baseVersionDataPath),null==this.localVersionData&&(this.localVersionData={}),this.save(this.localVersionDataPath,JSON.stringify(this.localVersionData)));this.loadCodeVersion()};c.deleteFile=function(a){egret_native.deleteUpdateFile&&egret_native.deleteUpdateFile(a)};c.loadCodeVersion=function(){var a=1;this.newCode=1;var c=this.getLocalData(this.localVersionCodePath);
null!=c&&(a=c.code);c=this.getLocalData(this.serverVersionCodePath);null!=c&&(this.newCode=c.code);this.loadBaseVersion(a!=this.newCode)};c.loadBaseVersion=function(a){this.baseVersionData=this.getLocalData(this.baseVersionDataPath);this.changeVersionData=this.getLocalData(this.changeVersionDataPath);var c=this;null==c.baseVersionData||a?c.loadFile(c.baseVersionDataPath,function(){c.baseVersionData=c.getLocalData(c.baseVersionDataPath);c.loadBaseOver()}):c.loadBaseOver()};c.loadBaseOver=function(){this.save(this.localVersionCodePath,
JSON.stringify({code:this.newCode}));this.loadOver()};c.loadFile=function(a,c){void 0===c&&(c=null);this._call=c;this._load.load(a,1E3)};c.fileLoadComplete=function(a){this._call&&this._call()};c.loadError=function(a){this._load.removeEventListener(d.IOErrorEvent.IO_ERROR,this.loadError,this);this._load.removeEventListener(d.Event.COMPLETE,this.fileLoadComplete,this);this.dispatchEvent(a)};c.loadOver=function(){this._load.removeEventListener(d.IOErrorEvent.IO_ERROR,this.loadError,this);this._load.removeEventListener(d.Event.COMPLETE,
this.fileLoadComplete,this);this.dispatchEvent(new d.Event(d.Event.COMPLETE))};c.save=function(a,c){egret_native.writeFileSync?egret_native.writeFileSync(a,c):egret_native.saveRecord&&egret_native.saveRecord(a,c)};c.getData=function(a,c){if(egret_native.readUpdateFileSync&&egret_native.readResourceFileSync){var d=c?egret_native.readResourceFileSync(a):egret_native.readUpdateFileSync(a);return null!=d?JSON.parse(d):null}return this.getLocalDataByOld(a)};c.getLocalData=function(a){if(egret_native.readUpdateFileSync&&
egret_native.readResourceFileSync){var c=egret_native.readUpdateFileSync(a);if(null!=c)return JSON.parse(c);c=egret_native.readResourceFileSync(a);return null!=c?JSON.parse(c):null}return this.getLocalDataByOld(a)};c.getLocalDataByOld=function(a){var c=null;egret_native.isRecordExists(a)?(a=egret_native.loadRecord(a),c=JSON.parse(a)):egret_native.isFileExists(a)&&(a=egret_native.readFileSync(a),c=JSON.parse(a));return c};c.getChangeList=function(){if(!this.baseVersionData)return[];var a={},c;for(c in this.changeVersionData)1==
this.changeVersionData[c].d?delete this.baseVersionData[c]:this.baseVersionData[c]=this.changeVersionData[c];for(c in this.baseVersionData)null!=this.localVersionData[c]&&this.compareVersion(this.localVersionData,this.baseVersionData,c)||(a[c]={url:c,size:this.baseVersionData[c].s});var d=[];for(c in a)d.push(a[c]);return d};c.compareVersion=function(a,c,d){return null==a[d]||null==c[d]?!1:a[d].v==c[d].v};c.checkIsNewVersion=function(a){return this.baseVersionData?null!=this.changeVersionData[a]?
this.compareVersion(this.changeVersionData,this.localVersionData,a):null!=this.baseVersionData[a]?this.compareVersion(this.baseVersionData,this.localVersionData,a):!0:!0};c.saveVersion=function(a){if(this.baseVersionData){var c=!1;null!=this.changeVersionData[a]?this.compareVersion(this.changeVersionData,this.localVersionData,a)||(c=!0,this.localVersionData[a]=this.changeVersionData[a]):null==this.baseVersionData[a]||this.compareVersion(this.baseVersionData,this.localVersionData,a)||(c=!0,this.localVersionData[a]=
this.baseVersionData[a]);c&&this.save(this.localVersionDataPath,JSON.stringify(this.localVersionData))}};c.getVirtualUrl=function(a){return a};return a}(d.EventDispatcher);d.NativeVersionController=f;f.prototype.__class__="egret.NativeVersionController"})(egret||(egret={}));var RES;
(function(d){var f=function(d){function a(a,b,f){void 0===b&&(b=!1);void 0===f&&(f=!1);d.call(this,a,b,f);this.itemsTotal=this.itemsLoaded=0;this.groupName="";this.resItem=null}__extends(a,d);a.dispatchResourceEvent=function(c,b,d,e,f,p){void 0===d&&(d="");void 0===e&&(e=null);void 0===f&&(f=0);void 0===p&&(p=0);var g=egret.Event._getPropertyData(a);g.groupName=d;g.resItem=e;g.itemsLoaded=f;g.itemsTotal=p;egret.Event._dispatchByTarget(a,c,b,g)};a.ITEM_LOAD_ERROR="itemLoadError";a.CONFIG_COMPLETE=
"configComplete";a.CONFIG_LOAD_ERROR="configLoadError";a.GROUP_PROGRESS="groupProgress";a.GROUP_COMPLETE="groupComplete";a.GROUP_LOAD_ERROR="groupLoadError";return a}(egret.Event);d.ResourceEvent=f;f.prototype.__class__="RES.ResourceEvent"})(RES||(RES={}));
(function(d){var f=function(){function d(a,b,e){this.groupName="";this.data=null;this._loaded=!1;this.name=a;this.url=b;this.type=e}var a=d.prototype;Object.defineProperty(a,"loaded",{get:function(){return this.data?this.data.loaded:this._loaded},set:function(a){this.data&&(this.data.loaded=a);this._loaded=a},enumerable:!0,configurable:!0});a.toString=function(){return'[ResourceItem name="'+this.name+'" url="'+this.url+'" type="'+this.type+'"]'};d.TYPE_XML="xml";d.TYPE_IMAGE="image";d.TYPE_BIN="bin";
d.TYPE_TEXT="text";d.TYPE_JSON="json";d.TYPE_SHEET="sheet";d.TYPE_FONT="font";d.TYPE_SOUND="sound";return d}();d.ResourceItem=f;f.prototype.__class__="RES.ResourceItem"})(RES||(RES={}));
(function(d){var f=function(){function e(){this.keyMap={};this.groupDic={};d.configInstance=this}var a=e.prototype;a.getGroupByName=function(a){var b=[];if(!this.groupDic[a])return b;a=this.groupDic[a];for(var d=a.length,e=0;e<d;e++)b.push(this.parseResourceItem(a[e]));return b};a.getRawGroupByName=function(a){return this.groupDic[a]?this.groupDic[a]:[]};a.createGroup=function(a,b,d){void 0===d&&(d=!1);if(!d&&this.groupDic[a]||!b||0==b.length)return!1;d=this.groupDic;for(var e=[],f=b.length,p=0;p<
f;p++){var g=b[p],k=d[g];if(k)for(var g=k.length,l=0;l<g;l++){var m=k[l];-1==e.indexOf(m)&&e.push(m)}else(m=this.keyMap[g])?-1==e.indexOf(m)&&e.push(m):egret.$warn(2E3,g)}if(0==e.length)return!1;this.groupDic[a]=e;return!0};a.parseConfig=function(a,b){if(a){var d=a.resources;if(d)for(var e=d.length,f=0;f<e;f++){var p=d[f],g=p.url;g&&-1==g.indexOf("://")&&(p.url=b+g);this.addItemToKeyMap(p)}if(d=a.groups)for(e=d.length,f=0;f<e;f++){for(var g=d[f],k=[],l=g.keys.split(","),m=l.length,n=0;n<m;n++)p=l[n].trim(),
(p=this.keyMap[p])&&-1==k.indexOf(p)&&k.push(p);this.groupDic[g.name]=k}}};a.addSubkey=function(a,b){var d=this.keyMap[b];d&&!this.keyMap[a]&&(this.keyMap[a]=d)};a.addItemToKeyMap=function(a){this.keyMap[a.name]||(this.keyMap[a.name]=a);if(a.hasOwnProperty("subkeys")){var b=a.subkeys.split(",");a.subkeys=b;for(var d=b.length,e=0;e<d;e++){var f=b[e];null==this.keyMap[f]&&(this.keyMap[f]=a)}}};a.getName=function(a){return(a=this.keyMap[a])?a.name:""};a.getType=function(a){return(a=this.keyMap[a])?a.type:
""};a.getRawResourceItem=function(a){return this.keyMap[a]};a.getResourceItem=function(a){return(a=this.keyMap[a])?this.parseResourceItem(a):null};a.parseResourceItem=function(a){var b=new d.ResourceItem(a.name,a.url,a.type);b.data=a;return b};return e}();d.ResourceConfig=f;f.prototype.__class__="RES.ResourceConfig"})(RES||(RES={}));
(function(d){var f=function(e){function a(){e.call(this);this.thread=2;this.loadingCount=0;this.resInstance=this.callBack=null;this.groupTotalDic={};this.numLoadedDic={};this.itemListDic={};this.groupErrorDic={};this.retryTimesDic={};this.maxRetryTimes=3;this.failedList=[];this.priorityQueue={};this.lazyLoadList=[];this.analyzerDic={};this.queueIndex=0}__extends(a,e);var c=a.prototype;c.isGroupInLoading=function(a){return void 0!==this.itemListDic[a]};c.loadGroup=function(a,c,e){void 0===e&&(e=0);
if(!this.itemListDic[c]&&c)if(a&&0!=a.length){this.priorityQueue[e]?this.priorityQueue[e].push(c):this.priorityQueue[e]=[c];this.itemListDic[c]=a;e=a.length;for(var f=0;f<e;f++)a[f].groupName=c;this.groupTotalDic[c]=a.length;this.numLoadedDic[c]=0;this.next()}else egret.$warn(2001,c),a=new d.ResourceEvent(d.ResourceEvent.GROUP_LOAD_ERROR),a.groupName=c,this.dispatchEvent(a)};c.loadItem=function(a){this.lazyLoadList.push(a);a.groupName="";this.next()};c.next=function(){for(;this.loadingCount<this.thread;){var a=
this.getOneResourceItem();if(!a)break;this.loadingCount++;if(a.loaded)this.onItemComplete(a);else{var c=this.analyzerDic[a.type];c||(c=this.analyzerDic[a.type]=egret.Injector.getInstance(d.AnalyzerBase,a.type));c.loadFile(a,this.onItemComplete,this)}}};c.getOneResourceItem=function(){if(0<this.failedList.length)return this.failedList.shift();var a=Number.NEGATIVE_INFINITY,c;for(c in this.priorityQueue)a=Math.max(a,c);a=this.priorityQueue[a];if(!a||0==a.length)return 0==this.lazyLoadList.length?null:
this.lazyLoadList.pop();c=a.length;for(var d,e=0;e<c;e++){this.queueIndex>=c&&(this.queueIndex=0);d=this.itemListDic[a[this.queueIndex]];if(0<d.length)break;this.queueIndex++}return 0==d.length?null:d.shift()};c.onItemComplete=function(a){this.loadingCount--;var c=a.groupName;if(!a.loaded){var e=this.retryTimesDic[a.name]||1;if(e>this.maxRetryTimes)delete this.retryTimesDic[a.name],d.ResourceEvent.dispatchResourceEvent(this.resInstance,d.ResourceEvent.ITEM_LOAD_ERROR,c,a);else{this.retryTimesDic[a.name]=
e+1;this.failedList.push(a);this.next();return}}if(c){this.numLoadedDic[c]++;var e=this.numLoadedDic[c],f=this.groupTotalDic[c];a.loaded||(this.groupErrorDic[c]=!0);d.ResourceEvent.dispatchResourceEvent(this.resInstance,d.ResourceEvent.GROUP_PROGRESS,c,a,e,f);e==f&&(a=this.groupErrorDic[c],this.removeGroupName(c),delete this.groupTotalDic[c],delete this.numLoadedDic[c],delete this.itemListDic[c],delete this.groupErrorDic[c],a?d.ResourceEvent.dispatchResourceEvent(this,d.ResourceEvent.GROUP_LOAD_ERROR,
c):d.ResourceEvent.dispatchResourceEvent(this,d.ResourceEvent.GROUP_COMPLETE,c))}else this.callBack.call(this.resInstance,a);this.next()};c.removeGroupName=function(a){for(var c in this.priorityQueue){for(var d=this.priorityQueue[c],e=d.length,f=0,g=!1,e=d.length,k=0;k<e;k++){if(d[k]==a){d.splice(f,1);g=!0;break}f++}if(g){0==d.length&&delete this.priorityQueue[c];break}}};return a}(egret.EventDispatcher);d.ResourceLoader=f;f.prototype.__class__="RES.ResourceLoader"})(RES||(RES={}));
(function(d){var f=function(e){function a(){e.call(this);this.resourceConfig=null;this.resourceConfig=d.configInstance}__extends(a,e);var c=a.prototype;c.addSubkey=function(a,c){this.resourceConfig.addSubkey(a,c)};c.loadFile=function(a,c,d){};c.getRes=function(a){};c.destroyRes=function(a){return!1};a.getStringPrefix=function(a){if(!a)return"";var c=a.indexOf(".");return-1!=c?a.substring(0,c):""};a.getStringTail=function(a){if(!a)return"";var c=a.indexOf(".");return-1!=c?a.substring(c+1):""};return a}(egret.HashObject);
d.AnalyzerBase=f;f.prototype.__class__="RES.AnalyzerBase"})(RES||(RES={}));
(function(d){var f=function(d){function a(){d.call(this);this.fileDic={};this.resItemDic=[];this._dataFormat=egret.URLLoaderDataFormat.BINARY;this.recycler=new egret.Recycler}__extends(a,d);var c=a.prototype;c.loadFile=function(a,c,d){if(this.fileDic[a.name])c.call(d,a);else{var e=this.getLoader();this.resItemDic[e.hashCode]={item:a,func:c,thisObject:d};e.load(new egret.URLRequest(a.url))}};c.getLoader=function(){var a=this.recycler.pop();a||(a=new egret.URLLoader,a.addEventListener(egret.Event.COMPLETE,
this.onLoadFinish,this),a.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this));a.dataFormat=this._dataFormat;return a};c.onLoadFinish=function(a){var c=a.target,d=this.resItemDic[c.hashCode];delete this.resItemDic[c.hashCode];var e=d.item,f=d.func;e.loaded=a.type==egret.Event.COMPLETE;e.loaded&&this.analyzeData(e,c.data);this.recycler.push(c);f.call(d.thisObject,e)};c.analyzeData=function(a,c){var d=a.name;!this.fileDic[d]&&c&&(this.fileDic[d]=c)};c.getRes=function(a){return this.fileDic[a]};
c.hasRes=function(a){return null!=this.getRes(a)};c.destroyRes=function(a){return this.fileDic[a]?(this.onResourceDestroy(this.fileDic[a]),delete this.fileDic[a],!0):!1};c.onResourceDestroy=function(a){};return a}(d.AnalyzerBase);d.BinAnalyzer=f;f.prototype.__class__="RES.BinAnalyzer"})(RES||(RES={}));
(function(d){var f=function(d){function a(){d.call(this);this._dataFormat=egret.URLLoaderDataFormat.TEXTURE}__extends(a,d);var c=a.prototype;c.analyzeData=function(a,c){var d=a.name;!this.fileDic[d]&&c&&(this.fileDic[d]=c,(d=a.data)&&d.scale9grid&&(d=d.scale9grid.split(","),c.scale9Grid=new egret.Rectangle(parseInt(d[0]),parseInt(d[1]),parseInt(d[2]),parseInt(d[3]))))};c.onResourceDestroy=function(a){a.dispose()};return a}(d.BinAnalyzer);d.ImageAnalyzer=f;f.prototype.__class__="RES.ImageAnalyzer"})(RES||
(RES={}));(function(d){var f=function(d){function a(){d.call(this);this._dataFormat=egret.URLLoaderDataFormat.TEXT}__extends(a,d);a.prototype.analyzeData=function(a,b){var d=a.name;if(!this.fileDic[d]&&b)try{this.fileDic[d]=JSON.parse(b)}catch(e){egret.$warn(1017,a.url,b)}};return a}(d.BinAnalyzer);d.JsonAnalyzer=f;f.prototype.__class__="RES.JsonAnalyzer"})(RES||(RES={}));
(function(d){var f=function(d){function a(){d.call(this);this._dataFormat=egret.URLLoaderDataFormat.TEXT}__extends(a,d);return a}(d.BinAnalyzer);d.TextAnalyzer=f;f.prototype.__class__="RES.TextAnalyzer"})(RES||(RES={}));
(function(d){var f=function(e){function a(){e.call(this);this.sheetMap={};this.textureMap={};this._dataFormat=egret.URLLoaderDataFormat.TEXT}__extends(a,e);var c=a.prototype;c.getRes=function(a){var c=this.fileDic[a];c||(c=this.textureMap[a]);!c&&(c=d.AnalyzerBase.getStringPrefix(a),c=this.fileDic[c])&&(a=d.AnalyzerBase.getStringTail(a),c=c.getTexture(a));return c};c.onLoadFinish=function(a){var c=a.target,d=this.resItemDic[c.hashCode];delete this.resItemDic[c.hashCode];var e=d.item,f=d.func;e.loaded=
a.type==egret.Event.COMPLETE;if(e.loaded)if("string"==typeof c.data){if(e.loaded=!1,a=this.analyzeConfig(e,c.data)){c=e.url;e.url=a;this._dataFormat=egret.URLLoaderDataFormat.TEXTURE;this.loadFile(e,f,d.thisObject);this._dataFormat=egret.URLLoaderDataFormat.TEXT;e.url=c;return}}else this.analyzeBitmap(e,c.data);this.recycler.push(c);f.call(d.thisObject,e)};c.analyzeConfig=function(a,c){var d=a.name,e,f="";try{e=JSON.parse(c)}catch(g){egret.$warn(1017,a.url,c)}e&&(this.sheetMap[d]=e,f=this.getRelativePath(a.url,
e.file));return f};c.analyzeBitmap=function(a,c){var d=a.name;if(!this.fileDic[d]&&c){var e=this.sheetMap[d];delete this.sheetMap[d];e=this.parseSpriteSheet(c,e,a.data&&a.data.subkeys?"":d);this.fileDic[d]=e}};c.getRelativePath=function(a,c){a=a.split("\\").join("/");var d=a.lastIndexOf("/");return a=-1!=d?a.substring(0,d+1)+c:c};c.parseSpriteSheet=function(a,c,d){c=c.frames;if(!c)return null;var e=new egret.SpriteSheet(a),f=this.textureMap,g;for(g in c){var k=c[g];a=e.createTexture(g,k.x,k.y,k.w,
k.h,k.offX,k.offY,k.sourceW,k.sourceH);k.scale9grid&&(k=k.scale9grid.split(","),a.scale9Grid=new egret.Rectangle(parseInt(k[0]),parseInt(k[1]),parseInt(k[2]),parseInt(k[3])));null==f[g]&&(f[g]=a,d&&this.addSubkey(g,d))}return e};c.destroyRes=function(a){var c=this.fileDic[a];if(c){delete this.fileDic[a];for(var d in c._textureMap)this.textureMap[d]&&delete this.textureMap[d];this.onResourceDestroy(c);return!0}return!1};c.onResourceDestroy=function(a){a.dispose()};return a}(d.BinAnalyzer);d.SheetAnalyzer=
f;f.prototype.__class__="RES.SheetAnalyzer"})(RES||(RES={}));
(function(d){var f=function(d){function a(){d.call(this)}__extends(a,d);var c=a.prototype;c.analyzeConfig=function(a,c){var d=a.name,e,f="";try{e=JSON.parse(c)}catch(g){}e?f=this.getRelativePath(a.url,e.file):(e=c,f=this.getTexturePath(a.url,e));this.sheetMap[d]=e;return f};c.analyzeBitmap=function(a,c){var d=a.name;if(!this.fileDic[d]&&c){var e=this.sheetMap[d];delete this.sheetMap[d];e=new egret.BitmapFont(c,e);this.fileDic[d]=e}};c.getTexturePath=function(a,c){var d="",e=c.split("\n")[2],f=e.indexOf('file="');
-1!=f&&(e=e.substring(f+6),f=e.indexOf('"'),d=e.substring(0,f));a=a.split("\\").join("/");f=a.lastIndexOf("/");return a=-1!=f?a.substring(0,f+1)+d:d};c.onResourceDestroy=function(a){a.dispose()};return a}(d.SheetAnalyzer);d.FontAnalyzer=f;f.prototype.__class__="RES.FontAnalyzer"})(RES||(RES={}));
(function(d){var f=function(d){function a(){d.call(this);this._dataFormat=egret.URLLoaderDataFormat.SOUND}__extends(a,d);a.prototype.analyzeData=function(a,b){var d=a.name;!this.fileDic[d]&&b&&(this.fileDic[d]=b,(d=a.data)&&d.soundType?b.preload(d.soundType):b.preload(egret.Sound.EFFECT))};return a}(d.BinAnalyzer);d.SoundAnalyzer=f;f.prototype.__class__="RES.SoundAnalyzer"})(RES||(RES={}));
(function(d){var f=function(d){function a(){d.call(this);this._dataFormat=egret.URLLoaderDataFormat.TEXT}__extends(a,d);a.prototype.analyzeData=function(a,b){var d=a.name;if(!this.fileDic[d]&&b)try{var e=egret.XML.parse(b);this.fileDic[d]=e}catch(f){}};return a}(d.BinAnalyzer);d.XMLAnalyzer=f;f.prototype.__class__="RES.XMLAnalyzer"})(RES||(RES={}));
(function(d){d.loadConfig=function(a,c,b){void 0===c&&(c="");void 0===b&&(b="json");e.loadConfig(a,c,b)};d.loadGroup=function(a,c){void 0===c&&(c=0);e.loadGroup(a,c)};d.isGroupLoaded=function(a){return e.isGroupLoaded(a)};d.getGroupByName=function(a){return e.getGroupByName(a)};d.createGroup=function(a,c,b){void 0===b&&(b=!1);return e.createGroup(a,c,b)};d.hasRes=function(a){return e.hasRes(a)};d.parseConfig=function(a,c){void 0===c&&(c="");e.parseConfig(a,c)};d.getRes=function(a){return e.getRes(a)};
d.getResAsync=function(a,c,b){e.getResAsync(a,c,b)};d.getResByUrl=function(a,c,b,d){void 0===d&&(d="");e.getResByUrl(a,c,b,d)};d.destroyRes=function(a,c){return e.destroyRes(a,c)};d.setMaxLoadingThread=function(a){e.setMaxLoadingThread(a)};d.setMaxRetryTimes=function(a){e.setMaxRetryTimes(a)};d.addEventListener=function(a,c,b,d,f){void 0===d&&(d=!1);void 0===f&&(f=0);e.addEventListener(a,c,b,d,f)};d.removeEventListener=function(a,c,b,d){void 0===d&&(d=!1);e.removeEventListener(a,c,b,d)};var f=function(a){function c(){a.call(this);
this.analyzerDic={};this.configItemList=[];this.configComplete=this.callLaterFlag=!1;this.loadedGroups=[];this.groupNameList=[];this.asyncDic={};this._loadedUrlTypes={};this.init()}__extends(c,a);var b=c.prototype;b.getAnalyzerByType=function(a){var b=this.analyzerDic[a];b||(b=this.analyzerDic[a]=egret.Injector.getInstance(d.AnalyzerBase,a));return b};b.init=function(){egret.Injector.hasMapRule(d.AnalyzerBase,d.ResourceItem.TYPE_BIN)||egret.Injector.mapClass(d.AnalyzerBase,d.BinAnalyzer,d.ResourceItem.TYPE_BIN);
egret.Injector.hasMapRule(d.AnalyzerBase,d.ResourceItem.TYPE_IMAGE)||egret.Injector.mapClass(d.AnalyzerBase,d.ImageAnalyzer,d.ResourceItem.TYPE_IMAGE);egret.Injector.hasMapRule(d.AnalyzerBase,d.ResourceItem.TYPE_TEXT)||egret.Injector.mapClass(d.AnalyzerBase,d.TextAnalyzer,d.ResourceItem.TYPE_TEXT);egret.Injector.hasMapRule(d.AnalyzerBase,d.ResourceItem.TYPE_JSON)||egret.Injector.mapClass(d.AnalyzerBase,d.JsonAnalyzer,d.ResourceItem.TYPE_JSON);egret.Injector.hasMapRule(d.AnalyzerBase,d.ResourceItem.TYPE_SHEET)||
egret.Injector.mapClass(d.AnalyzerBase,d.SheetAnalyzer,d.ResourceItem.TYPE_SHEET);egret.Injector.hasMapRule(d.AnalyzerBase,d.ResourceItem.TYPE_FONT)||egret.Injector.mapClass(d.AnalyzerBase,d.FontAnalyzer,d.ResourceItem.TYPE_FONT);egret.Injector.hasMapRule(d.AnalyzerBase,d.ResourceItem.TYPE_SOUND)||egret.Injector.mapClass(d.AnalyzerBase,d.SoundAnalyzer,d.ResourceItem.TYPE_SOUND);egret.Injector.hasMapRule(d.AnalyzerBase,d.ResourceItem.TYPE_XML)||egret.Injector.mapClass(d.AnalyzerBase,d.XMLAnalyzer,
d.ResourceItem.TYPE_XML);this.resConfig=new d.ResourceConfig;this.resLoader=new d.ResourceLoader;this.resLoader.callBack=this.onResourceItemComp;this.resLoader.resInstance=this;this.resLoader.addEventListener(d.ResourceEvent.GROUP_COMPLETE,this.onGroupComp,this);this.resLoader.addEventListener(d.ResourceEvent.GROUP_LOAD_ERROR,this.onGroupError,this)};b.loadConfig=function(a,b,c){void 0===c&&(c="json");this.configItemList.push({url:a,resourceRoot:b,type:c});this.callLaterFlag||(egret.callLater(this.startLoadConfig,
this),this.callLaterFlag=!0)};b.startLoadConfig=function(){this.callLaterFlag=!1;var a=this.configItemList;this.configItemList=[];this.loadingConfigList=a;for(var b=a.length,e=[],f=0;f<b;f++){var g=a[f],g=new d.ResourceItem(g.url,g.url,g.type);e.push(g)}this.resLoader.loadGroup(e,c.GROUP_CONFIG,Number.MAX_VALUE)};b.isGroupLoaded=function(a){return-1!=this.loadedGroups.indexOf(a)};b.getGroupByName=function(a){return this.resConfig.getGroupByName(a)};b.loadGroup=function(a,b){void 0===b&&(b=0);if(-1!=
this.loadedGroups.indexOf(a))d.ResourceEvent.dispatchResourceEvent(this,d.ResourceEvent.GROUP_COMPLETE,a);else if(!this.resLoader.isGroupInLoading(a))if(this.configComplete){var c=this.resConfig.getGroupByName(a);this.resLoader.loadGroup(c,a,b)}else this.groupNameList.push({name:a,priority:b})};b.createGroup=function(a,b,c){void 0===c&&(c=!1);if(c){var d=this.loadedGroups.indexOf(a);-1!=d&&this.loadedGroups.splice(d,1)}return this.resConfig.createGroup(a,b,c)};b.onGroupComp=function(a){if(a.groupName==
c.GROUP_CONFIG){a=this.loadingConfigList.length;for(var b=0;b<a;b++){var e=this.loadingConfigList[b],f=this.getAnalyzerByType(e.type),g=f.getRes(e.url);f.destroyRes(e.url);this.resConfig.parseConfig(g,e.resourceRoot)}this.configComplete=!0;this.loadingConfigList=null;d.ResourceEvent.dispatchResourceEvent(this,d.ResourceEvent.CONFIG_COMPLETE);this.loadDelayGroups()}else this.loadedGroups.push(a.groupName),this.dispatchEvent(a)};b.loadDelayGroups=function(){var a=this.groupNameList;this.groupNameList=
[];for(var b=a.length,c=0;c<b;c++){var d=a[c];this.loadGroup(d.name,d.priority)}};b.onGroupError=function(a){a.groupName==c.GROUP_CONFIG?(this.loadingConfigList=null,d.ResourceEvent.dispatchResourceEvent(this,d.ResourceEvent.CONFIG_LOAD_ERROR)):this.dispatchEvent(a)};b.hasRes=function(a){var b=this.resConfig.getType(a);return""==b&&(a=d.AnalyzerBase.getStringPrefix(a),b=this.resConfig.getType(a),""==b)?!1:!0};b.parseConfig=function(a,b){this.resConfig.parseConfig(a,b);this.configComplete||this.loadingConfigList||
(this.configComplete=!0,this.loadDelayGroups())};b.getRes=function(a){var b=this.resConfig.getType(a);return""==b&&(b=d.AnalyzerBase.getStringPrefix(a),b=this.resConfig.getType(b),""==b)?null:this.getAnalyzerByType(b).getRes(a)};b.getResAsync=function(a,b,c){var e=this.resConfig.getType(a),f=this.resConfig.getName(a);if(""==e&&(f=d.AnalyzerBase.getStringPrefix(a),e=this.resConfig.getType(f),""==e)){egret.__callAsync(b,c);return}(e=this.getAnalyzerByType(e).getRes(a))?egret.__callAsync(b,c,e,a):(a=
{key:a,compFunc:b,thisObject:c},this.asyncDic[f]?this.asyncDic[f].push(a):(this.asyncDic[f]=[a],f=this.resConfig.getResourceItem(f),this.resLoader.loadItem(f)))};b.getResByUrl=function(a,b,c,e){void 0===e&&(e="");if(a){e||(e=this.getTypeByUrl(a));null!=this._loadedUrlTypes[a]&&this._loadedUrlTypes[a]!=e&&egret.$warn(2002);this._loadedUrlTypes[a]=e;var f=this.getAnalyzerByType(e).getRes(a);f?egret.__callAsync(b,c,f,a):(b={key:a,compFunc:b,thisObject:c},this.asyncDic[a]?this.asyncDic[a].push(b):(this.asyncDic[a]=
[b],a=new d.ResourceItem(a,a,e),this.resLoader.loadItem(a)))}else egret.__callAsync(b,c)};b.getTypeByUrl=function(a){(a=a.substr(a.lastIndexOf(".")+1))&&(a=a.toLowerCase());switch(a){case d.ResourceItem.TYPE_XML:case d.ResourceItem.TYPE_JSON:case d.ResourceItem.TYPE_SHEET:break;case "png":case "jpg":case "gif":case "jpeg":case "bmp":a=d.ResourceItem.TYPE_IMAGE;break;case "fnt":a=d.ResourceItem.TYPE_FONT;break;case "txt":a=d.ResourceItem.TYPE_TEXT;break;case "mp3":case "ogg":case "mpeg":case "wav":case "m4a":case "mp4":case "aiff":case "wma":case "mid":a=
d.ResourceItem.TYPE_SOUND;break;default:a=d.ResourceItem.TYPE_BIN}return a};b.onResourceItemComp=function(a){var b=this.asyncDic[a.name];delete this.asyncDic[a.name];a=this.getAnalyzerByType(a.type);for(var c=b.length,d=0;d<c;d++){var e=b[d],f=a.getRes(e.key);e.compFunc.call(e.thisObject,f,e.key)}};b.destroyRes=function(a,b){void 0===b&&(b=!0);var c=this.resConfig.getRawGroupByName(a);if(c&&0<c.length){var d=this.loadedGroups.indexOf(a);-1!=d&&this.loadedGroups.splice(d,1);for(var e=c.length,f=0;f<
e;f++)if(d=c[f],b||!this.isResInLoadedGroup(d.name)){d.loaded=!1;var l=this.getAnalyzerByType(d.type);l.destroyRes(d.name);this.removeLoadedGroupsByItemName(d.name)}return!0}c=this.resConfig.getType(a);if(""==c){c=this._loadedUrlTypes[a];if(null==c||""==c)return!1;delete this._loadedUrlTypes[a];l=this.getAnalyzerByType(c);l.destroyRes(a);return!0}d=this.resConfig.getRawResourceItem(a);d.loaded=!1;l=this.getAnalyzerByType(c);c=l.destroyRes(a);this.removeLoadedGroupsByItemName(d.name);return c};b.removeLoadedGroupsByItemName=
function(a){for(var b=this.loadedGroups,c=b.length,d=0;d<c;d++)for(var e=this.resConfig.getRawGroupByName(b[d]),f=e.length,l=0;l<f;l++)if(e[l].name==a){b.splice(d,1);d--;c=b.length;break}};b.isResInLoadedGroup=function(a){for(var b=this.loadedGroups,c=b.length,d=0;d<c;d++)for(var e=this.resConfig.getRawGroupByName(b[d]),f=e.length,l=0;l<f;l++)if(e[l].name==a)return!0;return!1};b.setMaxLoadingThread=function(a){1>a&&(a=1);this.resLoader.thread=a};b.setMaxRetryTimes=function(a){a=Math.max(a,0);this.resLoader.maxRetryTimes=
a};c.GROUP_CONFIG="RES__CONFIG";return c}(egret.EventDispatcher);f.prototype.__class__="RES.Resource";var e=new f})(RES||(RES={}));var tweenSetTimeOut=function(d,f){return egret.setTimeout.call(this,d,this,f)},tweenClearTimeout=egret.clearTimeout,_gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;
(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){_gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(d,f,e){var a=function(a){var b,c=[],d=a.length;for(b=0;b!==d;c.push(a[b++]));return c},c=function(a,b,d){e.call(this,a,b,d);this._cycle=0;this._yoyo=!0===this.vars.yoyo;this._repeat=this.vars.repeat||0;this._repeatDelay=this.vars.repeatDelay||0;this._dirty=!0;this.render=c.prototype.render},b=e._internals,h=b.isSelector,t=b.isArray,u=c.prototype=e.to({},
0.1,{}),p=[];c.version="1.13.1";u.constructor=c;u.kill()._gc=!1;c.killTweensOf=c.killDelayedCallsTo=e.killTweensOf;c.getTweensOf=e.getTweensOf;c.lagSmoothing=e.lagSmoothing;c.ticker=e.ticker;c.render=e.render;u.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),e.prototype.invalidate.call(this)};u.updateTo=function(a,b){var c,d=this.ratio;b&&this._startTime<this._timeline._time&&(this._startTime=
this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(c in a)this.vars[c]=a[c];if(this._initted)if(b)this._initted=!1;else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&e._onPluginEvent("_onDisable",this),0.998<this._time/this._duration)c=this._time,this.render(0,!0,!1),this._initted=!1,this.render(c,!0,!1);else if(0<this._time){this._initted=!1;this._init();for(var d=1/(1-d),f=this._firstPT;f;)c=
f.s+f.c,f.c*=d,f.s=c-f.c,f=f._next}return this};u.render=function(a,c,d){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var e,f,g,k,h,l,t,x=this._dirty?this.totalDuration():this._totalDuration,u=this._time,B=this._totalTime,F=this._cycle,E=this._duration,G=this._rawPrevTime;if(a>=x?(this._totalTime=x,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=E,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):
1),this._reversed||(e=!0,f="onComplete"),0===E&&(this._initted||!this.vars.lazy||d)&&(this._startTime===this._timeline._duration&&(a=0),(0===a||0>G||1E-10===G)&&G!==a&&(d=!0,1E-10<G&&(f="onReverseComplete")),this._rawPrevTime=t=!c||a||G===a?a:1E-10)):1E-7>a?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==B||0===E&&0<G&&1E-10!==G)&&(f="onReverseComplete",e=this._reversed),0>a?(this._active=!1,0===E&&(this._initted||!this.vars.lazy||d)&&(0<=G&&
(d=!0),this._rawPrevTime=t=!c||a||G===a?a:1E-10)):this._initted||(d=!0)):(this._totalTime=this._time=a,0!==this._repeat&&(g=E+this._repeatDelay,this._cycle=this._totalTime/g>>0,0!==this._cycle&&this._cycle===this._totalTime/g&&this._cycle--,this._time=this._totalTime-this._cycle*g,this._yoyo&&0!==(1&this._cycle)&&(this._time=E-this._time),this._time>E?this._time=E:0>this._time&&(this._time=0)),this._easeType?(k=this._time/E,h=this._easeType,l=this._easePower,(1===h||3===h&&0.5<=k)&&(k=1-k),3===h&&
(k*=2),1===l?k*=k:2===l?k*=k*k:3===l?k*=k*k*k:4===l&&(k*=k*k*k*k),this.ratio=1===h?1-k:2===h?k:0.5>this._time/E?k/2:1-k/2):this.ratio=this._ease.getRatio(this._time/E)),u===this._time&&!d&&F===this._cycle)return B!==this._totalTime&&this._onUpdate&&(c||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||p)),void 0;if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!d&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=
u,this._totalTime=B,this._rawPrevTime=G,this._cycle=F,b.lazyTweens.push(this),this._lazy=a,void 0;this._time&&!e?this.ratio=this._ease.getRatio(this._time/E):e&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}!1!==this._lazy&&(this._lazy=!1);this._active||!this._paused&&this._time!==u&&0<=a&&(this._active=!0);0!==B||(2===this._initted&&0<a&&this._init(),this._startAt&&(0<=a?this._startAt.render(a,c,d):f||(f="_dummyGS")),!this.vars.onStart||0===this._totalTime&&0!==E||!c&&
this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||p));for(g=this._firstPT;g;)g.f?g.t[g.p](g.c*this.ratio+g.s):g.t[g.p]=g.c*this.ratio+g.s,g=g._next;this._onUpdate&&(0>a&&this._startAt&&this._startTime&&this._startAt.render(a,c,d),c||(this._totalTime!==B||e)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||p));this._cycle!==F&&(c||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||p));
f&&(!this._gc||d)&&(0>a&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(a,c,d),e&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!c&&this.vars[f]&&this.vars[f].apply(this.vars[f+"Scope"]||this,this.vars[f+"Params"]||p),0===E&&1E-10===this._rawPrevTime&&1E-10!==t&&(this._rawPrevTime=0))};c.to=function(a,b,d){return new c(a,b,d)};c.from=function(a,b,d){return d.runBackwards=!0,d.immediateRender=0!=d.immediateRender,new c(a,b,d)};c.fromTo=function(a,
b,d,e){return e.startAt=d,e.immediateRender=0!=e.immediateRender&&0!=d.immediateRender,new c(a,b,e)};c.staggerTo=c.allTo=function(b,d,f,g,k,l,w){g=g||0;var y,v,u,x,z=f.delay||0,B=[],F=function(){f.onComplete&&f.onComplete.apply(f.onCompleteScope||this,arguments);k.apply(w||this,l||p)};t(b)||("string"==typeof b&&(b=e.selector(b)||b),h(b)&&(b=a(b)));y=b.length;for(u=0;y>u;u++){v={};for(x in f)v[x]=f[x];v.delay=z;u===y-1&&k&&(v.onComplete=F);B[u]=new c(b[u],d,v);z+=g}return B};c.staggerFrom=c.allFrom=
function(a,b,d,e,f,g,k){return d.runBackwards=!0,d.immediateRender=0!=d.immediateRender,c.staggerTo(a,b,d,e,f,g,k)};c.staggerFromTo=c.allFromTo=function(a,b,d,e,f,g,k,h){return e.startAt=d,e.immediateRender=0!=e.immediateRender&&0!=d.immediateRender,c.staggerTo(a,b,e,f,g,k,h)};c.delayedCall=function(a,b,d,e,f){return new c(b,0,{delay:a,onComplete:b,onCompleteParams:d,onCompleteScope:e,onReverseComplete:b,onReverseCompleteParams:d,onReverseCompleteScope:e,immediateRender:!1,useFrames:f,overwrite:0})};
c.set=function(a,b){return new c(a,0,b)};c.isTweening=function(a){return 0<e.getTweensOf(a,!0).length};var g=function(a,b){for(var c=[],d=0,f=a._first;f;)f instanceof e?c[d++]=f:(b&&(c[d++]=f),c=c.concat(g(f,b)),d=c.length),f=f._next;return c},k=c.getAllTweens=function(a){return g(d._rootTimeline,a).concat(g(d._rootFramesTimeline,a))};c.killAll=function(a,b,c,d){null==b&&(b=!0);null==c&&(c=!0);var e,g,h=k(0!=d),l=h.length,p=b&&c&&d;for(g=0;l>g;g++)d=h[g],(p||d instanceof f||(e=d.target===d.vars.onComplete)&&
c||b&&!e)&&(a?d.totalTime(d._reversed?0:d.totalDuration()):d._enabled(!1,!1))};c.killChildTweensOf=function(d,f){if(null!=d){var q,g,k,l=b.tweenLookup;if("string"==typeof d&&(d=e.selector(d)||d),h(d)&&(d=a(d)),t(d))for(g=d.length;-1<--g;)c.killChildTweensOf(d[g],f);else{q=[];for(k in l)for(g=l[k].target.parentNode;g;)g===d&&(q=q.concat(l[k].tweens)),g=g.parentNode;k=q.length;for(g=0;k>g;g++)f&&q[g].totalTime(q[g].totalDuration()),q[g]._enabled(!1,!1)}}};var l=function(a,b,c,d){b=!1!==b;c=!1!==c;d=
!1!==d;for(var e,g=k(d),h=b&&c&&d,l=g.length;-1<--l;)d=g[l],(h||d instanceof f||(e=d.target===d.vars.onComplete)&&c||b&&!e)&&d.paused(a)};return c.pauseAll=function(a,b,c){l(!0,a,b,c)},c.resumeAll=function(a,b,c){l(!1,a,b,c)},c.globalTimeScale=function(a){var b=d._rootTimeline,c=e.ticker.time;return arguments.length?(a=a||1E-10,b._startTime=c-(c-b._startTime)*b._timeScale/a,b=d._rootFramesTimeline,c=e.ticker.frame,b._startTime=c-(c-b._startTime)*b._timeScale/a,b._timeScale=d._rootTimeline._timeScale=
a,a):b._timeScale},u.progress=function(a){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-a:a)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},u.totalProgress=function(a){return arguments.length?this.totalTime(this.totalDuration()*a,!1):this._totalTime/this.totalDuration()},u.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),a>this._duration&&(a=this._duration),this._yoyo&&0!==(1&this._cycle)?a=this._duration-
a+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(a+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(a,b)):this._time},u.duration=function(a){return arguments.length?d.prototype.duration.call(this,a):this._duration},u.totalDuration=function(a){return arguments.length?-1===this._repeat?this:this.duration((a-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*
this._repeat,this._dirty=!1),this._totalDuration)},u.repeat=function(a){return arguments.length?(this._repeat=a,this._uncache(!0)):this._repeat},u.repeatDelay=function(a){return arguments.length?(this._repeatDelay=a,this._uncache(!0)):this._repeatDelay},u.yoyo=function(a){return arguments.length?(this._yoyo=a,this):this._yoyo},c},!0);_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(d,f,e){var a=function(a){f.call(this,a);this._labels={};this.autoRemoveChildren=
!0===this.vars.autoRemoveChildren;this.smoothChildTiming=!0===this.vars.smoothChildTiming;this._sortChildren=!0;this._onUpdate=this.vars.onUpdate;var b,c=this.vars;for(b in c)a=c[b],h(a)&&-1!==a.join("").indexOf("{self}")&&(c[b]=this._swapSelfInParams(a));h(c.tweens)&&this.add(c.tweens,0,c.align,c.stagger)},c=e._internals,b=c.isSelector,h=c.isArray,t=c.lazyTweens,u=c.lazyRender,p=[],g=_gsScope._gsDefine.globals,k=function(a){var b,c={};for(b in a)c[b]=a[b];return c},l=function(a,b,c,d){a._timeline.pause(a._startTime);
b&&b.apply(d||a._timeline,c||p)},c=a.prototype=new f;return a.version="1.13.1",c.constructor=a,c.kill()._gc=!1,c.to=function(a,b,c,d){var f=c.repeat&&g.TweenMax||e;return b?this.add(new f(a,b,c),d):this.set(a,c,d)},c.from=function(a,b,c,d){return this.add((c.repeat&&g.TweenMax||e).from(a,b,c),d)},c.fromTo=function(a,b,c,d,f){var k=d.repeat&&g.TweenMax||e;return b?this.add(k.fromTo(a,b,c,d),f):this.set(a,d,f)},c.staggerTo=function(c,d,f,g,h,l,p,t){l=new a({onComplete:l,onCompleteParams:p,onCompleteScope:t,
smoothChildTiming:this.smoothChildTiming});"string"==typeof c&&(c=e.selector(c)||c);if(b(c)){t=[];var v=c.length;for(p=0;p!==v;t.push(c[p++]));c=t}g=g||0;for(p=0;c.length>p;p++)f.startAt&&(f.startAt=k(f.startAt)),l.to(c[p],d,k(f),p*g);return this.add(l,h)},c.staggerFrom=function(a,b,c,d,e,f,g,k){return c.immediateRender=0!=c.immediateRender,c.runBackwards=!0,this.staggerTo(a,b,c,d,e,f,g,k)},c.staggerFromTo=function(a,b,c,d,e,f,g,k,h){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,
this.staggerTo(a,b,d,e,f,g,k,h)},c.call=function(a,b,c,d){return this.add(e.delayedCall(0,a,b,c),d)},c.set=function(a,b,c){return c=this._parseTimeOrLabel(c,0,!0),null==b.immediateRender&&(b.immediateRender=c===this._time&&!this._paused),this.add(new e(a,0,b),c)},a.exportRoot=function(b,c){b=b||{};null==b.smoothChildTiming&&(b.smoothChildTiming=!0);var d,f,g=new a(b),k=g._timeline;null==c&&(c=!0);k._remove(g,!0);g._startTime=0;g._rawPrevTime=g._time=g._totalTime=k._time;for(d=k._first;d;)f=d._next,
c&&d instanceof e&&d.target===d.vars.onComplete||g.add(d,d._startTime-d._delay),d=f;return k.add(g,0),g},c.add=function(b,c,g,k){var l,p,w;if("number"!=typeof c&&(c=this._parseTimeOrLabel(c,0,!0,b)),!(b instanceof d)){if(b instanceof Array||b&&b.push&&h(b)){g=g||"normal";k=k||0;l=b.length;for(p=0;l>p;p++)h(w=b[p])&&(w=new a({tweens:w})),this.add(w,c),"string"!=typeof w&&"function"!=typeof w&&("sequence"===g?c=w._startTime+w.totalDuration()/w._timeScale:"start"===g&&(w._startTime-=w.delay())),c+=k;
return this._uncache(!0)}if("string"==typeof b)return this.addLabel(b,c);if("function"!=typeof b)throw"Cannot add "+b+" into the timeline; it is not a tween, timeline, function, or string.";b=e.delayedCall(0,b)}if(f.prototype.add.call(this,b,c),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(g=this,b=g.rawTime()>b._startTime;g._timeline;)b&&g._timeline.smoothChildTiming?g.totalTime(g._totalTime,!0):g._gc&&g._enabled(!0,!1),g=g._timeline;return this},c.remove=
function(a){if(a instanceof d)return this._remove(a,!1);if(a instanceof Array||a&&a.push&&h(a)){for(var b=a.length;-1<--b;)this.remove(a[b]);return this}return"string"==typeof a?this.removeLabel(a):this.kill(null,a)},c._remove=function(a,b){f.prototype._remove.call(this,a,b);var c=this._last;return c?this._time>c._startTime+c._totalDuration/c._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},c.append=
function(a,b){return this.add(a,this._parseTimeOrLabel(null,b,!0,a))},c.insert=c.insertMultiple=function(a,b,c,d){return this.add(a,b||0,c,d)},c.appendMultiple=function(a,b,c,d){return this.add(a,this._parseTimeOrLabel(null,b,!0,a),c,d)},c.addLabel=function(a,b){return this._labels[a]=this._parseTimeOrLabel(b),this},c.addPause=function(a,b,c,d){return this.call(l,["{self}",b,c,d],this,a)},c.removeLabel=function(a){return delete this._labels[a],this},c.getLabelTime=function(a){return null!=this._labels[a]?
this._labels[a]:-1},c._parseTimeOrLabel=function(a,b,c,e){var f;if(e instanceof d&&e.timeline===this)this.remove(e);else if(e&&(e instanceof Array||e.push&&h(e)))for(f=e.length;-1<--f;)e[f]instanceof d&&e[f].timeline===this&&this.remove(e[f]);if("string"==typeof b)return this._parseTimeOrLabel(b,c&&"number"==typeof a&&null==this._labels[b]?a-this.duration():0,c);if(b=b||0,"string"!=typeof a||!isNaN(a)&&null==this._labels[a])null==a&&(a=this.duration());else{if(f=a.indexOf("="),-1===f)return null==
this._labels[a]?c?this._labels[a]=this.duration()+b:b:this._labels[a]+b;b=parseInt(a.charAt(f-1)+"1",10)*Number(a.substr(f+1));a=1<f?this._parseTimeOrLabel(a.substr(0,f-1),0,c):this.duration()}return Number(a)+b},c.seek=function(a,b){return this.totalTime("number"==typeof a?a:this._parseTimeOrLabel(a),!1!==b)},c.stop=function(){return this.paused(!0)},c.gotoAndPlay=function(a,b){return this.play(a,b)},c.gotoAndStop=function(a,b){return this.pause(a,b)},c.render=function(a,b,c){this._gc&&this._enabled(!0,
!1);var d,e,f,g,k=this._dirty?this.totalDuration():this._totalDuration,h=this._time,l=this._startTime,x=this._timeScale,z=this._paused;if(a>=k?(this._totalTime=this._time=k,this._reversed||this._hasPausedChild()||(e=!0,g="onComplete",0===this._duration&&(0===a||0>this._rawPrevTime||1E-10===this._rawPrevTime)&&this._rawPrevTime!==a&&this._first&&(d=!0,1E-10<this._rawPrevTime&&(g="onReverseComplete"))),this._rawPrevTime=this._duration||!b||a||this._rawPrevTime===a?a:1E-10,a=k+1E-4):1E-7>a?(this._totalTime=
this._time=0,(0!==h||0===this._duration&&1E-10!==this._rawPrevTime&&(0<this._rawPrevTime||0>a&&0<=this._rawPrevTime))&&(g="onReverseComplete",e=this._reversed),0>a?(this._active=!1,0<=this._rawPrevTime&&this._first&&(d=!0),this._rawPrevTime=a):(this._rawPrevTime=this._duration||!b||a||this._rawPrevTime===a?a:1E-10,a=0,this._initted||(d=!0))):this._totalTime=this._time=this._rawPrevTime=a,this._time!==h&&this._first||c||d){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==
h&&0<a&&(this._active=!0),0===h&&this.vars.onStart&&0!==this._time&&(b||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||p)),this._time>=h)for(d=this._first;d&&(f=d._next,!this._paused||z);)(d._active||d._startTime<=this._time&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=f;else for(d=this._last;d&&(f=d._prev,!this._paused||z);)(d._active||h>=d._startTime&&
!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=f;this._onUpdate&&(b||(t.length&&u(),this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||p)));g&&(this._gc||(l===this._startTime||x!==this._timeScale)&&(0===this._time||k>=this.totalDuration())&&(e&&(t.length&&u(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[g]&&
this.vars[g].apply(this.vars[g+"Scope"]||this,this.vars[g+"Params"]||p)))}},c._hasPausedChild=function(){for(var b=this._first;b;){if(b._paused||b instanceof a&&b._hasPausedChild())return!0;b=b._next}return!1},c.getChildren=function(a,b,c,d){d=d||-9999999999;for(var f=[],g=this._first,k=0;g;)d>g._startTime||(g instanceof e?!1!==b&&(f[k++]=g):(!1!==c&&(f[k++]=g),!1!==a&&(f=f.concat(g.getChildren(!0,b,c)),k=f.length))),g=g._next;return f},c.getTweensOf=function(a,b){var c,d,f=this._gc,g=[],k=0;f&&this._enabled(!0,
!0);c=e.getTweensOf(a);for(d=c.length;-1<--d;)(c[d].timeline===this||b&&this._contains(c[d]))&&(g[k++]=c[d]);return f&&this._enabled(!1,!0),g},c._contains=function(a){for(a=a.timeline;a;){if(a===this)return!0;a=a.timeline}return!1},c.shiftChildren=function(a,b,c){c=c||0;for(var d,e=this._first,f=this._labels;e;)e._startTime>=c&&(e._startTime+=a),e=e._next;if(b)for(d in f)f[d]>=c&&(f[d]+=a);return this._uncache(!0)},c._kill=function(a,b){if(!a&&!b)return this._enabled(!1,!1);for(var c=b?this.getTweensOf(b):
this.getChildren(!0,!0,!1),d=c.length,e=!1;-1<--d;)c[d]._kill(a,b)&&(e=!0);return e},c.clear=function(a){var b=this.getChildren(!1,!0,!0),c=b.length;for(this._time=this._totalTime=0;-1<--c;)b[c]._enabled(!1,!1);return!1!==a&&(this._labels={}),this._uncache(!0)},c.invalidate=function(){for(var a=this._first;a;)a.invalidate(),a=a._next;return this},c._enabled=function(a,b){if(a===this._gc)for(var c=this._first;c;)c._enabled(a,!0),c=c._next;return f.prototype._enabled.call(this,a,b)},c.duration=function(a){return arguments.length?
(0!==this.duration()&&0!==a&&this.timeScale(this._duration/a),this):(this._dirty&&this.totalDuration(),this._duration)},c.totalDuration=function(a){if(!arguments.length){if(this._dirty){var b,c,d=0;c=this._last;for(var e=999999999999;c;)b=c._prev,c._dirty&&c.totalDuration(),c._startTime>e&&this._sortChildren&&!c._paused?this.add(c,c._startTime-c._delay):e=c._startTime,0>c._startTime&&!c._paused&&(d-=c._startTime,this._timeline.smoothChildTiming&&(this._startTime+=c._startTime/this._timeScale),this.shiftChildren(-c._startTime,
!1,-9999999999),e=0),c=c._startTime+c._totalDuration/c._timeScale,c>d&&(d=c),c=b;this._duration=this._totalDuration=d;this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==a&&this.timeScale(this._totalDuration/a),this},c.usesFrames=function(){for(var a=this._timeline;a._timeline;)a=a._timeline;return a===d._rootFramesTimeline},c.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},a},!0);_gsScope._gsDefine("TimelineMax",
["TimelineLite","TweenLite","easing.Ease"],function(d,f,e){var a=function(a){d.call(this,a);this._repeat=this.vars.repeat||0;this._repeatDelay=this.vars.repeatDelay||0;this._cycle=0;this._yoyo=!0===this.vars.yoyo;this._dirty=!0},c=[],b=f._internals,h=b.lazyTweens,t=b.lazyRender,u=new e(null,null,1,0);e=a.prototype=new d;return e.constructor=a,e.kill()._gc=!1,a.version="1.13.1",e.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||
0,this._uncache(!0),d.prototype.invalidate.call(this)},e.addCallback=function(a,b,c,d){return this.add(f.delayedCall(0,a,c,d),b)},e.removeCallback=function(a,b){if(a)if(null==b)this._kill(null,a);else for(var c=this.getTweensOf(a,!1),d=c.length,e=this._parseTimeOrLabel(b);-1<--d;)c[d]._startTime===e&&c[d]._enabled(!1,!1);return this},e.tweenTo=function(a,b){b=b||{};var d,e,h,n={ease:u,overwrite:b.delay?2:1,useFrames:this.usesFrames(),immediateRender:!1};for(e in b)n[e]=b[e];return n.time=this._parseTimeOrLabel(a),
d=Math.abs(Number(n.time)-this._time)/this._timeScale||0.001,h=new f(this,d,n),n.onStart=function(){h.target.paused(!0);h.vars.time!==h.target.time()&&d===h.duration()&&h.duration(Math.abs(h.vars.time-h.target.time())/h.target._timeScale);b.onStart&&b.onStart.apply(b.onStartScope||h,b.onStartParams||c)},h},e.tweenFromTo=function(a,b,c){c=c||{};a=this._parseTimeOrLabel(a);c.startAt={onComplete:this.seek,onCompleteParams:[a],onCompleteScope:this};c.immediateRender=!1!==c.immediateRender;b=this.tweenTo(b,
c);return b.duration(Math.abs(b.vars.time-a)/this._timeScale||0.001)},e.render=function(a,b,d){this._gc&&this._enabled(!0,!1);var e,f,n,q,r,s=this._dirty?this.totalDuration():this._totalDuration,D=this._duration,w=this._time,y=this._totalTime,v=this._startTime,u=this._timeScale,x=this._rawPrevTime,z=this._paused,B=this._cycle;if(a>=s?(this._locked||(this._totalTime=s,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(f=!0,q="onComplete",0===this._duration&&(0===a||0>x||1E-10===x)&&
x!==a&&this._first&&(e=!0,1E-10<x&&(q="onReverseComplete"))),this._rawPrevTime=this._duration||!b||a||this._rawPrevTime===a?a:1E-10,this._yoyo&&0!==(1&this._cycle)?this._time=a=0:(this._time=D,a=D+1E-4)):1E-7>a?(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==w||0===D&&1E-10!==x&&(0<x||0>a&&0<=x)&&!this._locked)&&(q="onReverseComplete",f=this._reversed),0>a?(this._active=!1,0<=x&&this._first&&(e=!0),this._rawPrevTime=a):(this._rawPrevTime=D||!b||a||this._rawPrevTime===a?a:1E-10,a=
0,this._initted||(e=!0))):(0===D&&0>x&&(e=!0),this._time=this._rawPrevTime=a,this._locked||(this._totalTime=a,0!==this._repeat&&(r=D+this._repeatDelay,this._cycle=this._totalTime/r>>0,0!==this._cycle&&this._cycle===this._totalTime/r&&this._cycle--,this._time=this._totalTime-this._cycle*r,this._yoyo&&0!==(1&this._cycle)&&(this._time=D-this._time),this._time>D?(this._time=D,a=D+1E-4):0>this._time?this._time=a=0:a=this._time))),this._cycle!==B&&!this._locked){r=this._yoyo&&0!==(1&B);var F=r===(this._yoyo&&
0!==(1&this._cycle)),E=this._totalTime,G=this._cycle,C=this._rawPrevTime,H=this._time;if(this._totalTime=B*D,B>this._cycle?r=!r:this._totalTime+=D,this._time=w,this._rawPrevTime=0===D?x-1E-4:x,this._cycle=B,this._locked=!0,w=r?0:D,this.render(w,b,0===D),b||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||c),F&&(w=r?D+1E-4:-1E-4,this.render(w,!0,!1)),this._locked=!1,this._paused&&!z)return;this._time=H;this._totalTime=E;this._cycle=G;this._rawPrevTime=
C}if(!(this._time!==w&&this._first||d||e))return y!==this._totalTime&&this._onUpdate&&(b||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||c)),void 0;if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==y&&0<a&&(this._active=!0),0===y&&this.vars.onStart&&0!==this._totalTime&&(b||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||c)),this._time>=w)for(e=this._first;e&&(n=e._next,!this._paused||z);)(e._active||e._startTime<=
this._time&&!e._paused&&!e._gc)&&(e._reversed?e.render((e._dirty?e.totalDuration():e._totalDuration)-(a-e._startTime)*e._timeScale,b,d):e.render((a-e._startTime)*e._timeScale,b,d)),e=n;else for(e=this._last;e&&(n=e._prev,!this._paused||z);)(e._active||w>=e._startTime&&!e._paused&&!e._gc)&&(e._reversed?e.render((e._dirty?e.totalDuration():e._totalDuration)-(a-e._startTime)*e._timeScale,b,d):e.render((a-e._startTime)*e._timeScale,b,d)),e=n;this._onUpdate&&(b||(h.length&&t(),this._onUpdate.apply(this.vars.onUpdateScope||
this,this.vars.onUpdateParams||c)));q&&(this._locked||this._gc||(v===this._startTime||u!==this._timeScale)&&(0===this._time||s>=this.totalDuration())&&(f&&(h.length&&t(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[q]&&this.vars[q].apply(this.vars[q+"Scope"]||this,this.vars[q+"Params"]||c)))},e.getActive=function(a,b,c){null==a&&(a=!0);null==b&&(b=!0);null==c&&(c=!1);var d=[];c=this.getChildren(a,b,c);var e=0,f=c.length;for(a=0;f>a;a++)b=c[a],b.isActive()&&
(d[e++]=b);return d},e.getLabelAfter=function(a){a||0!==a&&(a=this._time);var b,c=this.getLabelsArray(),d=c.length;for(b=0;d>b;b++)if(c[b].time>a)return c[b].name;return null},e.getLabelBefore=function(a){null==a&&(a=this._time);for(var b=this.getLabelsArray(),c=b.length;-1<--c;)if(a>b[c].time)return b[c].name;return null},e.getLabelsArray=function(){var a,b=[],c=0;for(a in this._labels)b[c++]={time:this._labels[a],name:a};return b.sort(function(a,b){return a.time-b.time}),b},e.progress=function(a){return arguments.length?
this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-a:a)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},e.totalProgress=function(a){return arguments.length?this.totalTime(this.totalDuration()*a,!1):this._totalTime/this.totalDuration()},e.totalDuration=function(a){return arguments.length?-1===this._repeat?this:this.duration((a-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(d.prototype.totalDuration.call(this),this._totalDuration=-1===
this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},e.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),a>this._duration&&(a=this._duration),this._yoyo&&0!==(1&this._cycle)?a=this._duration-a+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(a+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(a,b)):this._time},e.repeat=function(a){return arguments.length?(this._repeat=a,this._uncache(!0)):
this._repeat},e.repeatDelay=function(a){return arguments.length?(this._repeatDelay=a,this._uncache(!0)):this._repeatDelay},e.yoyo=function(a){return arguments.length?(this._yoyo=a,this):this._yoyo},e.currentLabel=function(a){return arguments.length?this.seek(a,!0):this.getLabelBefore(this._time+1E-8)},a},!0);(function(){var d=180/Math.PI,f=[],e=[],a=[],c={},b=function(a,b,c,d){this.a=a;this.b=b;this.c=c;this.d=d;this.da=d-a;this.ca=c-a;this.ba=b-a},h=function(a,b,c,d){var e={a:a},f={},h={},s={c:d},
p=(a+b)/2,t=(b+c)/2;c=(c+d)/2;b=(p+t)/2;var t=(t+c)/2,y=(t-b)/8;return e.b=p+(a-p)/4,f.b=b+y,e.c=f.a=(e.b+f.b)/2,f.c=h.a=(b+t)/2,h.b=t-y,s.b=c+(d-c)/4,h.c=s.a=(h.b+s.b)/2,[e,f,h,s]},t=function(d,k,l,m,n,q){var r,s,p,t,y={},v=[],u=q||d[0];n="string"==typeof n?","+n+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,";null==k&&(k=1);for(s in d[0])v.push(s);if(1<d.length){p=d[d.length-
1];t=!0;for(r=v.length;-1<--r;)if(s=v[r],0.05<Math.abs(u[s]-p[s])){t=!1;break}t&&(d=d.concat(),q&&d.unshift(q),d.push(d[1]),q=d[d.length-3])}f.length=e.length=a.length=0;for(r=v.length;-1<--r;){s=v[r];c[s]=-1!==n.indexOf(","+s+",");p=y;var u=s,x;x=d;var z=s,B=c[s],F=q,E=void 0,G=void 0,C=void 0,H=void 0,I=void 0,C=void 0,K=[];if(F)for(x=[F].concat(x),G=x.length;-1<--G;)"string"==typeof(C=x[G][z])&&"="===C.charAt(1)&&(x[G][z]=F[z]+Number(C.charAt(0)+C.substr(2)));if(E=x.length-2,0>E)x=(K[0]=new b(x[0][z],
0,0,x[-1>E?0:1][z]),K);else{for(G=0;E>G;G++)C=x[G][z],H=x[G+1][z],K[G]=new b(C,0,0,H),B&&(I=x[G+2][z],f[G]=(f[G]||0)+(H-C)*(H-C),e[G]=(e[G]||0)+(I-H)*(I-H));x=(K[G]=new b(x[G][z],0,0,x[G+1][z]),K)}p[u]=x}for(r=f.length;-1<--r;)f[r]=Math.sqrt(f[r]),e[r]=Math.sqrt(e[r]);if(!m){for(r=v.length;-1<--r;)if(c[s])for(d=y[v[r]],p=d.length-1,n=0;p>n;n++)q=d[n+1].da/e[n]+d[n].da/f[n],a[n]=(a[n]||0)+q*q;for(r=a.length;-1<--r;)a[r]=Math.sqrt(a[r])}r=v.length;for(n=l?4:1;-1<--r;){s=v[r];q=d=y[s];p=k;u=l;x=m;s=
c[s];for(var J=F=B=z=void 0,M=H=C=J=K=I=G=E=void 0,Q=void 0,R=q.length-1,N=0,L=q[0].a,z=0;R>z;z++)E=q[N],B=E.a,F=E.d,J=q[N+1].d,s?(H=f[z],M=e[z],Q=0.25*(M+H)*p/(x?0.5:a[z]||0.5),G=F-(F-B)*(x?0.5*p:0!==H?Q/H:0),I=F+(J-F)*(x?0.5*p:0!==M?Q/M:0),K=F-(G+((I-G)*(3*H/(H+M)+0.5)/4||0))):(G=F-0.5*(F-B)*p,I=F+0.5*(J-F)*p,K=F-(G+I)/2),G+=K,I+=K,E.c=J=G,E.b=0!==z?L:L=E.a+0.6*(E.c-E.a),E.da=F-B,E.ca=J-B,E.ba=L-B,u?(C=h(B,L,J,F),q.splice(N,1,C[0],C[1],C[2],C[3]),N+=4):N++,L=I;E=q[N];E.b=L;E.c=L+0.4*(E.d-L);E.da=
E.d-E.a;E.ca=E.c-E.a;E.ba=L-E.a;u&&(C=h(E.a,L,E.c,E.d),q.splice(N,1,C[0],C[1],C[2],C[3]));t&&(d.splice(0,n),d.splice(d.length-n,n))}return y},u=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.3",API:2,global:!0,init:function(a,c,d){this._target=a;c instanceof Array&&(c={values:c});this._func={};this._round={};this._props=[];this._timeRes=null==c.timeResolution?6:parseInt(c.timeResolution,10);var e,f,h,r,s,p=c.values||[],w={};h=p[0];this._autoRotate=(f=c.autoRotate||d.vars.orientToBezier)?
f instanceof Array?f:[["x","y","rotation",!0===f?0:Number(f)||0]]:null;for(e in h)this._props.push(e);for(h=this._props.length;-1<--h;)e=this._props[h],this._overwriteProps.push(e),f=this._func[e]="function"==typeof a[e],w[e]=f?a[e.indexOf("set")||"function"!=typeof a["get"+e.substr(3)]?e:"get"+e.substr(3)]():parseFloat(a[e]),s||w[e]!==p[0][e]&&(s=w);if("cubic"!==c.type&&"quadratic"!==c.type&&"soft"!==c.type)w=t(p,isNaN(c.curviness)?1:c.curviness,!1,"thruBasic"===c.type,c.correlate,s);else{h=p;var p=
(p=c.type)||"soft",u,v,A,x,z,B,F;c={};s="cubic"===p?3:2;var E="soft"===p,G=[];if(E&&w&&(h=[w].concat(h)),null==h||s+1>h.length)throw"invalid Bezier data";for(u in h[0])G.push(u);for(x=G.length;-1<--x;){u=G[x];c[u]=f=[];F=0;B=h.length;for(z=0;B>z;z++)p=null==w?h[z][u]:"string"==typeof(v=h[z][u])&&"="===v.charAt(1)?w[u]+Number(v.charAt(0)+v.substr(2)):Number(v),E&&1<z&&B-1>z&&(f[F++]=(p+f[F-2])/2),f[F++]=p;B=F-s+1;for(z=F=0;B>z;z+=s)p=f[z],u=f[z+1],v=f[z+2],A=2===s?0:f[z+3],f[F++]=v=3===s?new b(p,u,
v,A):new b(p,(2*u+p)/3,(2*u+v)/3,v);f.length=F}w=c}if(this._beziers=w,this._segCount=this._beziers[e].length,this._timeRes){f=this._beziers;e=this._timeRes;e=e>>0||6;w=[];u=[];h=v=0;c=e-1;s=[];p=[];for(r in f){x=f[r];z=w;B=e;var C=void 0,H=void 0,I=E=F=H=void 0,K=C=void 0,J=void 0,J=I=void 0,G=1/B;for(A=x.length;-1<--A;)for(I=x[A],H=I.a,F=I.d-H,E=I.c-H,I=I.b-H,H=0,K=1;B>=K;K++)C=G*K,J=1-C,C=H-(H=(C*C*F+3*J*(C*E+J*I))*C),J=A*B+K-1,z[J]=(z[J]||0)+C*C}f=w.length;for(r=0;f>r;r++)v+=Math.sqrt(w[r]),x=
r%e,p[x]=v,x===c&&(h+=v,x=r/e>>0,s[x]=p,u[x]=h,v=0,p=[]);this._length=h;this._lengths=u;this._segments=s;this._l1=this._li=this._s1=this._si=0;this._l2=this._lengths[0];this._curSeg=this._segments[0];this._s2=this._curSeg[0];this._prec=1/this._curSeg.length}if(f=this._autoRotate)for(this._initialRotations=[],f[0]instanceof Array||(this._autoRotate=f=[f]),h=f.length;-1<--h;){for(r=0;3>r;r++)e=f[h][r],this._func[e]="function"==typeof a[e]?a[e.indexOf("set")||"function"!=typeof a["get"+e.substr(3)]?
e:"get"+e.substr(3)]:!1;e=f[h][2];this._initialRotations[h]=this._func[e]?this._func[e].call(this._target):this._target[e]}return this._startRatio=d.vars.runBackwards?1:0,!0},set:function(a){var b,c,e,f,h,r;h=this._segCount;var p=this._func,t=this._target,u=a!==this._startRatio;if(this._timeRes){if(b=this._lengths,f=this._curSeg,a*=this._length,e=this._li,a>this._l2&&h-1>e){for(h-=1;h>e&&a>=(this._l2=b[++e]););this._l1=b[e-1];this._li=e;this._curSeg=f=this._segments[e];this._s2=f[this._s1=this._si=
0]}else if(this._l1>a&&0<e){for(;0<e&&(this._l1=b[--e])>=a;);0===e&&this._l1>a?this._l1=0:e++;this._l2=b[e];this._li=e;this._curSeg=f=this._segments[e];this._s1=f[(this._si=f.length-1)-1]||0;this._s2=f[this._si]}if(b=e,a-=this._l1,e=this._si,a>this._s2&&f.length-1>e){for(h=f.length-1;h>e&&a>=(this._s2=f[++e]););this._s1=f[e-1];this._si=e}else if(this._s1>a&&0<e){for(;0<e&&(this._s1=f[--e])>=a;);0===e&&this._s1>a?this._s1=0:e++;this._s2=f[e];this._si=e}h=(e+(a-this._s1)/(this._s2-this._s1))*this._prec}else b=
0>a?0:1<=a?h-1:h*a>>0,h*=a-1/h*b;c=1-h;for(e=this._props.length;-1<--e;)a=this._props[e],f=this._beziers[a][b],r=(h*h*f.da+3*c*(h*f.ca+c*f.ba))*h+f.a,this._round[a]&&(r=Math.round(r)),p[a]?t[a](r):t[a]=r;if(this._autoRotate){var y,v,A,x,z,B,F=this._autoRotate;for(e=F.length;-1<--e;)a=F[e][2],z=F[e][3]||0,B=!0===F[e][4]?1:d,f=this._beziers[F[e][0]],c=this._beziers[F[e][1]],f&&c&&(f=f[b],c=c[b],y=f.a+(f.b-f.a)*h,A=f.b+(f.c-f.b)*h,y+=(A-y)*h,A+=(f.c+(f.d-f.c)*h-A)*h,v=c.a+(c.b-c.a)*h,x=c.b+(c.c-c.b)*
h,v+=(x-v)*h,x+=(c.c+(c.d-c.c)*h-x)*h,r=u?Math.atan2(x-v,A-y)*B+z:this._initialRotations[e],p[a]?t[a](r):t[a]=r)}}}),p=u.prototype;u.bezierThrough=t;u.cubicToQuadratic=h;u._autoCSS=!0;u.quadraticToCubic=function(a,c,d){return new b(a,(2*c+a)/3,(2*c+d)/3,d)};u._cssRegister=function(){var a=_gsScope._gsDefine.globals.CSSPlugin;if(a){var a=a._internals,b=a._parseToProxy,c=a._setPluginRatio,d=a.CSSPropTween;a._registerComplexSpecialProp("bezier",{parser:function(a,e,f,h,g,p){e instanceof Array&&(e={values:e});
p=new u;var t,v,A=e.values,x=A.length-1,z=[],B={};if(0>x)return g;for(f=0;x>=f;f++)v=b(a,A[f],h,g,p,x!==f),z[f]=v.end;for(t in e)B[t]=e[t];return B.values=z,g=new d(a,"bezier",0,0,v.pt,2),g.data=v,g.plugin=p,g.setRatio=c,0===B.autoRotate&&(B.autoRotate=!0),!B.autoRotate||B.autoRotate instanceof Array||(f=!0===B.autoRotate?0:Number(B.autoRotate),B.autoRotate=null!=v.end.left?[["left","top","rotation",f,!1]]:null!=v.end.x?[["x","y","rotation",f,!1]]:!1),B.autoRotate&&(h._transform||h._enableTransforms(!1),
v.autoRotate=h._target._gsTransform),p._onInitTween(v.proxy,B,h._tween),g}})}};p._roundProps=function(a,b){for(var c=this._overwriteProps,d=c.length;-1<--d;)(a[c[d]]||a.bezier||a.bezierThrough)&&(this._round[c[d]]=b)};p._kill=function(a){var b,c,d=this._props;for(b in this._beziers)if(b in a)for(delete this._beziers[b],delete this._func[b],c=d.length;-1<--c;)d[c]===b&&d.splice(c,1);return this._super._kill.call(this,a)}})();_gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],
function(d,f){},!0);(function(){var d=_gsScope._gsDefine.plugin({propName:"roundProps",priority:-1,API:2,init:function(d,e,a){return this._tween=a,!0}}).prototype;d._onInitAllProps=function(){for(var d,e,a,c=this._tween,b=c.vars.roundProps instanceof Array?c.vars.roundProps:c.vars.roundProps.split(","),h=b.length,t={},u=c._propLookup.roundProps;-1<--h;)t[b[h]]=1;for(h=b.length;-1<--h;)for(d=b[h],e=c._firstPT;e;)a=e._next,e.pg?e.t._roundProps(t,!0):e.n===d&&(this._add(e.t,d,e.s,e.c),a&&(a._prev=e._prev),
e._prev?e._prev._next=a:c._firstPT===e&&(c._firstPT=a),e._next=e._prev=null,c._propLookup[d]=u),e=a;return!1};d._add=function(d,e,a,c){this._addTween(d,e,a,a+c,e,!0);this._overwriteProps.push(e)}})();_gsScope._gsDefine.plugin({propName:"attr",API:2,version:"0.3.3",init:function(d,f){var e,a;if("function"!=typeof d.setAttribute)return!1;this._target=d;this._proxy={};this._start={};this._end={};for(e in f)this._start[e]=this._proxy[e]=a=d.getAttribute(e),a=this._addTween(this._proxy,e,parseFloat(a),
f[e],e),this._end[e]=a?a.s+a.c:f[e],this._overwriteProps.push(e);return!0},set:function(d){this._super.setRatio.call(this,d);for(var f=this._overwriteProps,e=f.length,a=1===d?this._end:d?this._proxy:this._start;-1<--e;)d=f[e],this._target.setAttribute(d,a[d]+"")}});_gsScope._gsDefine.plugin({propName:"directionalRotation",version:"0.2.1",API:2,init:function(d,f){"object"!=typeof f&&(f={rotation:f});this.finals={};var e,a,c,b,h,t,u=!0===f.useRadians?2*Math.PI:360;for(e in f)"useRadians"!==e&&(t=(f[e]+
"").split("_"),a=t[0],c=parseFloat("function"!=typeof d[e]?d[e]:d[e.indexOf("set")||"function"!=typeof d["get"+e.substr(3)]?e:"get"+e.substr(3)]()),b=this.finals[e]="string"==typeof a&&"="===a.charAt(1)?c+parseInt(a.charAt(0)+"1",10)*Number(a.substr(2)):Number(a)||0,h=b-c,t.length&&(a=t.join("_"),-1!==a.indexOf("short")&&(h%=u,h!==h%(u/2)&&(h=0>h?h+u:h-u)),-1!==a.indexOf("_cw")&&0>h?h=(h+9999999999*u)%u-(0|h/u)*u:-1!==a.indexOf("ccw")&&0<h&&(h=(h-9999999999*u)%u-(0|h/u)*u)),(1E-6<h||-1E-6>h)&&(this._addTween(d,
e,c,c+h,e),this._overwriteProps.push(e)));return!0},set:function(d){if(1!==d)this._super.setRatio.call(this,d);else for(d=this._firstPT;d;)d.f?d.t[d.p](this.finals[d.p]):d.t[d.p]=this.finals[d.p],d=d._next}})._autoCSS=!0;_gsScope._gsDefine("easing.Back",["easing.Ease"],function(d){var f,e,a,c=_gsScope.GreenSockGlobals||_gsScope,b=2*Math.PI,h=Math.PI/2,t=c.com.greensock._class,u=function(a,b){var c=t("easing."+a,function(){},!0),e=c.prototype=new d;return e.constructor=c,e.getRatio=b,c},p=d.register||
function(){},g=function(a,b,c,d){b=t("easing."+a,{easeOut:new b,easeIn:new c,easeInOut:new d},!0);return p(b,a),b},k=function(a,b,c){this.t=a;this.v=b;c&&(this.next=c,c.prev=this,this.c=c.v-b,this.gap=c.t-a)},l=function(a,b){var c=t("easing."+a,function(a){this._p1=a||0===a?a:1.70158;this._p2=1.525*this._p1},!0),e=c.prototype=new d;return e.constructor=c,e.getRatio=b,e.config=function(a){return new c(a)},c},l=g("Back",l("BackOut",function(a){return(a-=1)*a*((this._p1+1)*a+this._p1)+1}),l("BackIn",
function(a){return a*a*((this._p1+1)*a-this._p1)}),l("BackInOut",function(a){return 1>(a*=2)?0.5*a*a*((this._p2+1)*a-this._p2):0.5*((a-=2)*a*((this._p2+1)*a+this._p2)+2)})),m=t("easing.SlowMo",function(a,b,c){null==a?a=0.7:1<a&&(a=1);this._p=1!==a?b||0===b?b:0.7:0;this._p1=(1-a)/2;this._p2=a;this._p3=this._p1+this._p2;this._calcEnd=!0===c},!0),n=m.prototype=new d;return n.constructor=m,n.getRatio=function(a){var b=a+(0.5-a)*this._p;return this._p1>a?this._calcEnd?1-(a=1-a/this._p1)*a:b-(a=1-a/this._p1)*
a*a*a*b:a>this._p3?this._calcEnd?1-(a=(a-this._p3)/this._p1)*a:b+(a-b)*(a=(a-this._p3)/this._p1)*a*a*a:this._calcEnd?1:b},m.ease=new m(0.7,0.7),n.config=m.config=function(a,b,c){return new m(a,b,c)},f=t("easing.SteppedEase",function(a){a=a||1;this._p1=1/a;this._p2=a+1},!0),n=f.prototype=new d,n.constructor=f,n.getRatio=function(a){return 0>a?a=0:1<=a&&(a=0.999999999),(this._p2*a>>0)*this._p1},n.config=f.config=function(a){return new f(a)},e=t("easing.RoughEase",function(a){a=a||{};for(var b,c,e,f,
h=a.taper||"none",g=[],l=0,m=f=0|(a.points||20),n=!1!==a.randomize,p=!0===a.clamp,t=a.template instanceof d?a.template:null,u="number"==typeof a.strength?0.4*a.strength:0.4;-1<--m;)a=n?Math.random():1/f*m,b=t?t.getRatio(a):a,"none"===h?c=u:"out"===h?(e=1-a,c=e*e*u):"in"===h?c=a*a*u:0.5>a?(e=2*a,c=0.5*e*e*u):(e=2*(1-a),c=0.5*e*e*u),n?b+=Math.random()*c-0.5*c:m%2?b+=0.5*c:b-=0.5*c,p&&(1<b?b=1:0>b&&(b=0)),g[l++]={x:a,y:b};g.sort(function(a,b){return a.x-b.x});c=new k(1,1,null);for(m=f;-1<--m;)f=g[m],
c=new k(f.x,f.y,c);this._prev=new k(0,0,0!==c.t?c:c.next)},!0),n=e.prototype=new d,n.constructor=e,n.getRatio=function(a){var b=this._prev;if(a>b.t){for(;b.next&&a>=b.t;)b=b.next;b=b.prev}else for(;b.prev&&b.t>=a;)b=b.prev;return this._prev=b,b.v+(a-b.t)/b.gap*b.c},n.config=function(a){return new e(a)},e.ease=new e,g("Bounce",u("BounceOut",function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+0.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375}),u("BounceIn",
function(a){return 1/2.75>(a=1-a)?1-7.5625*a*a:2/2.75>a?1-(7.5625*(a-=1.5/2.75)*a+0.75):2.5/2.75>a?1-(7.5625*(a-=2.25/2.75)*a+0.9375):1-(7.5625*(a-=2.625/2.75)*a+0.984375)}),u("BounceInOut",function(a){var b=0.5>a;return a=b?1-2*a:2*a-1,a=1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+0.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375,b?0.5*(1-a):0.5*a+0.5})),g("Circ",u("CircOut",function(a){return Math.sqrt(1-(a-=1)*a)}),u("CircIn",function(a){return-(Math.sqrt(1-
a*a)-1)}),u("CircInOut",function(a){return 1>(a*=2)?-0.5*(Math.sqrt(1-a*a)-1):0.5*(Math.sqrt(1-(a-=2)*a)+1)})),a=function(a,c,e){var f=t("easing."+a,function(a,c){this._p1=a||1;this._p2=c||e;this._p3=this._p2/b*(Math.asin(1/this._p1)||0)},!0);a=f.prototype=new d;return a.constructor=f,a.getRatio=c,a.config=function(a,b){return new f(a,b)},f},g("Elastic",a("ElasticOut",function(a){return this._p1*Math.pow(2,-10*a)*Math.sin((a-this._p3)*b/this._p2)+1},0.3),a("ElasticIn",function(a){return-(this._p1*
Math.pow(2,10*(a-=1))*Math.sin((a-this._p3)*b/this._p2))},0.3),a("ElasticInOut",function(a){return 1>(a*=2)?-0.5*this._p1*Math.pow(2,10*(a-=1))*Math.sin((a-this._p3)*b/this._p2):0.5*this._p1*Math.pow(2,-10*(a-=1))*Math.sin((a-this._p3)*b/this._p2)+1},0.45)),g("Expo",u("ExpoOut",function(a){return 1-Math.pow(2,-10*a)}),u("ExpoIn",function(a){return Math.pow(2,10*(a-1))-0.001}),u("ExpoInOut",function(a){return 1>(a*=2)?0.5*Math.pow(2,10*(a-1)):0.5*(2-Math.pow(2,-10*(a-1)))})),g("Sine",u("SineOut",function(a){return Math.sin(a*
h)}),u("SineIn",function(a){return-Math.cos(a*h)+1}),u("SineInOut",function(a){return-0.5*(Math.cos(Math.PI*a)-1)})),t("easing.EaseLookup",{find:function(a){return d.map[a]}},!0),p(c.SlowMo,"SlowMo","ease,"),p(e,"RoughEase","ease,"),p(f,"SteppedEase","ease,"),l},!0)});_gsScope._gsDefine&&_gsScope._gsQueue.pop()();
(function(d,f){var e=d.GreenSockGlobals=d.GreenSockGlobals||d;if(!e.TweenLite){var a,c,b,h,t,u=function(a){var b=a.split("."),c=e;for(a=0;b.length>a;a++)c[b[a]]=c=c[b[a]]||{};return c},p=u("com.greensock"),g=function(a){var b,c=[],d=a.length;for(b=0;b!==d;c.push(a[b++]));return c},k=function(){},l=function(){var a=Object.prototype.toString,b=a.call([]);return function(c){return null!=c&&(c instanceof Array||"object"==typeof c&&!!c.push&&a.call(c)===b)}}(),m={},n=function(a,b,c,h){this.sc=m[a]?m[a].sc:
[];m[a]=this;this.gsClass=null;this.func=c;var g=[];this.check=function(k){for(var l,p,q=b.length,t=q;-1<--q;)(l=m[b[q]]||new n(b[q],[])).gsClass?(g[q]=l.gsClass,t--):k&&l.sc.push(this);if(0===t&&c)for(k=("com.greensock."+a).split("."),l=k.pop(),p=u(k.join("."))[l]=this.gsClass=c.apply(c,g),h&&(e[l]=p,"function"==typeof define&&define.amd?define((d.GreenSockAMDPath?d.GreenSockAMDPath+"/":"")+a.split(".").pop(),[],function(){return p}):a===f&&"undefined"!=typeof module&&module.exports&&(module.exports=
p)),q=0;this.sc.length>q;q++)this.sc[q].check()};this.check(!0)},q=d._gsDefine=function(a,b,c,d){return new n(a,b,c,d)},r=p._class=function(a,b,c){return b=b||function(){},q(a,[],function(){return b},c),b};q.globals=e;var s=[0,0,1,1],D=[],w=r("easing.Ease",function(a,b,c,d){this._func=a;this._type=c||0;this._power=d||0;this._params=b?s.concat(b):s},!0),y=w.map={},v=w.register=function(a,b,c,d){var e,f,h;b=b.split(",");for(var g=b.length,k=(c||"easeIn,easeOut,easeInOut").split(",");-1<--g;)for(e=b[g],
c=d?r("easing."+e,null,!0):p.easing[e]||{},f=k.length;-1<--f;)h=k[f],y[e+"."+h]=y[h+e]=c[h]=a.getRatio?a:a[h]||new a};b=w.prototype;b._calcEnd=!1;b.getRatio=function(a){if(this._func)return this._params[0]=a,this._func.apply(null,this._params);var b=this._type,c=this._power,d=1===b?1-a:2===b?a:0.5>a?2*a:2*(1-a);return 1===c?d*=d:2===c?d*=d*d:3===c?d*=d*d*d:4===c&&(d*=d*d*d*d),1===b?1-d:2===b?d:0.5>a?d/2:1-d/2};a=["Linear","Quad","Cubic","Quart","Quint,Strong"];for(c=a.length;-1<--c;)b=a[c]+",Power"+
c,v(new w(null,null,1,c),b,"easeOut",!0),v(new w(null,null,2,c),b,"easeIn"+(0===c?",easeNone":"")),v(new w(null,null,3,c),b,"easeInOut");y.linear=p.easing.Linear.easeIn;y.swing=p.easing.Quad.easeInOut;var A=r("events.EventDispatcher",function(a){this._listeners={};this._eventTarget=a||this});b=A.prototype;b.addEventListener=function(a,b,c,d,e){e=e||0;var f,g=this._listeners[a],k=0;null==g&&(this._listeners[a]=g=[]);for(f=g.length;-1<--f;)a=g[f],a.c===b&&a.s===c?g.splice(f,1):0===k&&e>a.pr&&(k=f+1);
g.splice(k,0,{c:b,s:c,up:d,pr:e});this!==h||t||h.wake()};b.removeEventListener=function(a,b){var c,d=this._listeners[a];if(d)for(c=d.length;-1<--c;)if(d[c].c===b)return d.splice(c,1),void 0};b.dispatchEvent=function(a){var b,c,d,e=this._listeners[a];if(e)for(b=e.length,c=this._eventTarget;-1<--b;)d=e[b],d.up?d.c.call(d.s||c,{type:a,target:c}):d.c.call(d.s||c)};var x=d.requestAnimationFrame,z=d.cancelAnimationFrame,B=Date.now||function(){return(new Date).getTime()},F=B();a=["ms","moz","webkit","o"];
for(c=a.length;-1<--c&&!x;)x=d[a[c]+"RequestAnimationFrame"],z=d[a[c]+"CancelAnimationFrame"]||d[a[c]+"CancelRequestAnimationFrame"];r("Ticker",function(a,b){var c,d,e,f,g,l=this,m=B(),n=!1!==b&&x,p=500,q=33,r=function(a){var b,h;b=B()-F;b>p&&(m+=b-q);F+=b;l.time=(F-m)/1E3;b=l.time-g;(!c||0<b||!0===a)&&(l.frame++,g+=b+(b>=f?0.004:f-b),h=!0);!0!==a&&(e=d(r));h&&l.dispatchEvent("tick")};A.call(l);l.time=l.frame=0;l.tick=function(){r(!0)};l.lagSmoothing=function(a,b){p=a||1E10;q=Math.min(b,p,0)};l.sleep=
function(){null!=e&&(n&&z?z(e):tweenClearTimeout(e),d=k,e=null,l===h&&(t=!1))};l.wake=function(){null!==e?l.sleep():10<l.frame&&(F=B()-p+5);d=0===c?k:n&&x?x:function(a){return tweenSetTimeOut(a,0|1E3*(g-l.time)+1)};l===h&&(t=!0);r(2)};l.fps=function(a){return arguments.length?(c=a,f=1/(c||60),g=this.time+f,l.wake(),void 0):c};l.useRAF=function(a){return arguments.length?(l.sleep(),n=a,l.fps(c),void 0):n};l.fps(a);tweenSetTimeOut(function(){n&&(!e||5>l.frame)&&l.useRAF(!1)},1500)});b=p.Ticker.prototype=
new p.events.EventDispatcher;b.constructor=p.Ticker;var E=r("core.Animation",function(a,b){if(this.vars=b=b||{},this._duration=this._totalDuration=a||0,this._delay=Number(b.delay)||0,this._timeScale=1,this._active=!0===b.immediateRender,this.data=b.data,this._reversed=!0===b.reversed,P){t||h.wake();var c=this.vars.useFrames?L:P;c.add(this,c._time);this.vars.paused&&this.paused(!0)}});h=E.ticker=new p.Ticker;b=E.prototype;b._dirty=b._gc=b._initted=b._paused=!1;b._totalTime=b._time=0;b._rawPrevTime=
-1;b._next=b._last=b._onUpdate=b._timeline=b.timeline=null;b._paused=!1;var G=function(){t&&2E3<B()-F&&h.wake();tweenSetTimeOut(G,2E3)};G();b.play=function(a,b){return null!=a&&this.seek(a,b),this.reversed(!1).paused(!1)};b.pause=function(a,b){return null!=a&&this.seek(a,b),this.paused(!0)};b.resume=function(a,b){return null!=a&&this.seek(a,b),this.paused(!1)};b.seek=function(a,b){return this.totalTime(Number(a),!1!==b)};b.restart=function(a,b){return this.reversed(!1).paused(!1).totalTime(a?-this._delay:
0,!1!==b,!0)};b.reverse=function(a,b){return null!=a&&this.seek(a||this.totalDuration(),b),this.reversed(!0).paused(!1)};b.render=function(){};b.invalidate=function(){return this};b.isActive=function(){var a,b=this._timeline,c=this._startTime;return!b||!this._gc&&!this._paused&&b.isActive()&&(a=b.rawTime())>=c&&c+this.totalDuration()/this._timeScale>a};b._enabled=function(a,b){return t||h.wake(),this._gc=!a,this._active=this.isActive(),!0!==b&&(a&&!this.timeline?this._timeline.add(this,this._startTime-
this._delay):!a&&this.timeline&&this._timeline._remove(this,!0)),!1};b._kill=function(){return this._enabled(!1,!1)};b.kill=function(a,b){return this._kill(a,b),this};b._uncache=function(a){for(a=a?this:this.timeline;a;)a._dirty=!0,a=a.timeline;return this};b._swapSelfInParams=function(a){for(var b=a.length,c=a.concat();-1<--b;)"{self}"===a[b]&&(c[b]=this);return c};b.eventCallback=function(a,b,c,d){if("on"===(a||"").substr(0,2)){var e=this.vars;if(1===arguments.length)return e[a];null==b?delete e[a]:
(e[a]=b,e[a+"Params"]=l(c)&&-1!==c.join("").indexOf("{self}")?this._swapSelfInParams(c):c,e[a+"Scope"]=d);"onUpdate"===a&&(this._onUpdate=b)}return this};b.delay=function(a){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+a-this._delay),this._delay=a,this):this._delay};b.duration=function(a){return arguments.length?(this._duration=this._totalDuration=a,this._uncache(!0),this._timeline.smoothChildTiming&&0<this._time&&this._time<this._duration&&0!==a&&this.totalTime(a/
this._duration*this._totalTime,!0),this):(this._dirty=!1,this._duration)};b.totalDuration=function(a){return this._dirty=!1,arguments.length?this.duration(a):this._totalDuration};b.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(a>this._duration?this._duration:a,b)):this._time};b.totalTime=function(a,b,c){if(t||h.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>a&&!c&&(a+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&
this.totalDuration();var d=this._totalDuration,e=this._timeline;if(a>d&&!c&&(a=d),this._startTime=(this._paused?this._pauseTime:e._time)-(this._reversed?d-a:a)/this._timeScale,e._dirty||this._uncache(!1),e._timeline)for(;e._timeline;)e._timeline._time!==(e._startTime+e._totalTime)/e._timeScale&&e.totalTime(e._totalTime,!0),e=e._timeline}this._gc&&this._enabled(!0,!1);(this._totalTime!==a||0===this._duration)&&(this.render(a,b,!1),I.length&&S())}return this};b.progress=b.totalProgress=function(a,b){return arguments.length?
this.totalTime(this.duration()*a,b):this._time/this.duration()};b.startTime=function(a){return arguments.length?(a!==this._startTime&&(this._startTime=a,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,a-this._delay)),this):this._startTime};b.timeScale=function(a){if(!arguments.length)return this._timeScale;if(a=a||1E-10,this._timeline&&this._timeline.smoothChildTiming){var b=this._pauseTime,b=b||0===b?b:this._timeline.totalTime();this._startTime=b-(b-this._startTime)*this._timeScale/
a}return this._timeScale=a,this._uncache(!1)};b.reversed=function(a){return arguments.length?(a!=this._reversed&&(this._reversed=a,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed};b.paused=function(a){if(!arguments.length)return this._paused;if(a!=this._paused&&this._timeline){t||a||h.wake();var b=this._timeline,c=b.rawTime(),d=c-this._pauseTime;!a&&b.smoothChildTiming&&(this._startTime+=d,this._uncache(!1));
this._pauseTime=a?c:null;this._paused=a;this._active=this.isActive();!a&&0!==d&&this._initted&&this.duration()&&this.render(b.smoothChildTiming?this._totalTime:(c-this._startTime)/this._timeScale,!0,!0)}return this._gc&&!a&&this._enabled(!0,!1),this};c=r("core.SimpleTimeline",function(a){E.call(this,0,a);this.autoRemoveChildren=this.smoothChildTiming=!0});b=c.prototype=new E;b.constructor=c;b.kill()._gc=!1;b._first=b._last=null;b._sortChildren=!1;b.add=b.insert=function(a,b){var c,d;if(a._startTime=
Number(b||0)+a._delay,a._paused&&this!==a._timeline&&(a._pauseTime=a._startTime+(this.rawTime()-a._startTime)/a._timeScale),a.timeline&&a.timeline._remove(a,!0),a.timeline=a._timeline=this,a._gc&&a._enabled(!0,!0),c=this._last,this._sortChildren)for(d=a._startTime;c&&c._startTime>d;)c=c._prev;return c?(a._next=c._next,c._next=a):(a._next=this._first,this._first=a),a._next?a._next._prev=a:this._last=a,a._prev=c,this._timeline&&this._uncache(!0),this};b._remove=function(a,b){return a.timeline===this&&
(b||a._enabled(!1,!0),a._prev?a._prev._next=a._next:this._first===a&&(this._first=a._next),a._next?a._next._prev=a._prev:this._last===a&&(this._last=a._prev),a._next=a._prev=a.timeline=null,this._timeline&&this._uncache(!0)),this};b.render=function(a,b,c){var d,e=this._first;for(this._totalTime=this._time=this._rawPrevTime=a;e;)d=e._next,(e._active||a>=e._startTime&&!e._paused)&&(e._reversed?e.render((e._dirty?e.totalDuration():e._totalDuration)-(a-e._startTime)*e._timeScale,b,c):e.render((a-e._startTime)*
e._timeScale,b,c)),e=d};b.rawTime=function(){return t||h.wake(),this._totalTime};var C=r("TweenLite",function(a,b,c){if(E.call(this,b,c),this.render=C.prototype.render,null==a)throw"Cannot tween a null target.";this.target=a="string"!=typeof a?a:C.selector(a)||a;var e,f;e=a.jquery||a.length&&a!==d&&a[0]&&(a[0]===d||a[0].nodeType&&a[0].style&&!a.nodeType);c=this.vars.overwrite;if(this._overwrite=c=null==c?N[C.defaultOverwrite]:"number"==typeof c?c>>0:N[c],(e||a instanceof Array||a.push&&l(a))&&"number"!=
typeof a[0])for(this._targets=f=g(a),this._propLookup=[],this._siblings=[],a=0;f.length>a;a++)(e=f[a])?"string"!=typeof e?e.length&&e!==d&&e[0]&&(e[0]===d||e[0].nodeType&&e[0].style&&!e.nodeType)?(f.splice(a--,1),this._targets=f=f.concat(g(e))):(this._siblings[a]=T(e,this,!1),1===c&&1<this._siblings[a].length&&U(e,this,null,1,this._siblings[a])):(e=f[a--]=C.selector(e),"string"==typeof e&&f.splice(a+1,1)):f.splice(a--,1);else this._propLookup={},this._siblings=T(a,this,!1),1===c&&1<this._siblings.length&&
U(a,this,null,1,this._siblings);(this.vars.immediateRender||0===b&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-1E-10,this.render(-this._delay))},!0),H=function(a){return a.length&&a!==d&&a[0]&&(a[0]===d||a[0].nodeType&&a[0].style&&!a.nodeType)};b=C.prototype=new E;b.constructor=C;b.kill()._gc=!1;b.ratio=0;b._firstPT=b._targets=b._overwrittenProps=b._startAt=null;b._notifyPluginsOfEnabled=b._lazy=!1;C.version="1.13.1";C.defaultEase=b._ease=new w(null,null,1,1);C.defaultOverwrite=
"auto";C.ticker=h;C.autoSleep=!0;C.lagSmoothing=function(a,b){h.lagSmoothing(a,b)};C.selector=d.$||d.jQuery||function(a){var b=d.$||d.jQuery;return b?(C.selector=b,b(a)):"undefined"==typeof document?a:document.querySelectorAll?document.querySelectorAll(a):document.getElementById("#"===a.charAt(0)?a.substr(1):a)};var I=[],K={},v=C._internals={isArray:l,isSelector:H,lazyTweens:I},J=C._plugins={},M=v.tweenLookup={},Q=0,R=v.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,
useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1},N={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},L=E._rootFramesTimeline=new c,P=E._rootTimeline=new c,S=v.lazyRender=function(){var b=
I.length;for(K={};-1<--b;)(a=I[b])&&!1!==a._lazy&&(a.render(a._lazy,!1,!0),a._lazy=!1);I.length=0};P._startTime=h.time;L._startTime=h.frame;P._active=L._active=!0;tweenSetTimeOut(S,1);E._updateRoot=C.render=function(){var a,b,c;if(I.length&&S(),P.render((h.time-P._startTime)*P._timeScale,!1,!1),L.render((h.frame-L._startTime)*L._timeScale,!1,!1),I.length&&S(),!(h.frame%120)){for(c in M){b=M[c].tweens;for(a=b.length;-1<--a;)b[a]._gc&&b.splice(a,1);0===b.length&&delete M[c]}if(c=P._first,(!c||c._paused)&&
C.autoSleep&&!L._first&&1===h._listeners.tick.length){for(;c&&c._paused;)c=c._next;c||h.sleep()}}};h.addEventListener("tick",E._updateRoot);var T=function(a,b,c){var d,e,f=a._gsTweenID;if(M[f||(a._gsTweenID=f="t"+Q++)]||(M[f]={target:a,tweens:[]}),b&&(d=M[f].tweens,d[e=d.length]=b,c))for(;-1<--e;)d[e]===b&&d.splice(e,1);return M[f].tweens},U=function(a,b,c,d,e){var f,h,g;if(1===d||4<=d){a=e.length;for(f=0;a>f;f++)if((g=e[f])!==b)g._gc||g._enabled(!1,!1)&&(h=!0);else if(5===d)break;return h}var k,
l=b._startTime+1E-10,m=[],n=0,p=0===b._duration;for(f=e.length;-1<--f;)(g=e[f])===b||g._gc||g._paused||(g._timeline!==b._timeline?(k=k||V(b,0,p),0===V(g,k,p)&&(m[n++]=g)):l>=g._startTime&&g._startTime+g.totalDuration()/g._timeScale>l&&((p||!g._initted)&&2E-10>=l-g._startTime||(m[n++]=g)));for(f=n;-1<--f;)g=m[f],2===d&&g._kill(c,a)&&(h=!0),(2!==d||!g._firstPT&&g._initted)&&g._enabled(!1,!1)&&(h=!0);return h},V=function(a,b,c){for(var d=a._timeline,e=d._timeScale,f=a._startTime;d._timeline;){if(f+=
d._startTime,e*=d._timeScale,d._paused)return-100;d=d._timeline}return f/=e,f>b?f-b:c&&f===b||!a._initted&&2E-10>f-b?1E-10:(f+=a.totalDuration()/a._timeScale/e)>b+1E-10?0:f-b-1E-10};b._init=function(){var a,b,c,d=this.vars,e=this._overwrittenProps,f=this._duration,h=!!d.immediateRender,g=d.ease;if(d.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill());c={};for(a in d.startAt)c[a]=d.startAt[a];if(c.overwrite=!1,c.immediateRender=!0,c.lazy=h&&!1!==d.lazy,c.startAt=c.delay=null,
this._startAt=C.to(this.target,0,c),h)if(0<this._time)this._startAt=null;else if(0!==f)return}else if(d.runBackwards&&0!==f)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{c={};for(a in d)R[a]&&"autoCSS"!==a||(c[a]=d[a]);if(c.overwrite=0,c.data="isFromStart",c.lazy=h&&!1!==d.lazy,c.immediateRender=h,this._startAt=C.to(this.target,0,c),h){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1)}if(this._ease=g=g?g instanceof w?g:"function"==
typeof g?new w(g,d.easeParams):y[g]||C.defaultEase:C.defaultEase,d.easeParams instanceof Array&&g.config&&(this._ease=g.config.apply(g,d.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(a=this._targets.length;-1<--a;)this._initProps(this._targets[a],this._propLookup[a]={},this._siblings[a],e?e[a]:null)&&(b=!0);else b=this._initProps(this.target,this._propLookup,this._siblings,e);if(b&&C._onPluginEvent("_onInitAllProps",this),e&&(this._firstPT||
"function"!=typeof this.target&&this._enabled(!1,!1)),d.runBackwards)for(c=this._firstPT;c;)c.s+=c.c,c.c=-c.c,c=c._next;this._onUpdate=d.onUpdate;this._initted=!0};b._initProps=function(a,b,c,e){var f,h,g,k,m;if(null==a)return!1;K[a._gsTweenID]&&S();if(!this.vars.css&&a.style&&a!==d&&a.nodeType&&J.css&&!1!==this.vars.autoCSS){h=this.vars;var n,p={};for(n in h)R[n]||n in a&&"transform"!==n&&"x"!==n&&"y"!==n&&"width"!==n&&"height"!==n&&"className"!==n&&"border"!==n||!(!J[n]||J[n]&&J[n]._autoCSS)||(p[n]=
h[n],delete h[n]);h.css=p}for(f in this.vars){if(h=this.vars[f],R[f])h&&(h instanceof Array||h.push&&l(h))&&-1!==h.join("").indexOf("{self}")&&(this.vars[f]=this._swapSelfInParams(h,this));else if(J[f]&&(k=new J[f])._onInitTween(a,this.vars[f],this)){this._firstPT=m={_next:this._firstPT,t:k,p:"setRatio",s:0,c:1,f:!0,n:f,pg:!0,pr:k._priority};for(h=k._overwriteProps.length;-1<--h;)b[k._overwriteProps[h]]=this._firstPT;(k._priority||k._onInitAllProps)&&(g=!0);(k._onDisable||k._onEnable)&&(this._notifyPluginsOfEnabled=
!0)}else this._firstPT=b[f]=m={_next:this._firstPT,t:a,p:f,f:"function"==typeof a[f],n:f,pg:!1,pr:0},m.s=m.f?a[f.indexOf("set")||"function"!=typeof a["get"+f.substr(3)]?f:"get"+f.substr(3)]():parseFloat(a[f]),m.c="string"==typeof h&&"="===h.charAt(1)?parseInt(h.charAt(0)+"1",10)*Number(h.substr(2)):Number(h)-m.s||0;m&&m._next&&(m._next._prev=m)}return e&&this._kill(e,a)?this._initProps(a,b,c,e):1<this._overwrite&&this._firstPT&&1<c.length&&U(a,this,b,this._overwrite,c)?(this._kill(b,a),this._initProps(a,
b,c,e)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(K[a._gsTweenID]=!0),g)};b.render=function(a,b,c){var d,e,f,h,g=this._time,k=this._duration;f=this._rawPrevTime;if(a>=k)this._totalTime=this._time=k,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(d=!0,e="onComplete"),0===k&&(this._initted||!this.vars.lazy||c)&&(this._startTime===this._timeline._duration&&(a=0),(0===a||0>f||1E-10===f)&&f!==a&&(c=!0,1E-10<f&&(e="onReverseComplete")),
this._rawPrevTime=h=!b||a||f===a?a:1E-10);else if(1E-7>a)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==g||0===k&&0<f&&1E-10!==f)&&(e="onReverseComplete",d=this._reversed),0>a?(this._active=!1,0===k&&(this._initted||!this.vars.lazy||c)&&(0<=f&&(c=!0),this._rawPrevTime=h=!b||a||f===a?a:1E-10)):this._initted||(c=!0);else if(this._totalTime=this._time=a,this._easeType){var l=a/k,m=this._easeType,n=this._easePower;(1===m||3===m&&0.5<=l)&&(l=1-l);3===m&&(l*=2);
1===n?l*=l:2===n?l*=l*l:3===n?l*=l*l*l:4===n&&(l*=l*l*l*l);this.ratio=1===m?1-l:2===m?l:0.5>a/k?l/2:1-l/2}else this.ratio=this._ease.getRatio(a/k);if(this._time!==g||c){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!c&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=g,this._rawPrevTime=f,I.push(this),this._lazy=a,void 0;this._time&&!d?this.ratio=this._ease.getRatio(this._time/k):d&&this._ease._calcEnd&&
(this.ratio=this._ease.getRatio(0===this._time?0:1))}!1!==this._lazy&&(this._lazy=!1);this._active||!this._paused&&this._time!==g&&0<=a&&(this._active=!0);0!==g||(this._startAt&&(0<=a?this._startAt.render(a,b,c):e||(e="_dummyGS")),!this.vars.onStart||0===this._time&&0!==k||!b&&this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||D));for(f=this._firstPT;f;)f.f?f.t[f.p](f.c*this.ratio+f.s):f.t[f.p]=f.c*this.ratio+f.s,f=f._next;this._onUpdate&&(0>a&&this._startAt&&this._startTime&&
this._startAt.render(a,b,c),b||(this._time!==g||d)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||D));e&&(!this._gc||c)&&(0>a&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(a,b,c),d&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[e]&&this.vars[e].apply(this.vars[e+"Scope"]||this,this.vars[e+"Params"]||D),0===k&&1E-10===this._rawPrevTime&&1E-10!==h&&(this._rawPrevTime=0))}};b._kill=function(a,b){if("all"===
a&&(a=null),null==a&&(null==b||b===this.target))return this._lazy=!1,this._enabled(!1,!1);b="string"!=typeof b?b||this._targets||this.target:C.selector(b)||b;var c,d,e,f,h,g,k;if((l(b)||H(b))&&"number"!=typeof b[0])for(c=b.length;-1<--c;)this._kill(a,b[c])&&(g=!0);else{if(this._targets)for(c=this._targets.length;-1<--c;){if(b===this._targets[c]){h=this._propLookup[c]||{};this._overwrittenProps=this._overwrittenProps||[];d=this._overwrittenProps[c]=a?this._overwrittenProps[c]||{}:"all";break}}else{if(b!==
this.target)return!1;h=this._propLookup;d=this._overwrittenProps=a?this._overwrittenProps||{}:"all"}if(h){c=a||h;k=a!==d&&"all"!==d&&a!==h&&("object"!=typeof a||!a._tempKill);for(e in c)(f=h[e])&&(f.pg&&f.t._kill(c)&&(g=!0),f.pg&&0!==f.t._overwriteProps.length||(f._prev?f._prev._next=f._next:f===this._firstPT&&(this._firstPT=f._next),f._next&&(f._next._prev=f._prev),f._next=f._prev=null),delete h[e]),k&&(d[e]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return g};b.invalidate=function(){return this._notifyPluginsOfEnabled&&
C._onPluginEvent("_onDisable",this),this._firstPT=null,this._overwrittenProps=null,this._onUpdate=null,this._startAt=null,this._initted=this._active=this._notifyPluginsOfEnabled=this._lazy=!1,this._propLookup=this._targets?{}:[],this};b._enabled=function(a,b){if(t||h.wake(),a&&this._gc){var c,d=this._targets;if(d)for(c=d.length;-1<--c;)this._siblings[c]=T(d[c],this,!0);else this._siblings=T(this.target,this,!0)}return E.prototype._enabled.call(this,a,b),this._notifyPluginsOfEnabled&&this._firstPT?
C._onPluginEvent(a?"_onEnable":"_onDisable",this):!1};C.to=function(a,b,c){return new C(a,b,c)};C.from=function(a,b,c){return c.runBackwards=!0,c.immediateRender=0!=c.immediateRender,new C(a,b,c)};C.fromTo=function(a,b,c,d){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,new C(a,b,d)};C.delayedCall=function(a,b,c,d,e){return new C(b,0,{delay:a,onComplete:b,onCompleteParams:c,onCompleteScope:d,onReverseComplete:b,onReverseCompleteParams:c,onReverseCompleteScope:d,immediateRender:!1,
useFrames:e,overwrite:0})};C.set=function(a,b){return new C(a,0,b)};C.getTweensOf=function(a,b){if(null==a)return[];a="string"!=typeof a?a:C.selector(a)||a;var c,d,e,f;if((l(a)||H(a))&&"number"!=typeof a[0]){c=a.length;for(d=[];-1<--c;)d=d.concat(C.getTweensOf(a[c],b));for(c=d.length;-1<--c;)for(f=d[c],e=c;-1<--e;)f===d[e]&&d.splice(c,1)}else for(d=T(a).concat(),c=d.length;-1<--c;)(d[c]._gc||b&&!d[c].isActive())&&d.splice(c,1);return d};C.killTweensOf=C.killDelayedCallsTo=function(a,b,c){"object"==
typeof b&&(c=b,b=!1);b=C.getTweensOf(a,b);for(var d=b.length;-1<--d;)b[d]._kill(c,a)};var O=r("plugins.TweenPlugin",function(a,b){this._overwriteProps=(a||"").split(",");this._propName=this._overwriteProps[0];this._priority=b||0;this._super=O.prototype},!0);if(b=O.prototype,O.version="1.10.1",O.API=2,b._firstPT=null,b._addTween=function(a,b,c,d,e,f){var h,g;return null!=d&&(h="number"==typeof d||"="!==d.charAt(1)?Number(d)-c:parseInt(d.charAt(0)+"1",10)*Number(d.substr(2)))?(this._firstPT=g={_next:this._firstPT,
t:a,p:b,s:c,c:h,f:"function"==typeof a[b],n:e||b,r:f},g._next&&(g._next._prev=g),g):void 0},b.setRatio=function(a){for(var b,c=this._firstPT;c;)b=c.c*a+c.s,c.r?b=Math.round(b):1E-6>b&&-1E-6<b&&(b=0),c.f?c.t[c.p](b):c.t[c.p]=b,c=c._next},b._kill=function(a){var b,c=this._overwriteProps,d=this._firstPT;if(null!=a[this._propName])this._overwriteProps=[];else for(b=c.length;-1<--b;)null!=a[c[b]]&&c.splice(b,1);for(;d;)null!=a[d.n]&&(d._next&&(d._next._prev=d._prev),d._prev?(d._prev._next=d._next,d._prev=
null):this._firstPT===d&&(this._firstPT=d._next)),d=d._next;return!1},b._roundProps=function(a,b){for(var c=this._firstPT;c;)(a[this._propName]||null!=c.n&&a[c.n.split(this._propName+"_").join("")])&&(c.r=b),c=c._next},C._onPluginEvent=function(a,b){var c,d,e,f,h,g=b._firstPT;if("_onInitAllProps"===a){for(;g;){h=g._next;for(d=e;d&&d.pr>g.pr;)d=d._next;(g._prev=d?d._prev:f)?g._prev._next=g:e=g;(g._next=d)?d._prev=g:f=g;g=h}g=b._firstPT=e}for(;g;)g.pg&&"function"==typeof g.t[a]&&g.t[a]()&&(c=!0),g=
g._next;return c},O.activate=function(a){for(var b=a.length;-1<--b;)a[b].API===O.API&&(J[(new a[b])._propName]=a[b]);return!0},q.plugin=function(a){if(!(a&&a.propName&&a.init&&a.API))throw"illegal plugin definition.";var b,c=a.propName,d=a.priority||0,e=a.overwriteProps,f={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},h=r("plugins."+c.charAt(0).toUpperCase()+c.substr(1)+"Plugin",function(){O.call(this,c,d);this._overwriteProps=e||[]},!0===a.global),
g=h.prototype=new O(c);g.constructor=h;h.API=a.API;for(b in f)"function"==typeof a[b]&&(g[f[b]]=a[b]);return h.version=a.version,O.activate([h]),h},a=d._gsQueue){for(c=0;a.length>c;c++)a[c]();for(b in m)m[b].func||d.console.log("GSAP encountered missing dependency: com.greensock."+b)}t=!1}})("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window,"TweenMax");
var Elements=function(d){function f(){d.call(this);this.targets=[];this.canClear=!1}__extends(f,d);var e=f.prototype;e.onCreate=function(){};e.onDestroy=function(){this&&this.parent&&this.parent.removeChild(this)};e.move=function(){};e.onHit=function(){};e.onEnterFrame=function(a){};return f}(egret.Sprite);Elements.prototype.__class__="Elements";
var Base=function(d){function f(){d.call(this)}__extends(f,d);var e=f.prototype;e.selectItem=function(){this.dispatchEvent(new TowerEvent(TowerEvent.SHOWTOOL,this))};e.deselectItem=function(){this.dispatchEvent(new TowerEvent(TowerEvent.HIDETOOL,this))};e.reselectItem=function(){this.dispatchEvent(new TowerEvent(TowerEvent.HIDETOOL,this));Group.dispose()};return f}(egret.Sprite);Base.prototype.__class__="Base";
var TowerBase=function(d){function f(){d.call(this);this.targets=[];this.maxRadius=140;this.minRadius=100}__extends(f,d);var e=f.prototype;e.destory=function(){};e.init=function(){};e.onEnterFrame=function(a){};return f}(Base);TowerBase.prototype.__class__="TowerBase";
var VectorElements=function(d){function f(){d.call(this);this.posArr=[];this._maxSpeed=0.3;this._angle=0;this._arrivalThreshold=2;this._pathThreshold=5;this._position=new Vector2D;this._velocity=new Vector2D;this._steeringForce=new Vector2D}__extends(f,d);var e=f.prototype;e.onEnterFrame=function(a){1==this.curState&&(this.followPath(this.posArr),this._velocity=this._velocity.add(this._steeringForce),this._steeringForce=new Vector2D,this._velocity.truncate(this._maxSpeed),this._position=this._position.add(this._velocity),
this.x=this.position.x,this.y=this.position.y,this._angle=(180*this._velocity.angle/Math.PI+360)%360)};Object.defineProperty(e,"position",{get:function(){return this._position},set:function(a){this._position=a;this.x=this._position.x;this.y=this._position.y},enumerable:!0,configurable:!0});Object.defineProperty(e,"velocity",{get:function(){return this._velocity},set:function(a){this._velocity=a},enumerable:!0,configurable:!0});e.seek=function(a){a=a.subtract(this._position);a.normalize();a=a.multiply(this._maxSpeed);
a=a.subtract(this._velocity);this._steeringForce=this._steeringForce.add(a)};e.arrive=function(a){var c=a.subtract(this._position);c.normalize();this._position.dist(a)>this._arrivalThreshold?c=c.multiply(this._maxSpeed):(c=c.zero(),this._velocity=this._velocity.zero(),this.fsm.changeState(2));a=c.subtract(this._velocity);this._steeringForce=this._steeringForce.add(a)};e.followPath=function(a,c){void 0===c&&(c=!1);var b=a[this._pathIndex];null!=b&&(this._position.dist(b)<this._pathThreshold&&(this._pathIndex>=
a.length-1?c&&(this._pathIndex=0):this._pathIndex++),this._pathIndex>=a.length-1&&!c?this.arrive(b):this.seek(b))};return f}(Elements);VectorElements.prototype.__class__="VectorElements";
var ShieldSoldierBase=function(d){function f(){d.call(this);this.moveToTarget=!1;this.yoffset=this.xoffset=this.timesum=this.fireDelay=0;this.atjijie=!1;this.maxSoldRadius=60;this.minSoldRadius=40;this.voiceArr=["shield_fire1","shield_fire2","shield_fire3"];this.ratioSoldY=this.minSoldRadius/this.maxSoldRadius;this.fsm=new StateMachine(this);this.lifeBar=new LifeBar;this.addChild(this.lifeBar)}__extends(f,d);var e=f.prototype;e.setPath2=function(a){this.posArr.length=0;this.posArr.push(a);this.fsm.changeState(1)};
e.live=function(){0>=this._hp&&this.fsm.changeState(5);this._hp>this.life&&(this._hp=this.life)};Object.defineProperty(e,"hp",{get:function(){return this._hp},set:function(a){this._hp=a;this.live();this.lifeBar.setProgress(this._hp,this.life)},enumerable:!0,configurable:!0});e.selectItem=function(){this.dispatchEvent(new SoldEvent(SoldEvent.SELECT,this))};e.deselectItem=function(){this.dispatchEvent(new SoldEvent(SoldEvent.DESELECT,this))};e.reselectItem=function(){};e.createYQ=function(){this.view.touchEnabled=
!1};e.clearYQ=function(){null!=this.selectYQ&&(this.removeChild(this.selectYQ),this.selectYQ=null);this.view.touchEnabled=!0};e.onDestroy=function(){d.prototype.onDestroy.call(this);null!=this.target&&(this.target=this.target.target=null);this.clearYQ()};e.hittest=function(){if(null!=this.target&&(this.target.hp-=this.damage,0>=this.target.hp)){var a=this.targets.indexOf(this.target);-1!=a&&this.targets.splice(a,1);a=this.atargets.indexOf(this.target);-1!=a&&this.atargets.splice(a,1);this.target=
this.target.target=null}};e.onEnterFrame=function(a){this.timesum+=a;this.fsm.onEnterFrame(a);d.prototype.onEnterFrame.call(this,a);this.canClear&&ObjectPool.getInstance().destroyObject(this)};e.getMoveAngle=function(a){0<=a&&90>=a||270<=a&&360>=a?(this.stateLabel="running",this.view.scaleX=1):90<a&&270>a&&(this.stateLabel="running",this.view.scaleX=-1)};e.idling=function(){0!=this.curState&&(this.curState=0,this.view.gotoAndStop(this.stateLabel));this.moveOrFight()};e.moving=function(){this.getMoveAngle(this._angle);
1!=this.curState&&(this.curState=1,this.view.gotoAndPlay(this.stateLabel));this.checkLast(this.stateLabel)};e.movingEnd=function(){2!=this.curState&&(this.curState=2,this.fsm.changeState(0))};e.fighting=function(){if(3!=this.curState){this.curState=3;this.view.gotoAndPlay(this.stateLabel);null!=this.target&&(this.view.scaleX=this.x<=this.target.x?1:-1);var a=Math.floor(3*Math.random());SoundManager.playEffect(this.voiceArr[a])}this.checkLastEnd(this.stateLabel)};e.fightingEnd=function(){4!=this.curState&&
(this.curState=4,this.hittest(),this.timesum=0);null==this.target?this.fsm.changeState(0):this.timesum>=this.fireDelay&&(this.fsm.changeState(3),this.timesum=0)};e.dying=function(){5!=this.curState&&(this.curState=5,this.view.gotoAndPlay(this.stateLabel));this.checkLastEnd(this.stateLabel)};e.dyingEnd=function(){6!=this.curState&&(this.curState=6,this.canClear=!0)};e.checkLast=function(a){this.view._getFrameLabelForFrame(this.view.currentFrame+1).name!=a&&this.view.gotoAndPlay(a)};e.checkLastEnd=
function(a){if(this.view._getFrameLabelForFrame(this.view.currentFrame+1).name!=a||this.view.currentFrame>=this.view.totalFrames)this.view.stop(),3==this.curState?this.fsm.changeState(4):5==this.curState&&this.fsm.changeState(6)};e.isIdle=function(){this.stateLabel="idle";return!0};e.isMove=function(){return!0};e.isFighting=function(){this.stateLabel="fighting";return!0};e.isDead=function(){this.stateLabel="dead";return!0};e.moveOrFight=function(){this.getTarget();if(null!=this.target)if(this.moveToTarget)this.moveToTarget=
!1,this.fsm.changeState(3),this.target.beAttack=!0;else{this.moveToTarget=!0;this.target.beAttack=!1;var a,c;a=this.target.x<this.x?this.target.x+16:this.target.x-16;c=this.target.y+2;this.atjijie=!1;this.setPath2(new Vector2D(a,c))}else this.moveToTarget=!1,0!=this.atargets.length||this.atjijie||(this.atjijie=!0,this.setPath2(this.jijieDian))};e.getTarget=function(){var a;this.atargets=[];for(a=0;a<this.targets.length;a++){var c=this.targets[a],b=Utils.containsXY(c.x,c.y,this.x,this.y,this.maxSoldRadius,
this.ratioSoldY),d=this.atargets.indexOf(c);b?-1==d&&this.atargets.push(c):-1!=d&&this.atargets.splice(d,1)}c=this.atargets.length;if(0<c&&null==this.target)for(a=0;a<c;a++)if(b=this.atargets[a],null==b.target){b.target=this;this.target=b;break}};return f}(VectorElements);ShieldSoldierBase.prototype.__class__="ShieldSoldierBase";
var SkillBase=function(d){function f(){d.call(this);this.cdtime=this.curtime=0;this.iscd=!0}__extends(f,d);var e=f.prototype;e.initbm=function(){this.skillbm=new egret.Bitmap;this.skillbm.x=12;this.skillbm.y=8;this.addChild(this.skillbm);this.mb=Utils.createBitmapByName("mb");this.mb.anchorY=1;this.mb.x=12;this.mb.y=46;this.addChild(this.mb);this.bkbm=Utils.createBitmapByName("uiskilloff");this.addChild(this.bkbm);this.touchEnabled=!0};e.onCreate=function(){this.iscd=!0;this.curtime=0};e.onDestroy=
function(){};e.onEnterFrame=function(a){this.iscd&&(this.curtime+=a,a=this.curtime/this.cdtime,this.setMbheight(38*(1-a)),1<=a&&(this.iscd=!1,this.skillbm.texture=RES.getRes(this.on),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchHandle,this)))};e.setMbheight=function(a){this.mb.height=a};e.touchHandle=function(a){Group.selectItem(this)};e.selectItem=function(){this.bkbm.texture=RES.getRes("uiskillon");var a,c,b=GuankaBase.instance.objArr.length;for(a=0;a<b;a++){c=GuankaBase.instance.objArr[a];
var d=egret.getQualifiedSuperclassName(c);if("ShieldSoldierBase"==d||"HeroBase"==d)c.view.touchEnabled=!1}};e.reselectItem=function(){};e.deselectItem=function(){this.bkbm.texture=RES.getRes("uiskilloff");var a,c,b=GuankaBase.instance.objArr.length;for(a=0;a<b;a++){c=GuankaBase.instance.objArr[a];var d=egret.getQualifiedSuperclassName(c);if("ShieldSoldierBase"==d||"HeroBase"==d)c.view.touchEnabled=!0}};e.setPoint=function(a){this.skillbm.texture=RES.getRes(this.off);this.setMbheight(38);this.curtime=
0;this.iscd=!0;this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchHandle,this)};return f}(egret.Sprite);SkillBase.prototype.__class__="SkillBase";
var ArrowTowerBase=function(d){function f(){d.call(this);this.fireDelay=1E3;this.timesum=0;this.firstst="R";this.voiceArr=["arrow_ready1","arrow_ready2","arrow_ready3"];var a=Math.floor(3*Math.random());SoundManager.playEffect(this.voiceArr[a])}__extends(f,d);var e=f.prototype;e.playFireVoice=function(){0.5<Math.random()?SoundManager.playEffect("arrow_fire1"):SoundManager.playEffect("arrow_fire2")};e.onEnterFrame=function(a){this.atargets=[];for(a=0;a<this.targets.length;a++){var c=this.targets[a];
if(null==c.target){var b=Utils.containsXY(c.x,c.y,this.sx,this.sy-22,this.maxRadius,this.ratioY),d=this.atargets.indexOf(c);b&&0<c.hp?-1==d&&this.atargets.push(c):-1!=d&&this.atargets.splice(d,1)}}for(a=0;a<this.targets.length;a++)c=this.targets[a],null!=c.target&&(b=Utils.containsXY(c.x,c.y,this.sx,this.sy-22,this.maxRadius,this.ratioY),d=this.atargets.indexOf(c),b&&0<c.hp?-1==d&&this.atargets.push(c):-1!=d&&this.atargets.splice(d,1))};return f}(TowerBase);ArrowTowerBase.prototype.__class__="ArrowTowerBase";
var ExploTowerBase=function(d){function f(){d.call(this);this.fireDelay=1E3;this.timesum=0;this.isfire=!1;this.voiceArr=["explo_ready1","explo_ready2","explo_ready3"];var a=Math.floor(3*Math.random());SoundManager.playEffect(this.voiceArr[a])}__extends(f,d);var e=f.prototype;e.playFireVoice=function(){SoundManager.playEffect("explo_firestart1")};e.onEnterFrame=function(a){"shootEnd"==this.view.currentLabel&&this.view.gotoAndStop("idle");this.atargets=[];for(a=0;a<this.targets.length;a++){var c=this.targets[a],
b=Utils.containsXY(c.x,c.y,this.sx,this.sy-22,this.maxRadius,this.ratioY),d=this.atargets.indexOf(c);b&&0<c.hp?-1==d&&this.atargets.push(c):-1!=d&&this.atargets.splice(d,1)}};return f}(TowerBase);ExploTowerBase.prototype.__class__="ExploTowerBase";
var MagicTowerBase=function(d){function f(){d.call(this);this.fireDelay=1E3;this.timesum=0;this.isfire=!1;this.voiceArr=["magic_ready1","magic_ready2","magic_ready3"];var a=Math.floor(3*Math.random());SoundManager.playEffect(this.voiceArr[a])}__extends(f,d);var e=f.prototype;e.playFireVoice=function(){SoundManager.playEffect("magic_fire1")};e.onEnterFrame=function(a){this.atargets=[];for(a=0;a<this.targets.length;a++){var c=this.targets[a];if(null==c.target){var b=Utils.containsXY(c.x,c.y,this.sx,
this.sy-22,this.maxRadius,this.ratioY),d=this.atargets.indexOf(c);b?-1==d&&this.atargets.push(c):-1!=d&&this.atargets.splice(d,1)}}for(a=0;a<this.targets.length;a++)c=this.targets[a],null!=c.target&&(b=Utils.containsXY(c.x,c.y,this.sx,this.sy-22,this.maxRadius,this.ratioY),d=this.atargets.indexOf(c),b?-1==d&&this.atargets.push(c):-1!=d&&this.atargets.splice(d,1))};return f}(TowerBase);MagicTowerBase.prototype.__class__="MagicTowerBase";
var ShieldTowerBase=function(d){function f(){d.call(this);this.offArr=[[10,0],[0,-10],[-10,0]];this.offIdx=-1;this.createTime=1E4;this.timesum=0;this.voiceArr=["shield_ready1","shield_ready2","shield_ready3"];var e=Math.floor(3*Math.random());SoundManager.playEffect(this.voiceArr[e])}__extends(f,d);return f}(TowerBase);ShieldTowerBase.prototype.__class__="ShieldTowerBase";
var MonsterBase=function(d){function f(){d.call(this);this.beAttack=!1;this.timesum=this.fireDelay=0;this.dieVoiceArr=["monster_die1","monster_die2","monster_die3","monster_die4"];this.fsm=new StateMachine(this);this.lifeBar=new LifeBar;this.addChild(this.lifeBar)}__extends(f,d);var e=f.prototype;e.live=function(){0>=this._hp&&this.fsm.changeState(5);this._hp>this.life&&(this._hp=this.life)};Object.defineProperty(e,"hp",{get:function(){return this._hp},set:function(a){this._hp=a;this.live();this.lifeBar.setProgress(this._hp,
this.life)},enumerable:!0,configurable:!0});e.onDestroy=function(){d.prototype.onDestroy.call(this);null!=this.target&&(this.target=this.target.target=null)};e.hittest=function(){null!=this.target&&(this.target.hp-=this.damage,0>=this.target.hp&&(this.target=this.target.target=null))};e.onEnterFrame=function(a){this.timesum+=a;this.fsm.onEnterFrame(a);d.prototype.onEnterFrame.call(this,a);this.canClear&&ObjectPool.getInstance().destroyObject(this)};e.getMoveAngle=function(a){0<=a&&60>=a||300<=a&&
360>=a?(this.stateLabel="walking",this.view.scaleX=1):60<a&&120>a?this.stateLabel="walkingDown":120<=a&&240>=a?(this.stateLabel="walking",this.view.scaleX=-1):240<a&&300>a&&(this.stateLabel="walkingUp")};e.idling=function(){0!=this.curState&&(this.curState=0,this.view.gotoAndStop(this.stateLabel));this.moveOrFight()};e.moving=function(){this.getMoveAngle(this._angle);1!=this.curState&&(this.curState=1,this.view.gotoAndPlay(this.stateLabel));null!=this.target&&this.fsm.changeState(0);this.checkLast(this.stateLabel)};
e.movingEnd=function(){2!=this.curState&&(this.curState=2,this.canClear=!0)};e.fighting=function(){3!=this.curState&&(this.curState=3,this.view.gotoAndPlay(this.stateLabel),null!=this.target&&(this.view.scaleX=this.x<=this.target.x?1:-1));this.checkLastEnd(this.stateLabel)};e.fightingEnd=function(){4!=this.curState&&(this.curState=4,this.hittest(),this.timesum=0);null==this.target?this.fsm.changeState(1):this.timesum>=this.fireDelay&&(this.moveOrFight(),this.fsm.changeState(3),this.timesum=0)};e.dying=
function(){if(5!=this.curState){this.curState=5;this.view.gotoAndPlay(this.stateLabel);var a=Math.floor(4*Math.random());SoundManager.playEffect(this.dieVoiceArr[a])}this.checkLastEnd(this.stateLabel)};e.dyingEnd=function(){6!=this.curState&&(this.curState=6,this.canClear=this.beKill=!0)};e.checkLast=function(a){this.view._getFrameLabelForFrame(this.view.currentFrame+1).name!=a&&this.view.gotoAndPlay(a)};e.checkLastEnd=function(a){if(this.view._getFrameLabelForFrame(this.view.currentFrame+1).name!=
a||this.view.currentFrame>=this.view.totalFrames)this.view.stop(),3==this.curState?this.fsm.changeState(4):5==this.curState&&this.fsm.changeState(6)};e.isIdle=function(){this.stateLabel="idle";return!0};e.isMove=function(){return!0};e.isFighting=function(){this.stateLabel="fighting";return!0};e.isDead=function(){this.stateLabel="dead";return!0};e.moveOrFight=function(){null!=this.target?this.beAttack?this.fsm.changeState(3):this.fsm.changeState(0):(this.beAttack=!1,this.fsm.changeState(1))};return f}(VectorElements);
MonsterBase.prototype.__class__="MonsterBase";
var GuankaBase=function(d){function f(){d.call(this);this.perxs=1;this.perxs2=0.1;this.hardxs2=this.hardxs=1;this.allBo=2;this.boLeft=this.curBo=-1;this.boing=!1;this.delayToNext=1E3;this.otime=this.delayToNextSum=0;this.mtime=500;this.roadArr=[];f.instance=this;this.baseArr=[];this.towerArr=[];this.buildQuene=[];this.objArr=[];this.enemyArr=[];this.bm=new egret.Bitmap;this.addChild(this.bm);this.bm.touchEnabled=!0;this.bm.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.bgMapClick,this);this.baseLayer=
new egret.Sprite;this.addChild(this.baseLayer);this.areaLayer=new egret.Sprite;this.addChild(this.areaLayer);this.objLayer=new egret.Sprite;this.addChild(this.objLayer);this.weaponLayer=new egret.Sprite;this.addChild(this.weaponLayer);this.toolLayer=new egret.Sprite;this.addChild(this.toolLayer);this.uiLayer=new egret.Sprite;this.addChild(this.uiLayer)}__extends(f,d);var e=f.prototype;e.bgMapClick=function(a){var c=Group.selectedItem;if(null!=c){var b=egret.getQualifiedSuperclassName(c);if("Base"==
b||"ArrowTowerBase"==b||"ShieldTowerBase"==b||"MagicTowerBase"==b||"ExploTowerBase"==b)this.hideTool(null);else if("ShieldSoldierBase"==b||"SkillBase"==b)c.deselectItem(),b=Math.round(a.localX),a=Math.round(a.localY),this.checkPoint(b,a)&&c.setPoint([b,a]);Group.dispose()}};e.makeGrid=function(a){a=RES.getRes(a);var c,b,d=a.MapData.length,e=a.MapData[0].length;this._cellSize=a.TileWidth;this._grid=new Grid(d,e);for(c=0;c<d;c++)for(b=0;b<e;b++)1==a.MapData[c][b].val&&this._grid.setWalkable(c,b,!1)};
e.checkPoint=function(a,c){return!1==this._grid.getNode(Math.floor(a/this._cellSize),Math.floor(c/this._cellSize)).walkable?!1:!0};e.createUI=function(){this.guankaUI=new GuanKaUI(this.weaponLayer,this.objLayer);this.uiLayer.addChild(this.guankaUI);this.uiLayer.addEventListener(MainEvent.TRYAGAIN,this.tryAgainHandle,this);this.uiLayer.addEventListener(MainEvent.QUITGUANKA,this.quitHandle,this);var a=this;TweenMax.delayedCall(1.2,function(){a.guankaUI.showUI()})};e.createBase=function(a){for(var c=
0;c<this.basePoseArr.length;c++)this.base=new a,this.base.x=this.basePoseArr[c][0],this.base.y=this.basePoseArr[c][1],this.base.baseIdx=c,this.baseLayer.addChild(this.base),this.baseArr.push(this.base),this.base.touchEnabled=!0,this.base.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.baseOrTowerTouch,this),this.base.addEventListener(TowerEvent.SHOWTOOL,this.showTool,this),this.base.addEventListener(TowerEvent.HIDETOOL,this.hideTool,this)};e.baseOrTowerTouch=function(a){Group.selectItem(a.currentTarget)};
e.showTool=function(a){var c=a.currentTarget;this.oldSelect=c;this.tool=new BuildTool(a.obj,this.gold);this.tool.x=c.x;this.tool.y=c.y-17;this.toolLayer.addChild(this.tool);this.tool.addEventListener(ToolEvent.BUILD_START,this.buildStart,this);egret.getQualifiedSuperclassName(this.oldSelect)};e.hideTool=function(a){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);null!=this.tool&&(this.tool.removeEventListener(ToolEvent.BUILD_START,this.buildStart,this),this.tool.hide(),this.tool=
null)};e.buildStart=function(a){this.curX=this.oldSelect.x;this.curY=this.oldSelect.y;this.baseIdx=this.oldSelect.baseIdx;var c=a.className;if("ArrowTower01"==c||"ShieldTower01"==c||"MagicTower01"==c||"ExploTower01"==c)c=new BuildWait(c),c.x=this.curX,c.y=this.curY,this.objLayer.addChild(c),c.addEventListener(ToolEvent.BUILD_COMP,this.buildComp,this),this.gold-=a.price,this.guankaUI.setGold(this.gold),c={},c.className=a.className,c.x=this.curX,c.y=this.curY,c.baseIdx=this.baseIdx,this.buildQuene.push(c);
else if("SellTower"==c)a=egret.getQualifiedClassName(this.oldSelect),this.gold+=Math.round(TowerLevel.dic[a].price/3),this.guankaUI.setGold(this.gold),this.baseArr[this.baseIdx].addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.baseOrTowerTouch,this),SoundManager.playEffect("sell_tower");else{if("LockTower"==c)return;this.buildTower(this.oldSelect,c);this.gold-=a.price;this.guankaUI.setGold(this.gold)}Group.dispose();this.hideTool(null);this.oldSelect.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,
this.baseOrTowerTouch,this);"Base"!=egret.getQualifiedSuperclassName(this.oldSelect)&&(this.objLayer.removeChild(this.oldSelect),a=this.objArr.indexOf(this.oldSelect),-1!=a&&this.objArr.splice(a,1),a=this.towerArr.indexOf(this.oldSelect),-1!=a&&this.towerArr.splice(a,1),this.oldSelect.destory());this.oldSelect=null};e.buildComp=function(a){a=a.currentTarget;a.removeEventListener(ToolEvent.BUILD_COMP,this.buildComp,this);this.objLayer.removeChild(a);a=this.buildQuene.shift();this.buildTower(a,a.className)};
e.buildTower=function(a,c){var b=new (egret.getDefinitionByName(c));b.sx=b.x=a.x;b.sy=b.y=a.y;b.targets=this.enemyArr;b.baseIdx=a.baseIdx;var d=egret.getQualifiedSuperclassName(b);"ArrowTowerBase"==d||"ExploTowerBase"==d||"MagicTowerBase"==d?b.contentLayer=this.weaponLayer:"ShieldTowerBase"==d&&(b.objArr=this.objArr,b.contentLayer=this.objLayer,b.areaLayer=this.areaLayer,b.soldPoint=new egret.Point(this.soldPointArr[b.baseIdx][0],this.soldPointArr[b.baseIdx][1]));this.objLayer.addChild(b);this.objArr.push(b);
this.towerArr.push(b);b.touchEnabled=!0;b.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.baseOrTowerTouch,this);b.addEventListener(TowerEvent.SHOWTOOL,this.showTool,this);b.addEventListener(TowerEvent.HIDETOOL,this.hideTool,this);b.init()};e.onEnterFrame=function(a){this.removeEnemies();this.createEnemies(a);this.enterFrameTowers(a);if(this.guankaUI)this.guankaUI.onEnterFrame(a);this.objArr=Utils.sortarr(this.objArr);for(a=0;a<this.objArr.length;a++){var c=this.objArr[a];this.objLayer.contains(c)&&
this.objLayer.setChildIndex(c,a)}};e.removeEnemies=function(){var a;for(a=0;a<this.enemyArr.length;a++){var c=this.enemyArr[a];c.canClear&&(this.enemyArr.splice(a,1),c.beKill?(this.gold+=c.value,this.guankaUI.setGold(this.gold)):(this.life-=1,this.guankaUI.setLife(this.life),0==this.life&&this.lose()),this.boing&&0==this.enemyArr.length&&(this.curBo==this.allBo-1?Main.wujin?(this.curBo=-1,this.boSum+=this.allBo,this.hardxs+=this.perxs,this.hardxs2+=this.perxs2,this.boing=!1):0<this.life&&this.victory():
this.boing=!1))}for(a=0;a<this.objArr.length;a++)c=this.objArr[a],c.canClear&&this.objArr.splice(a,1)};e.createEnemies=function(a){this.boing?0!=this.boLeft&&(this.otime+=a,this.otime<this.mtime||(this.otime=0,this.addEnemys(a,this.boType,this.curRoadArr),this.boLeft-=1)):(this.delayToNextSum+=a,this.delayToNextSum>=this.delayToNext&&(this.otime=this.delayToNextSum=0,this.curBo++,this.curBo<this.allBo&&(this.boing=!0,this.boType=this.enemyData[this.curBo].type,this.boLeft=this.enemyData[this.curBo].count,
this.boLife=this.enemyData[this.curBo].life*this.hardxs,this.boSpeed=this.enemyData[this.curBo].maxSpeed,this.boDamage=this.enemyData[this.curBo].damage*this.hardxs,this.value=this.enemyData[this.curBo].value,Main.wujin?(this.guankaUI.setBos(this.curBo+1+this.boSum,this.curBo+1+this.boSum),StorageSetting.setGuankaWujin(Main.curIdx,this.boSum+this.curBo)):this.guankaUI.setBos(this.curBo+1,this.allBo),SoundManager.playEffect("bo_start"))))};e.addEnemys=function(a,c,b){void 0===b&&(b=null);a=ObjectPool.getInstance().createObject(Monster01);
a.addTexture(c);a.init(b,this.boLife,this.boSpeed,this.boDamage,this.value);this.objLayer.addChild(a);this.objArr.push(a);this.enemyArr.push(a)};e.enterFrameTowers=function(a){for(var c=this.towerArr.length,b,d=0;d<c;d++)b=this.towerArr[d],b.onEnterFrame(a)};e.quitHandle=function(a){Main.instance.dispatchEvent(new MainEvent(MainEvent.OPENLOADBAR,"maps"))};e.tryAgainHandle=function(a){};e.victory=function(){this.clear();this.guankaUI.showVictory();StorageSetting.setGuankaPass(Main.curIdx);StorageSetting.setTowerUpgrade(Main.curIdx)};
e.lose=function(){this.clear();this.guankaUI.showLose()};e.clear=function(){SoundManager.stopBgSound();egret.Ticker.getInstance().unregister(this.onEnterFrame,this);ObjectPool.getInstance().destroyAllObject()};e.destroy=function(){this.enemyArr=this.objArr=this.towerArr=this.enemyData=this.soldPointArr=this.basePoseArr=this.baseArr=this.curRoadArr=this.roadArr=null;ObjectPool.getInstance()._pool={}};return f}(egret.Sprite);GuankaBase.prototype.__class__="GuankaBase";
var ArrowShooterBase=function(d){function f(){d.call(this)}__extends(f,d);var e=f.prototype;e.onEnterFrame=function(a){this.currentLabel==this.endLabel&&this.gotoAndStop(this.idleLabel)};e.fire=function(a){"downR"==a?(this.startLabel="shootDown",this.endLabel="shootDownEnd",this.idleLabel="idleDown",this.scaleX=1):"upR"==a?(this.startLabel="shootUp",this.endLabel="shootUpEnd",this.idleLabel="idleUp",this.scaleX=1):"downL"==a?(this.startLabel="shootDown",this.endLabel="shootDownEnd",this.idleLabel=
"idleDown",this.scaleX=-1):"upL"==a&&(this.startLabel="shootUp",this.endLabel="shootUpEnd",this.idleLabel="idleUp",this.scaleX=-1);this.gotoAndPlay(this.startLabel)};return f}(egret.MovieClip);ArrowShooterBase.prototype.__class__="ArrowShooterBase";
var MagicWizardBase=function(d){function f(){d.call(this)}__extends(f,d);var e=f.prototype;e.onEnterFrame=function(a){this.checkLastEnd(this.stateLabel)};e.fire=function(a){"down"==a?(this.stateLabel="shoot_down",this.idleLabel="idleDown"):"up"==a&&(this.stateLabel="shoot_up",this.idleLabel="idleUp");this.gotoAndPlay(this.stateLabel)};e.checkLastEnd=function(a){(this._getFrameLabelForFrame(this.currentFrame+1).name!=a||this.currentFrame>=this.totalFrames)&&this.gotoAndStop(this.idleLabel)};return f}(egret.MovieClip);
MagicWizardBase.prototype.__class__="MagicWizardBase";
var ZenYuanBase=function(d){function f(){d.call(this);this.moveToTarget=!1;this.yoffset=this.xoffset=this.timesum=this.fireDelay=0;this.atjijie=!1;this.maxSoldRadius=60;this.minSoldRadius=40;this.sumTime=0;this.totalTime=3E4;this.voiceArr=["shield_fire1","shield_fire2","shield_fire3"];this.ratioSoldY=this.minSoldRadius/this.maxSoldRadius;this.fsm=new StateMachine(this);this.lifeBar=new LifeBar;this.addChild(this.lifeBar)}__extends(f,d);var e=f.prototype;e.setPath2=function(a){this.posArr.length=0;
this.posArr.push(a);this.fsm.changeState(1)};e.live=function(){0>=this._hp&&this.fsm.changeState(5);this._hp>this.life&&(this._hp=this.life)};Object.defineProperty(e,"hp",{get:function(){return this._hp},set:function(a){this._hp=a;this.live();this.lifeBar.setProgress(this._hp,this.life)},enumerable:!0,configurable:!0});e.onDestroy=function(){d.prototype.onDestroy.call(this);null!=this.target&&(this.target=this.target.target=null)};e.hittest=function(){if(null!=this.target&&(this.target.hp-=this.damage,
0>=this.target.hp)){var a=this.targets.indexOf(this.target);-1!=a&&this.targets.splice(a,1);a=this.atargets.indexOf(this.target);-1!=a&&this.atargets.splice(a,1);this.target=this.target.target=null}};e.onEnterFrame=function(a){this.timesum+=a;this.fsm.onEnterFrame(a);d.prototype.onEnterFrame.call(this,a);this.canClear&&ObjectPool.getInstance().destroyObject(this)};e.getMoveAngle=function(a){0<=a&&90>=a||270<=a&&360>=a?(this.stateLabel="running",this.view.scaleX=1):90<a&&270>a&&(this.stateLabel="running",
this.view.scaleX=-1)};e.idling=function(){0!=this.curState&&(this.curState=0,this.view.gotoAndStop(this.stateLabel));this.moveOrFight()};e.moving=function(){this.getMoveAngle(this._angle);1!=this.curState&&(this.curState=1,this.view.gotoAndPlay(this.stateLabel));this.checkLast(this.stateLabel)};e.movingEnd=function(){2!=this.curState&&(this.curState=2,this.fsm.changeState(0))};e.fighting=function(){if(3!=this.curState){this.curState=3;this.view.gotoAndPlay(this.stateLabel);null!=this.target&&(this.view.scaleX=
this.x<=this.target.x?1:-1);var a=Math.floor(3*Math.random());SoundManager.playEffect(this.voiceArr[a])}this.checkLastEnd(this.stateLabel)};e.fightingEnd=function(){4!=this.curState&&(this.curState=4,this.hittest(),this.timesum=0);null==this.target?this.fsm.changeState(0):this.timesum>=this.fireDelay&&(this.fsm.changeState(3),this.timesum=0)};e.dying=function(){5!=this.curState&&(this.curState=5,this.view.gotoAndPlay(this.stateLabel));this.checkLastEnd(this.stateLabel)};e.dyingEnd=function(){6!=this.curState&&
(this.curState=6,this.canClear=!0)};e.checkLast=function(a){this.view._getFrameLabelForFrame(this.view.currentFrame+1).name!=a&&this.view.gotoAndPlay(a)};e.checkLastEnd=function(a){if(this.view._getFrameLabelForFrame(this.view.currentFrame+1).name!=a||this.view.currentFrame>=this.view.totalFrames)this.view.stop(),3==this.curState?this.fsm.changeState(4):5==this.curState&&this.fsm.changeState(6)};e.isIdle=function(){this.stateLabel="idle";return!0};e.isMove=function(){return!0};e.isFighting=function(){this.stateLabel=
"fighting";return!0};e.isDead=function(){this.stateLabel="dead";return!0};e.moveOrFight=function(){this.getTarget();if(null!=this.target)if(this.moveToTarget)this.moveToTarget=!1,this.fsm.changeState(3),this.target.beAttack=!0;else{this.moveToTarget=!0;this.target.beAttack=!1;var a,c;a=this.target.x<this.x?this.target.x+16:this.target.x-16;c=this.target.y;this.atjijie=!1;this.setPath2(new Vector2D(a,c))}else this.moveToTarget=!1,0!=this.atargets.length||this.atjijie||(this.atjijie=!0,this.setPath2(this.jijieDian))};
e.getTarget=function(){var a;this.atargets=[];for(a=0;a<this.targets.length;a++){var c=this.targets[a],b=Utils.containsXY(c.x,c.y,this.x,this.y,this.maxSoldRadius,this.ratioSoldY),d=this.atargets.indexOf(c);b?-1==d&&this.atargets.push(c):-1!=d&&this.atargets.splice(d,1)}c=this.atargets.length;if(0<c&&null==this.target)for(a=0;a<c;a++)if(b=this.atargets[a],null==b.target){b.target=this;this.target=b;break}};return f}(VectorElements);ZenYuanBase.prototype.__class__="ZenYuanBase";
var ArrowBase=function(d){function f(){d.call(this);this.follow=this.isMiss=this.isHit=!1;this.t0=0;this.t1=20;this.g=1}__extends(f,d);var e=f.prototype;e.update=function(){this.follow&&(this.move(),this.hittest())};e.setTarget=function(a,c){this.pos=new egret.Point(a,c);this.xSpeed=(this.pos.x-this.p1.x)/this.t1;this.ySpeed=(this.pos.y-this.p1.y-this.t1/2*this.t1*this.g)/this.t1};e.move=function(){this.setTarget(this.target.x,this.target.y-this.offy);this.t0+=0.5;this.x=this.p1.x+this.t0*this.xSpeed;
this.y=this.p1.y+this.t0*this.ySpeed+this.g*this.t0*this.t0/2;this.t0+=0.5;var a=this.p1.x+this.t0*this.xSpeed,c=this.p1.y+this.t0*this.ySpeed+this.g*this.t0*this.t0/2;this.t0-=0.5;this.angel=Math.atan2(c-this.y,a-this.x);this.angle=this.rotation=180*this.angel/Math.PI+180};e.onEnterFrame=function(a){this.update();this.isHit&&(this.view.gotoAndPlay("hit"),this.isHit=!1);this.isMiss&&(this.view.gotoAndPlay("miss"),this.isMiss=!1);if("hitEnd"==this.view.currentLabel||"missEnd"==this.view.currentLabel)this.canClear=
!0;this.canClear&&ObjectPool.getInstance().destroyObject(this)};e.hittest=function(){if(!(0<=this.angle&&180>=this.angle)){var a=0>this.y-this.target.y-this.offy?this.target.y-this.offy-this.y:this.y-this.target.y-this.offy;if(1>=(0>this.x-this.target.x?this.target.x-this.x:this.x-this.target.x)&&1>=a){this.target.hp-=this.damage;if(this.target.hp<=-this.damage){this.isMiss=!0;this.rotation=270;var a=2-4*Math.random(),c=6*Math.random()+4;this.x+=a;this.y+=c}else this.isHit=!0,0.4<Math.random()?SoundManager.playEffect("arrow_hit2"):
SoundManager.playEffect("arrow_hit1");this.follow=!1}}};return f}(Elements);ArrowBase.prototype.__class__="ArrowBase";
var ExploBase=function(d){function f(){d.call(this);this.follow=this.isMiss=this.isHit=!1;this.minSoldRadius=this.maxSoldRadius=40;this.t0=0;this.t1=25;this.g=1}__extends(f,d);var e=f.prototype;e.update=function(){this.follow&&(this.move(),this.hittest())};e.setTarget=function(a,c){this.pos=new egret.Point(a,c);this.xSpeed=(this.pos.x-this.p1.x)/this.t1;this.ySpeed=(this.pos.y-this.p1.y-this.t1/2*this.t1*this.g)/this.t1};e.move=function(){this.setTarget(this.target.x,this.target.y-this.offy);this.t0+=
0.5;this.x=this.p1.x+this.t0*this.xSpeed;this.y=this.p1.y+this.t0*this.ySpeed+this.g*this.t0*this.t0/2;this.t0+=0.5;var a=this.p1.x+this.t0*this.xSpeed,c=this.p1.y+this.t0*this.ySpeed+this.g*this.t0*this.t0/2;this.t0-=0.5;this.angle=180*Math.atan2(c-this.y,a-this.x)/Math.PI+180};e.onEnterFrame=function(a){this.update();this.isHit&&(this.view.gotoAndPlay("hit"),this.isHit=!1);"hitEnd"==this.view.currentLabel&&(this.canClear=!0);this.canClear&&ObjectPool.getInstance().destroyObject(this)};e.hittest=
function(){if(!(0<=this.angle&&180>=this.angle)){var a=0>this.y-this.target.y-this.offy?this.target.y-this.offy-this.y:this.y-this.target.y-this.offy;if(1>=(0>this.x-this.target.x?this.target.x-this.x:this.x-this.target.x)&&1>=a){this.atargets=[];for(a=0;a<this.targets.length;a++){var c=this.targets[a],b=Utils.containsXY(c.x,c.y,this.x,this.y,this.maxSoldRadius,this.ratioSoldY),d=this.atargets.indexOf(c);b&&0<c.hp?-1==d&&this.atargets.push(c):-1!=d&&this.atargets.splice(d,1)}for(a=0;a<this.atargets.length;a++)c=
this.atargets[a],c.hp-=this.damage;this.isHit=!0;this.follow=!1;SoundManager.playEffect("explo_fireend1")}}};return f}(Elements);ExploBase.prototype.__class__="ExploBase";
var FireBallBase=function(d){function f(){d.call(this);this.follow=this.isHit=this.isTravel=!1;this.maxSoldRadius=40;this.minSoldRadius=30;this.fsm=new StateMachine(this)}__extends(f,d);var e=f.prototype;e.update=function(){};e.idling=function(){0!=this.curState&&(this.curState=0)};e.moving=function(){1!=this.curState&&(this.curState=1)};e.movingEnd=function(){2!=this.curState&&(this.curState=2,this.fsm.changeState(0),this.hittest())};e.isIdle=function(){return!0};e.isMove=function(){return!0};e.setPosArr=
function(){this._pathIndex=0;this.posArr.length=0;var a=new Vector2D(this.p1.x,this.p1.y);this.posArr.push(a);this.fsm.changeState(1)};e.onEnterFrame=function(a){d.prototype.onEnterFrame.call(this,a);this.fsm.onEnterFrame(a);this.update();this.isTravel&&(this.view.gotoAndPlay("travel"),this.isTravel=!1);this.isHit&&(this.view.gotoAndPlay("hit"),this.isHit=!1);"hitEnd"==this.view.currentLabel&&(this.canClear=!0);"travelEnd"==this.view.currentLabel&&this.view.gotoAndPlay("travel");this.canClear&&ObjectPool.getInstance().destroyObject(this)};
e.hittest=function(){var a=0>this.y-this.p1.y?this.p1.y-this.y:this.y-this.p1.y;if(1>=(0>this.x-this.p1.x?this.p1.x-this.x:this.x-this.p1.x)&&1>=a){this.atargets=[];for(a=0;a<this.targets.length;a++){var c=this.targets[a],b=Utils.containsXY(c.x,c.y,this.x,this.y,this.maxSoldRadius,this.ratioSoldY),d=this.atargets.indexOf(c);b&&0<c.hp?-1==d&&this.atargets.push(c):-1!=d&&this.atargets.splice(d,1)}for(a=0;a<this.atargets.length;a++)c=this.atargets[a],c.hp-=this.damage;this.isHit=!0}};return f}(VectorElements);
FireBallBase.prototype.__class__="FireBallBase";
var MagicBulletBase=function(d){function f(){d.call(this);this.follow=this.isHit=this.isTravel=!1;this.fsm=new StateMachine(this)}__extends(f,d);var e=f.prototype;e.update=function(){};e.idling=function(){0!=this.curState&&(this.curState=0)};e.moving=function(){1!=this.curState&&(this.curState=1);this.setPosArr()};e.movingEnd=function(){2!=this.curState&&(this.curState=2,this.fsm.changeState(0),this.hittest())};e.isIdle=function(){return!0};e.isMove=function(){return!0};e.setPosArr=function(){this._pathIndex=
0;this.posArr.length=0;var a=new Vector2D(this.target.x,this.target.y-this.target.offy);this.posArr.push(a);this.fsm.changeState(1)};e.onEnterFrame=function(a){d.prototype.onEnterFrame.call(this,a);this.rotation=this._angle;this.fsm.onEnterFrame(a);this.update();this.isTravel&&(this.view.gotoAndPlay("travel"),this.isTravel=!1);this.isHit&&(this.view.gotoAndPlay("hit"),this.isHit=!1);"hitEnd"==this.view.currentLabel&&(this.canClear=!0);"travelEnd"==this.view.currentLabel&&this.view.gotoAndPlay("travel");
this.canClear&&ObjectPool.getInstance().destroyObject(this)};e.hittest=function(){HitTest.hitTestRect(this,this.target)&&(this.target.hp-=this.damage,this.isHit=!0,this.follow=!1)};return f}(VectorElements);MagicBulletBase.prototype.__class__="MagicBulletBase";
var SoundManager=function(){function d(){}d.playEffect=function(d,e){void 0===e&&(e=1);var a=RES.getRes(d);a.type=egret.Sound.EFFECT;a.volume=e;a.play()};d.playBgSound=function(d,e){void 0===e&&(e=!0);this.sdbg=RES.getRes(d);this.sdbg.type=egret.Sound.MUSIC;this.sdbg.play(e)};d.stopBgSound=function(){this.sdbg.stop()};return d}();SoundManager.prototype.__class__="SoundManager";
var GameSetting=function(){function d(){}d.UpdateStage=function(d,e){this.swid=d;this.shei=e;console.log("arrive"+this.swid+"/"+this.shei)};d.swid=800;d.shei=480;d.goldStar=0;return d}();GameSetting.prototype.__class__="GameSetting";
var SoldEvent=function(d){function f(a,c,b,e,f){void 0===c&&(c=null);void 0===b&&(b=null);void 0===e&&(e=!1);void 0===f&&(f=!1);d.call(this,a,e,f);this._obj=c;this._arr=b}__extends(f,d);var e=f.prototype;Object.defineProperty(e,"obj",{get:function(){return this._obj},enumerable:!0,configurable:!0});Object.defineProperty(e,"arr",{get:function(){return this._arr},enumerable:!0,configurable:!0});f.SELECT="select";f.DESELECT="deselect";f.MOVE="move";return f}(egret.Event);
SoldEvent.prototype.__class__="SoldEvent";var stateType;(function(d){d[d.idleState=0]="idleState";d[d.moveState=1]="moveState";d[d.moveEndState=2]="moveEndState";d[d.fightState=3]="fightState";d[d.fightEndState=4]="fightEndState";d[d.deadState=5]="deadState";d[d.deadEndState=6]="deadEndState"})(stateType||(stateType={}));
var StateMachine=function(){function d(d){this._obj=d}var f=d.prototype;f.changeState=function(d){this._curState=d};f.onEnterFrame=function(d){switch(this._curState){case 0:this._obj.isIdle()&&this._obj.idling();break;case 1:this._obj.isMove()&&this._obj.moving();break;case 2:this._obj.movingEnd();break;case 3:this._obj.isFighting()&&this._obj.fighting();break;case 4:this._obj.fightingEnd();break;case 5:this._obj.isDead()&&this._obj.dying();break;case 6:this._obj.dyingEnd()}};Object.defineProperty(f,
"curState",{get:function(){return this._curState},enumerable:!0,configurable:!0});return d}();StateMachine.prototype.__class__="StateMachine";var Group=function(){function d(){}d.selectItem=function(f){if(d.selectedItem){if(d.selectedItem==f){d.selectedItem.reselectItem();return}d.selectedItem.deselectItem()}d.selectedItem=f;d.selectedItem&&(d.selectedItem.selectItem(),SoundManager.playEffect("select"))};d.dispose=function(){d.selectedItem=null};return d}();Group.prototype.__class__="Group";
var ObjectPool=function(){function d(){this._isPause=!1;this._pool={};this._list=[];egret.Ticker.getInstance().register(this.onEnterFrame,this)}var f=d.prototype;f.onEnterFrame=function(d){for(var a=this._list.concat(),c=0,b=a.length;c<b;c++)a[c].onEnterFrame(d)};f.pauseEnterFrame=function(){this._isPause=!0};f.resumeEnterFrame=function(){this._isPause=!1};f.createObject=function(d){var a=egret.getQualifiedClassName(d),a=this._pool[a];d=null!=a&&a.length?a.shift():new d;d.onCreate();this._list.push(d);
return d};f.destroyObject=function(d){var a=egret.getQualifiedClassName(d);null==this._pool[a]&&(this._pool[a]=[]);-1==this._pool[a].indexOf(d)&&this._pool[a].push(d);d.onDestroy();d=this._list.indexOf(d);-1!=d&&this._list.splice(d,1)};f.destroyObjectByKey=function(d){for(var a=0;a<this._list.length;a++)this._list[a].key==d&&(this._list[a].onDestroy(),a--)};f.destroyAllObject=function(){for(;this._list.length;)this.destroyObject(this._list[0])};d.getInstance=function(){null==d.instance&&(d.instance=
new d);return d.instance};return d}();ObjectPool.prototype.__class__="ObjectPool";
var Vector2D=function(){function d(d,a){void 0===d&&(d=0);void 0===a&&(a=0);this._x=d;this._y=a}var f=d.prototype;f.draw=function(d,a){void 0===a&&(a=0);d.lineStyle(0,a);d.moveTo(0,0);d.lineTo(this._x,this._y)};f.clone=function(){return new d(this.x,this.y)};f.zero=function(){this._y=this._x=0;return this};f.isZero=function(){return 0==this._x&&0==this._y};Object.defineProperty(f,"length",{get:function(){return Math.sqrt(this.lengthSQ)},set:function(d){var a=this.angle;this._x=Math.cos(a)*d;this._y=
Math.sin(a)*d},enumerable:!0,configurable:!0});Object.defineProperty(f,"lengthSQ",{get:function(){return this._x*this._x+this._y*this._y},enumerable:!0,configurable:!0});Object.defineProperty(f,"angle",{get:function(){return Math.atan2(this._y,this._x)},set:function(d){var a=this.length;this._x=Math.cos(d)*a;this._y=Math.sin(d)*a},enumerable:!0,configurable:!0});f.normalize=function(){if(0==this.length)return this._x=1,this;var d=this.length;this._x/=d;this._y/=d;return this};f.truncate=function(d){this.length=
Math.min(d,this.length);return this};f.reverse=function(){this._x=-this._x;this._y=-this._y;return this};f.isNormalized=function(){return 1==this.length};f.dotProd=function(d){return this._x*d.x+this._y*d.y};f.crossProd=function(d){return this._x*d.y-this._y*d.x};d.angleBetween=function(d,a){d.isNormalized()||(d=d.clone().normalize());a.isNormalized()||(a=a.clone().normalize());return Math.acos(d.dotProd(a))};f.sign=function(d){return 0>this.perp.dotProd(d)?-1:1};Object.defineProperty(f,"perp",{get:function(){return new d(-this.y,
this.x)},enumerable:!0,configurable:!0});f.dist=function(d){return Math.sqrt(this.distSQ(d))};f.distSQ=function(d){var a=d.x-this.x;d=d.y-this.y;return a*a+d*d};f.add=function(e){return new d(this._x+e.x,this._y+e.y)};f.subtract=function(e){return new d(this._x-e.x,this._y-e.y)};f.multiply=function(e){return new d(this._x*e,this._y*e)};f.divide=function(e){return new d(this._x/e,this._y/e)};f.equals=function(d){return this._x==d.x&&this._y==d.y};Object.defineProperty(f,"x",{get:function(){return this._x},
set:function(d){this._x=d},enumerable:!0,configurable:!0});Object.defineProperty(f,"y",{get:function(){return this._y},set:function(d){this._y=d},enumerable:!0,configurable:!0});f.tostring=function(){return"[Vector2D (x:"+this._x+", y:"+this._y+")]"};return d}();Vector2D.prototype.__class__="Vector2D";
var Explo031=function(d){function f(){d.call(this);this.ratioSoldY=this.minSoldRadius/this.maxSoldRadius;this.view=new egret.MovieClip;this.addChild(this.view);this.anchorX=0.5;this.anchorY=1;var a=RES.getRes("Explo031json"),c=RES.getRes("Explo031png"),a=new egret.MovieClipDataFactory(a,c);this.view.movieClipData=a.generateMovieClipData("Explo03_1");this.view.anchorX=0.5;this.view.x=this.view.width/2;this.view.anchorY=1;this.view.y=this.view.height;this.damage=1}__extends(f,d);var e=f.prototype;e.onCreate=
function(){this.isMiss=this.follow=this.isHit=this.canClear=!1;this.target=null;this.view.gotoAndStop(1);this.ySpeed=this.xSpeed=this.t0=0;this.pos=null};e.init=function(a,c,b){this.x=a.x;this.y=a.y;this.p1=a;this.target=c;this.offy=0;this.setTarget(this.target.x,this.target.y-this.offy);this.follow=!0};e.onEnterFrame=function(a){d.prototype.onEnterFrame.call(this,a)};return f}(ExploBase);Explo031.prototype.__class__="Explo031";
var ArrowShooter01=function(d){function f(){d.call(this);this.anchorX=0.5;var e=RES.getRes("ArrowShooter01json"),a=RES.getRes("ArrowShooter01png");this.movieClipData=(new egret.MovieClipDataFactory(e,a)).generateMovieClipData("ArrowShooter01");this.endLabel=this.startLabel="";this.idleLabel="idleDown"}__extends(f,d);return f}(ArrowShooterBase);ArrowShooter01.prototype.__class__="ArrowShooter01";
var ArrowShooter02=function(d){function f(){d.call(this);this.anchorX=0.5;var e=RES.getRes("ArrowShooter02json"),a=RES.getRes("ArrowShooter02png");this.movieClipData=(new egret.MovieClipDataFactory(e,a)).generateMovieClipData("ArrowShooter02");this.endLabel=this.startLabel="";this.idleLabel="idleDown"}__extends(f,d);return f}(ArrowShooterBase);ArrowShooter02.prototype.__class__="ArrowShooter02";
var ArrowShooter031=function(d){function f(){d.call(this);this.anchorX=0.5;var e=RES.getRes("ArrowShooter031json"),a=RES.getRes("ArrowShooter031png");this.movieClipData=(new egret.MovieClipDataFactory(e,a)).generateMovieClipData("ArrowShooter03_1");this.endLabel=this.startLabel="";this.idleLabel="idleDown"}__extends(f,d);return f}(ArrowShooterBase);ArrowShooter031.prototype.__class__="ArrowShooter031";
var ArrowShooter032=function(d){function f(){d.call(this);this.anchorX=0.5;var e=RES.getRes("ArrowShooter032json"),a=RES.getRes("ArrowShooter032png");this.movieClipData=(new egret.MovieClipDataFactory(e,a)).generateMovieClipData("ArrowShooter03_2");this.endLabel=this.startLabel="";this.idleLabel="idleDown"}__extends(f,d);return f}(ArrowShooterBase);ArrowShooter032.prototype.__class__="ArrowShooter032";
var MagicWizard010203=function(d){function f(){d.call(this);this.anchorX=0.5;var e=RES.getRes("MagicWizard010203json"),a=RES.getRes("MagicWizard010203png");this.movieClipData=(new egret.MovieClipDataFactory(e,a)).generateMovieClipData("MagicWizard010203");this.idleLabel=this.stateLabel="idleDown"}__extends(f,d);return f}(MagicWizardBase);MagicWizard010203.prototype.__class__="MagicWizard010203";
var ShieldSoldier01=function(d){function f(){d.call(this);this.addTexture()}__extends(f,d);var e=f.prototype;e.addTexture=function(){this.anchorX=0.5;this.anchorY=1;this.view=new egret.MovieClip;this.addChild(this.view);var a=RES.getRes("ShieldSoilder01json"),c=RES.getRes("ShieldSoilder01png"),a=new egret.MovieClipDataFactory(a,c);this.view.movieClipData=a.generateMovieClipData("ShieldSoilder01");this.view.anchorX=0.5;this.view.x=this.view.width/2;this.lifeBar.x=27;this.lifeBar.y=10;this._maxSpeed=
0.6;this.fireDelay=1E3};e.onCreate=function(){this.hp=40;this.posArr=[];this.timesum=this._pathIndex=0;this.lifeBar.reSet();this.moveToTarget=this.atjijie=this.canClear=!1;this.fsm.changeState(0);this.curState=0;this.view.touchEnabled=!0;this.view.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.viewSelect,this)};e.init=function(a){this.hp=this.life;this.atjijie=!0;this._position.x=this.x=a[0][0];this._position.y=this.y=a[0][1];var c=1;for(c;c<a.length;c++)this.jijieDian=new Vector2D(a[c][0]+this.xoffset,
a[c][1]+this.yoffset),this.posArr.push(this.jijieDian);this.fsm.changeState(1)};e.setPoint=function(a){this.dispatchEvent(new SoldEvent(SoldEvent.MOVE,this,a))};e.setPath=function(a){this.atjijie=!0;this.posArr.length=0;this.jijieDian=new Vector2D(a[0]+this.xoffset,a[1]+this.yoffset);this.posArr.push(this.jijieDian);this.fsm.changeState(1);null!=this.target&&(null!=this.target.target&&(this.target.target=null),this.target=null)};e.onEnterFrame=function(a){d.prototype.onEnterFrame.call(this,a)};e.viewSelect=
function(a){Group.selectItem(this)};e.onDestroy=function(){d.prototype.onDestroy.call(this);this.view.touchEnabled=!1;this.view.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.viewSelect,this)};return f}(ShieldSoldierBase);ShieldSoldier01.prototype.__class__="ShieldSoldier01";
var ExploTower03_1=function(d){function f(){d.call(this);this.minRadius=100;this.maxRadius=140;this.ratioY=this.minRadius/this.maxRadius;this.anchorX=0.5;this.anchorY=1;this.view=new egret.MovieClip;this.addChild(this.view);var e=RES.getRes("ExploTower031json"),a=RES.getRes("ExploTower031png"),e=new egret.MovieClipDataFactory(e,a);this.view.movieClipData=e.generateMovieClipData("ExploTower03_1");this.view.anchorX=0.5;this.view.x=this.view.width/2;this.fireDelay=2E3}__extends(f,d);f.prototype.onEnterFrame=
function(e){d.prototype.onEnterFrame.call(this,e);0==this.atargets.length?this.timesum=this.fireDelay-299:(this.target=this.atargets[0],this.timesum+=e,this.timesum<this.fireDelay?300>this.fireDelay-this.timesum&&!this.isfire&&(this.view.gotoAndPlay("shoot"),this.isfire=!0):(this.timesum=0,this.isfire=!1,e=new egret.Point(this.sx,this.sy-46),this.weapon=ObjectPool.getInstance().createObject(Explo031),this.weapon.damage=18,this.weapon.targets=this.atargets,this.weapon.init(e,this.target,this.target.offy),
this.contentLayer.addChild(this.weapon)))};return f}(ExploTowerBase);ExploTower03_1.prototype.__class__="ExploTower03_1";
var Utils=function(){function d(){}d.createBitmapByName=function(d){var e=new egret.Bitmap;d=RES.getRes(d);e.texture=d;return e};d.containsXY=function(d,e,a,c,b,h){void 0===h&&(h=0.5);d-=a;e=(e-c)/h;return Math.sqrt(d*d+e*e)<b?!0:!1};d.containsXY2=function(d,e){return 40<d&&d<GameSetting.swid-80&&40<e&&e<GameSetting.shei-80?!0:!1};d.drawEllipse=function(d,e,a,c){c=new egret.Shape;c.graphics.lineStyle(1,a);c.graphics.drawEllipse(0,0,d,e);c.graphics.endFill();return c};d.sortarr=function(d){for(var e,
a=0;a<d.length;a++)for(var c=d.length-1;c>a;c--)d[c].y<d[c-1].y&&(e=d[c],d[c]=d[c-1],d[c-1]=e);return d};return d}();Utils.prototype.__class__="Utils";
var Arrow01=function(d){function f(){d.call(this);this.view=new egret.MovieClip;this.addChild(this.view);this.anchorY=0.5;var a=RES.getRes("Arrow01json"),c=RES.getRes("Arrow01png"),a=new egret.MovieClipDataFactory(a,c);this.view.movieClipData=a.generateMovieClipData("Arrow01");this.damage=1}__extends(f,d);var e=f.prototype;e.onCreate=function(){this.isMiss=this.follow=this.isHit=this.canClear=!1;this.target=null;this.view.gotoAndStop(1);this.ySpeed=this.xSpeed=this.t0=0;this.pos=null};e.init=function(a,
c,b){this.x=a.x;this.y=a.y;this.p1=a;this.target=c;this.offy=b;this.setTarget(this.target.x,this.target.y-this.offy);this.follow=!0};e.onEnterFrame=function(a){d.prototype.onEnterFrame.call(this,a)};return f}(ArrowBase);Arrow01.prototype.__class__="Arrow01";
var Arrow032=function(d){function f(){d.call(this);this.view=new egret.MovieClip;this.addChild(this.view);this.anchorY=0.5;var a=RES.getRes("Arrow032json"),c=RES.getRes("Arrow032png"),a=new egret.MovieClipDataFactory(a,c);this.view.movieClipData=a.generateMovieClipData("Arrow032");this.damage=1}__extends(f,d);var e=f.prototype;e.onCreate=function(){this.isMiss=this.follow=this.isHit=this.canClear=!1;this.target=null;this.view.gotoAndStop(1);this.ySpeed=this.xSpeed=this.t0=0;this.pos=null};e.init=
function(a,c,b){this.x=a.x;this.y=a.y;this.p1=a;this.target=c;this.offy=b;this.setTarget(this.target.x,this.target.y-this.offy);this.follow=!0};e.onEnterFrame=function(a){d.prototype.onEnterFrame.call(this,a)};return f}(ArrowBase);Arrow032.prototype.__class__="Arrow032";
var Explo01=function(d){function f(){d.call(this);this.ratioSoldY=this.minSoldRadius/this.maxSoldRadius;this.view=new egret.MovieClip;this.addChild(this.view);this.anchorX=0.5;this.anchorY=1;var a=RES.getRes("Explo01json"),c=RES.getRes("Explo01png"),a=new egret.MovieClipDataFactory(a,c);this.view.movieClipData=a.generateMovieClipData("Explo01");this.view.anchorX=0.5;this.view.x=this.view.width/2;this.view.anchorY=1;this.view.y=this.view.height;this.damage=1}__extends(f,d);var e=f.prototype;e.onCreate=
function(){this.isMiss=this.follow=this.isHit=this.canClear=!1;this.target=null;this.view.gotoAndStop(1);this.ySpeed=this.xSpeed=this.t0=0;this.pos=null};e.init=function(a,c,b){this.x=a.x;this.y=a.y;this.p1=a;this.target=c;this.offy=0;this.setTarget(this.target.x,this.target.y-this.offy);this.follow=!0};e.onEnterFrame=function(a){d.prototype.onEnterFrame.call(this,a)};return f}(ExploBase);Explo01.prototype.__class__="Explo01";
var Explo02=function(d){function f(){d.call(this);this.ratioSoldY=this.minSoldRadius/this.maxSoldRadius;this.view=new egret.MovieClip;this.addChild(this.view);this.anchorX=0.5;this.anchorY=1;var a=RES.getRes("Explo02json"),c=RES.getRes("Explo02png"),a=new egret.MovieClipDataFactory(a,c);this.view.movieClipData=a.generateMovieClipData("Explo02");this.view.anchorX=0.5;this.view.x=this.view.width/2;this.view.anchorY=1;this.view.y=this.view.height;this.damage=1}__extends(f,d);var e=f.prototype;e.onCreate=
function(){this.isMiss=this.follow=this.isHit=this.canClear=!1;this.target=null;this.view.gotoAndStop(1);this.ySpeed=this.xSpeed=this.t0=0;this.pos=null};e.init=function(a,c,b){this.x=a.x;this.y=a.y;this.p1=a;this.target=c;this.offy=0;this.setTarget(this.target.x,this.target.y-this.offy);this.follow=!0};e.onEnterFrame=function(a){d.prototype.onEnterFrame.call(this,a)};return f}(ExploBase);Explo02.prototype.__class__="Explo02";
var MagicBullet010203=function(d){function f(){d.call(this);this.view=new egret.MovieClip;this.addChild(this.view);this.anchorX=this.anchorY=0.5;var a=RES.getRes("MagicBullet010203json"),c=RES.getRes("MagicBullet010203png"),a=new egret.MovieClipDataFactory(a,c);this.view.movieClipData=a.generateMovieClipData("MagicBullet010203")}__extends(f,d);var e=f.prototype;e.onCreate=function(){this.follow=this.isHit=this.canClear=!1;this.isTravel=!0;this.target=null;this._maxSpeed=2;this.fsm.changeState(0);
this.curState=0};e.init=function(a,c){this.target=c;this._position.x=this.x=a.x;this._position.y=this.y=a.y;this.setPosArr()};e.onEnterFrame=function(a){d.prototype.onEnterFrame.call(this,a)};return f}(MagicBulletBase);MagicBullet010203.prototype.__class__="MagicBullet010203";
var ArrowTower01=function(d){function f(){d.call(this);this.minRadius=100;this.maxRadius=140;this.ratioY=this.minRadius/this.maxRadius;this.anchorX=0.5;this.anchorY=1;this.bm=Utils.createBitmapByName("ArrowTower01");this.addChild(this.bm);this.st1=new ArrowShooter01;this.st1.x=36;this.st1.y=15;this.addChild(this.st1);this.st2=new ArrowShooter01;this.st2.x=50;this.st2.y=15;this.addChild(this.st2);this.fireDelay=1E3}__extends(f,d);f.prototype.onEnterFrame=function(e){d.prototype.onEnterFrame.call(this,
e);this.st1.onEnterFrame(e);this.st2.onEnterFrame(e);if(0==this.atargets.length)this.timesum=this.fireDelay;else if(this.timesum+=e,!(this.timesum<this.fireDelay)){this.timesum=0;this.target=this.atargets[0];this.target.x>=this.sx&&this.target.y<=this.sy-22&&(this.direct="upR");this.target.x>=this.sx&&this.target.y>this.sy-22&&(this.direct="downR");this.target.x<this.sx&&this.target.y<=this.sy-22&&(this.direct="upL");this.target.x<this.sx&&this.target.y>this.sy-22&&(this.direct="downL");this.playFireVoice();
var a;"L"==this.firstst?(this.st1.fire(this.direct),this.firstst="R",a=new egret.Point(this.sx-5,this.sy-46)):"R"==this.firstst&&(this.st2.fire(this.direct),this.firstst="L",a=new egret.Point(this.sx+5,this.sy-46));this.weapon=ObjectPool.getInstance().createObject(Arrow01);this.weapon.damage=4;this.weapon.init(a,this.target,this.target.offy);this.contentLayer.addChild(this.weapon)}};return f}(ArrowTowerBase);ArrowTower01.prototype.__class__="ArrowTower01";
var ArrowTower02=function(d){function f(){d.call(this);this.minRadius=100;this.maxRadius=140;this.ratioY=this.minRadius/this.maxRadius;this.anchorX=0.5;this.anchorY=1;this.bm=Utils.createBitmapByName("ArrowTower02");this.addChild(this.bm);this.st1=new ArrowShooter02;this.st1.x=36;this.st1.y=10;this.addChild(this.st1);this.st2=new ArrowShooter02;this.st2.x=50;this.st2.y=10;this.addChild(this.st2);this.fireDelay=1E3}__extends(f,d);f.prototype.onEnterFrame=function(e){d.prototype.onEnterFrame.call(this,
e);this.st1.onEnterFrame(e);this.st2.onEnterFrame(e);if(0==this.atargets.length)this.timesum=this.fireDelay;else if(this.timesum+=e,!(this.timesum<this.fireDelay)){this.timesum=0;this.target=this.atargets[0];this.target.x>=this.sx&&this.target.y<=this.sy-22&&(this.direct="upR");this.target.x>=this.sx&&this.target.y>this.sy-22&&(this.direct="downR");this.target.x<this.sx&&this.target.y<=this.sy-22&&(this.direct="upL");this.target.x<this.sx&&this.target.y>this.sy-22&&(this.direct="downL");this.playFireVoice();
var a;"L"==this.firstst?(this.st1.fire(this.direct),this.firstst="R",a=new egret.Point(this.sx-5,this.sy-47)):"R"==this.firstst&&(this.st2.fire(this.direct),this.firstst="L",a=new egret.Point(this.sx+5,this.sy-47));this.weapon=ObjectPool.getInstance().createObject(Arrow01);this.weapon.damage=8;this.weapon.init(a,this.target,this.target.offy);this.contentLayer.addChild(this.weapon)}};return f}(ArrowTowerBase);ArrowTower02.prototype.__class__="ArrowTower02";
var ArrowTower03_1=function(d){function f(){d.call(this);this.minRadius=100;this.maxRadius=140;this.ratioY=this.minRadius/this.maxRadius;this.anchorX=0.5;this.anchorY=1;this.bm=Utils.createBitmapByName("ArrowTower03_1");this.addChild(this.bm);this.st1=new ArrowShooter031;this.st1.x=36;this.st1.y=5;this.addChild(this.st1);this.st2=new ArrowShooter031;this.st2.x=50;this.st2.y=5;this.addChild(this.st2);this.fireDelay=1E3}__extends(f,d);f.prototype.onEnterFrame=function(e){d.prototype.onEnterFrame.call(this,
e);this.st1.onEnterFrame(e);this.st2.onEnterFrame(e);if(0==this.atargets.length)this.timesum=this.fireDelay;else if(this.timesum+=e,!(this.timesum<this.fireDelay)){this.timesum=0;this.target=this.atargets[0];this.target.x>=this.sx&&this.target.y<=this.sy-22&&(this.direct="upR");this.target.x>=this.sx&&this.target.y>this.sy-22&&(this.direct="downR");this.target.x<this.sx&&this.target.y<=this.sy-22&&(this.direct="upL");this.target.x<this.sx&&this.target.y>this.sy-22&&(this.direct="downL");this.playFireVoice();
var a;"L"==this.firstst?(this.st1.fire(this.direct),this.firstst="R",a=new egret.Point(this.sx-5,this.sy-54)):"R"==this.firstst&&(this.st2.fire(this.direct),this.firstst="L",a=new egret.Point(this.sx+5,this.sy-54));this.weapon=ObjectPool.getInstance().createObject(Arrow01);this.weapon.damage=12;this.weapon.init(a,this.target,this.target.offy);this.contentLayer.addChild(this.weapon)}};return f}(ArrowTowerBase);ArrowTower03_1.prototype.__class__="ArrowTower03_1";
var ArrowTower03_2=function(d){function f(){d.call(this);this.minRadius=100;this.maxRadius=140;this.ratioY=this.minRadius/this.maxRadius;this.anchorX=0.5;this.anchorY=1;this.bm=Utils.createBitmapByName("ArrowTower03_2");this.addChild(this.bm);this.st1=new ArrowShooter032;this.st1.x=36;this.st1.y=9;this.addChild(this.st1);this.st2=new ArrowShooter032;this.st2.x=50;this.st2.y=9;this.addChild(this.st2);this.fireDelay=1E3}__extends(f,d);f.prototype.onEnterFrame=function(e){d.prototype.onEnterFrame.call(this,
e);this.st1.onEnterFrame(e);this.st2.onEnterFrame(e);if(0==this.atargets.length)this.timesum=this.fireDelay;else if(this.timesum+=e,!(this.timesum<this.fireDelay)){this.timesum=0;this.target=this.atargets[0];this.target.x>=this.sx&&this.target.y<=this.sy-22&&(this.direct="upR");this.target.x>=this.sx&&this.target.y>this.sy-22&&(this.direct="downR");this.target.x<this.sx&&this.target.y<=this.sy-22&&(this.direct="upL");this.target.x<this.sx&&this.target.y>this.sy-22&&(this.direct="downL");this.playFireVoice();
var a;"L"==this.firstst?(this.st1.fire(this.direct),this.firstst="R",a=new egret.Point(this.sx-5,this.sy-55)):"R"==this.firstst&&(this.st2.fire(this.direct),this.firstst="L",a=new egret.Point(this.sx+5,this.sy-55));this.weapon=ObjectPool.getInstance().createObject(Arrow032);this.weapon.damage=16;this.weapon.init(a,this.target,this.target.offy);this.contentLayer.addChild(this.weapon)}};return f}(ArrowTowerBase);ArrowTower03_2.prototype.__class__="ArrowTower03_2";
var ExploTower01=function(d){function f(){d.call(this);this.minRadius=100;this.maxRadius=140;this.ratioY=this.minRadius/this.maxRadius;this.anchorX=0.5;this.anchorY=1;this.view=new egret.MovieClip;this.addChild(this.view);var e=RES.getRes("ExploTower01json"),a=RES.getRes("ExploTower01png"),e=new egret.MovieClipDataFactory(e,a);this.view.movieClipData=e.generateMovieClipData("ExploTower01");this.view.anchorX=0.5;this.view.x=this.view.width/2;this.fireDelay=2E3}__extends(f,d);f.prototype.onEnterFrame=
function(e){d.prototype.onEnterFrame.call(this,e);0==this.atargets.length?this.timesum=this.fireDelay-299:(this.target=this.atargets[0],this.timesum+=e,this.timesum<this.fireDelay?300>this.fireDelay-this.timesum&&!this.isfire&&(this.view.gotoAndPlay("shoot"),this.isfire=!0):(this.timesum=0,this.isfire=!1,this.playFireVoice(),e=new egret.Point(this.sx,this.sy-46),this.weapon=ObjectPool.getInstance().createObject(Explo01),this.weapon.damage=6,this.weapon.targets=this.atargets,this.weapon.init(e,this.target,
this.target.offy),this.contentLayer.addChild(this.weapon)))};return f}(ExploTowerBase);ExploTower01.prototype.__class__="ExploTower01";
var ExploTower02=function(d){function f(){d.call(this);this.minRadius=100;this.maxRadius=140;this.ratioY=this.minRadius/this.maxRadius;this.anchorX=0.5;this.anchorY=1;this.view=new egret.MovieClip;this.addChild(this.view);var e=RES.getRes("ExploTower02json"),a=RES.getRes("ExploTower02png"),e=new egret.MovieClipDataFactory(e,a);this.view.movieClipData=e.generateMovieClipData("ExploTower02");this.view.anchorX=0.5;this.view.x=this.view.width/2;this.fireDelay=2E3}__extends(f,d);f.prototype.onEnterFrame=
function(e){d.prototype.onEnterFrame.call(this,e);0==this.atargets.length?this.timesum=this.fireDelay-299:(this.target=this.atargets[0],this.timesum+=e,this.timesum<this.fireDelay?300>this.fireDelay-this.timesum&&!this.isfire&&(this.view.gotoAndPlay("shoot"),this.isfire=!0):(this.timesum=0,this.isfire=!1,this.playFireVoice(),e=new egret.Point(this.sx,this.sy-46),this.weapon=ObjectPool.getInstance().createObject(Explo02),this.weapon.damage=12,this.weapon.targets=this.atargets,this.weapon.init(e,this.target,
this.target.offy),this.contentLayer.addChild(this.weapon)))};return f}(ExploTowerBase);ExploTower02.prototype.__class__="ExploTower02";
var ExploTower03_2=function(d){function f(){d.call(this);this.minRadius=100;this.maxRadius=140;this.ratioY=this.minRadius/this.maxRadius;this.anchorX=0.5;this.anchorY=1;this.view=new egret.MovieClip;this.addChild(this.view);var e=RES.getRes("ExploTower031json"),a=RES.getRes("ExploTower031png"),e=new egret.MovieClipDataFactory(e,a);this.view.movieClipData=e.generateMovieClipData("ExploTower03_1");this.view.anchorX=0.5;this.view.x=this.view.width/2;this.fireDelay=2E3}__extends(f,d);f.prototype.onEnterFrame=
function(e){d.prototype.onEnterFrame.call(this,e);0==this.atargets.length?this.timesum=this.fireDelay-299:(this.target=this.atargets[0],this.timesum+=e,this.timesum<this.fireDelay?300>this.fireDelay-this.timesum&&!this.isfire&&(this.view.gotoAndPlay("shoot"),this.isfire=!0):(this.timesum=0,this.isfire=!1,e=new egret.Point(this.sx,this.sy-46),this.weapon=ObjectPool.getInstance().createObject(Explo031),this.weapon.damage=24,this.weapon.targets=this.atargets,this.weapon.init(e,this.target,this.target.offy),
this.contentLayer.addChild(this.weapon)))};return f}(ExploTowerBase);ExploTower03_2.prototype.__class__="ExploTower03_2";
var MagicTower01=function(d){function f(){d.call(this);this.minRadius=100;this.maxRadius=140;this.ratioY=this.minRadius/this.maxRadius;this.anchorX=0.5;this.anchorY=1;this.bm=Utils.createBitmapByName("MagicTower01");this.addChild(this.bm);this.st=new MagicWizard010203;this.st.x=43;this.st.y=6;this.addChild(this.st);this.fireDelay=1E3}__extends(f,d);f.prototype.onEnterFrame=function(e){d.prototype.onEnterFrame.call(this,e);this.st.onEnterFrame(e);0==this.atargets.length?this.timesum=this.fireDelay-
299:(this.target=this.atargets[0],this.target.y<=this.sy-22&&(this.direct="up"),this.target.y>this.sy-22&&(this.direct="down"),this.timesum+=e,this.timesum<this.fireDelay?300>this.fireDelay-this.timesum&&!this.isfire&&(this.st.fire(this.direct),this.isfire=!0):(this.timesum=0,this.isfire=!1,this.playFireVoice(),e="down"==this.direct?new egret.Point(this.sx-9,this.sy-58):new egret.Point(this.sx+5,this.sy-58),this.weapon=ObjectPool.getInstance().createObject(MagicBullet010203),this.weapon.damage=7,
this.contentLayer.addChild(this.weapon),this.weapon.init(e,this.target)))};return f}(MagicTowerBase);MagicTower01.prototype.__class__="MagicTower01";
var MagicTower02=function(d){function f(){d.call(this);this.minRadius=100;this.maxRadius=140;this.ratioY=this.minRadius/this.maxRadius;this.anchorX=0.5;this.anchorY=1;this.bm=Utils.createBitmapByName("MagicTower02");this.addChild(this.bm);this.st=new MagicWizard010203;this.st.x=38;this.st.y=3;this.addChild(this.st);this.fireDelay=1E3}__extends(f,d);f.prototype.onEnterFrame=function(e){d.prototype.onEnterFrame.call(this,e);this.st.onEnterFrame(e);0==this.atargets.length?this.timesum=this.fireDelay-
299:(this.target=this.atargets[0],this.target.y<=this.sy-22&&(this.direct="up"),this.target.y>this.sy-22&&(this.direct="down"),this.timesum+=e,this.timesum<this.fireDelay?300>this.fireDelay-this.timesum&&!this.isfire&&(this.st.fire(this.direct),this.isfire=!0):(this.timesum=0,this.isfire=!1,this.playFireVoice(),e="down"==this.direct?new egret.Point(this.sx-9,this.sy-58):new egret.Point(this.sx+5,this.sy-58),this.weapon=ObjectPool.getInstance().createObject(MagicBullet010203),this.weapon.damage=14,
this.contentLayer.addChild(this.weapon),this.weapon.init(e,this.target)))};return f}(MagicTowerBase);MagicTower02.prototype.__class__="MagicTower02";
var MagicTower03_1=function(d){function f(){d.call(this);this.minRadius=100;this.maxRadius=140;this.ratioY=this.minRadius/this.maxRadius;this.anchorX=0.5;this.anchorY=1;this.bm=Utils.createBitmapByName("MagicTower03_1");this.addChild(this.bm);this.st=new MagicWizard010203;this.st.x=43;this.st.y=2;this.addChild(this.st);this.fireDelay=1E3}__extends(f,d);f.prototype.onEnterFrame=function(e){d.prototype.onEnterFrame.call(this,e);this.st.onEnterFrame(e);0==this.atargets.length?this.timesum=this.fireDelay-
299:(this.target=this.atargets[0],this.target.y<=this.sy-22&&(this.direct="up"),this.target.y>this.sy-22&&(this.direct="down"),this.timesum+=e,this.timesum<this.fireDelay?300>this.fireDelay-this.timesum&&!this.isfire&&(this.st.fire(this.direct),this.isfire=!0):(this.timesum=0,this.isfire=!1,this.playFireVoice(),e="down"==this.direct?new egret.Point(this.sx-9,this.sy-58):new egret.Point(this.sx+5,this.sy-58),this.weapon=ObjectPool.getInstance().createObject(MagicBullet010203),this.weapon.damage=21,
this.contentLayer.addChild(this.weapon),this.weapon.init(e,this.target)))};return f}(MagicTowerBase);MagicTower03_1.prototype.__class__="MagicTower03_1";
var MagicTower03_2=function(d){function f(){d.call(this);this.minRadius=100;this.maxRadius=140;this.ratioY=this.minRadius/this.maxRadius;this.anchorX=0.5;this.anchorY=1;this.bm=Utils.createBitmapByName("MagicTower03_2");this.addChild(this.bm);this.st=new MagicWizard010203;this.st.x=48;this.st.y=0;this.addChild(this.st);this.fireDelay=1E3}__extends(f,d);f.prototype.onEnterFrame=function(e){d.prototype.onEnterFrame.call(this,e);this.st.onEnterFrame(e);0==this.atargets.length?this.timesum=this.fireDelay-
299:(this.target=this.atargets[0],this.target.y<=this.sy-22&&(this.direct="up"),this.target.y>this.sy-22&&(this.direct="down"),this.timesum+=e,this.timesum<this.fireDelay?300>this.fireDelay-this.timesum&&!this.isfire&&(this.st.fire(this.direct),this.isfire=!0):(this.timesum=0,this.isfire=!1,this.playFireVoice(),e="down"==this.direct?new egret.Point(this.sx-9,this.sy-58):new egret.Point(this.sx+5,this.sy-58),this.weapon=ObjectPool.getInstance().createObject(MagicBullet010203),this.weapon.damage=28,
this.contentLayer.addChild(this.weapon),this.weapon.init(e,this.target)))};return f}(MagicTowerBase);MagicTower03_2.prototype.__class__="MagicTower03_2";
var ShieldTower01=function(d){function f(){d.call(this);this.soldiers=[];this.minRadius=100;this.maxRadius=140;this.ratioY=this.minRadius/this.maxRadius;this.anchorX=0.5;this.anchorY=1;this.bm=Utils.createBitmapByName("ShieldTower01");this.addChild(this.bm)}__extends(f,d);var e=f.prototype;e.init=function(){this.timer=new egret.Timer(1E3,3);this.timer.addEventListener(egret.TimerEvent.TIMER,this.createSold,this);this.timer.start()};e.createSold=function(a){this.sold=ObjectPool.getInstance().createObject(ShieldSoldier01);
this.sold.life=15;this.sold.damage=2;this.contentLayer.addChild(this.sold);this.objArr.push(this.sold);this.soldiers.push(this.sold);this.addIdx();this.sold.xoffset=this.offArr[this.offIdx][0];this.sold.yoffset=this.offArr[this.offIdx][1];this.sold.init([[this.sx,this.sy],[this.soldPoint.x,this.soldPoint.y]]);this.sold.addEventListener(SoldEvent.SELECT,this.allSelect,this);this.sold.addEventListener(SoldEvent.DESELECT,this.allDeSelect,this);this.sold.addEventListener(SoldEvent.MOVE,this.allMove,this)};
e.addIdx=function(){this.offIdx++;2<this.offIdx&&(this.offIdx=0)};e.allSelect=function(a){a=0;var c=this.soldiers.length,b;for(a;a<c;a++)b=this.soldiers[a],b.createYQ()};e.allDeSelect=function(a){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);a=0;var c=this.soldiers.length,b;for(a;a<c;a++)b=this.soldiers[a],b.clearYQ()};e.allMove=function(a){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);a=a.arr;if(Utils.containsXY(a[0],a[1],this.sx,this.sy-22,this.maxRadius,
this.ratioY)){this.soldPoint=new egret.Point(a[0],a[1]+8);a=0;var c=this.soldiers.length;for(a;a<c;a++)this.soldiers[a].setPath([this.soldPoint.x,this.soldPoint.y])}};e.destory=function(){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);null!=this.timer&&(this.timer.removeEventListener(egret.TimerEvent.TIMER,this.createSold,this),this.timer.stop(),this.timer=null);for(var a,c=0;c<this.soldiers.length;c++)a=this.soldiers[c],a.removeEventListener(SoldEvent.SELECT,this.allSelect,this),
a.removeEventListener(SoldEvent.DESELECT,this.allDeSelect,this),a.removeEventListener(SoldEvent.MOVE,this.allMove,this),a.canClear=!0;this.soldiers=[];this.atargets=[]};e.onEnterFrame=function(a){var c;this.atargets=[];if(0<this.targets.length)for(c=0;c<this.targets.length;c++){var b=this.targets[c],d=Utils.containsXY(b.x,b.y,this.sx,this.sy-22,this.maxRadius,this.ratioY),e=this.atargets.indexOf(b);d&&0<b.hp?-1==e&&this.atargets.push(b):-1!=e&&this.atargets.splice(e,1)}3>this.soldiers.length?(this.timesum+=
a,this.timesum>=this.createTime&&(this.timesum=0,this.createSold(null))):this.timesum=0;for(c=0;c<this.soldiers.length;c++)a=this.soldiers[c],0>=a.hp?(a.removeEventListener(SoldEvent.SELECT,this.allSelect,this),a.removeEventListener(SoldEvent.DESELECT,this.allDeSelect,this),a.removeEventListener(SoldEvent.MOVE,this.allMove,this),this.soldiers.splice(c,1),c--):a.targets=this.atargets};return f}(ShieldTowerBase);ShieldTower01.prototype.__class__="ShieldTower01";
var ShieldTower02=function(d){function f(){d.call(this);this.soldiers=[];this.minRadius=100;this.maxRadius=140;this.ratioY=this.minRadius/this.maxRadius;this.anchorX=0.5;this.anchorY=1;this.bm=Utils.createBitmapByName("ShieldTower02");this.addChild(this.bm)}__extends(f,d);var e=f.prototype;e.init=function(){this.timer=new egret.Timer(1E3,3);this.timer.addEventListener(egret.TimerEvent.TIMER,this.createSold,this);this.timer.start()};e.createSold=function(a){this.sold=ObjectPool.getInstance().createObject(ShieldSoldier01);
this.sold.life=25;this.sold.damage=4;this.contentLayer.addChild(this.sold);this.objArr.push(this.sold);this.soldiers.push(this.sold);this.addIdx();this.sold.xoffset=this.offArr[this.offIdx][0];this.sold.yoffset=this.offArr[this.offIdx][1];this.sold.init([[this.sx,this.sy],[this.soldPoint.x,this.soldPoint.y]]);this.sold.addEventListener(SoldEvent.SELECT,this.allSelect,this);this.sold.addEventListener(SoldEvent.DESELECT,this.allDeSelect,this);this.sold.addEventListener(SoldEvent.MOVE,this.allMove,this)};
e.addIdx=function(){this.offIdx++;2<this.offIdx&&(this.offIdx=0)};e.allSelect=function(a){a=0;var c=this.soldiers.length,b;for(a;a<c;a++)b=this.soldiers[a],b.createYQ()};e.allDeSelect=function(a){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);a=0;var c=this.soldiers.length,b;for(a;a<c;a++)b=this.soldiers[a],b.clearYQ()};e.allMove=function(a){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);a=a.arr;if(Utils.containsXY(a[0],a[1],this.sx,this.sy-22,this.maxRadius,
this.ratioY)){this.soldPoint=new egret.Point(a[0],a[1]+8);a=0;var c=this.soldiers.length;for(a;a<c;a++)this.soldiers[a].setPath([this.soldPoint.x,this.soldPoint.y])}};e.destory=function(){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);null!=this.timer&&(this.timer.removeEventListener(egret.TimerEvent.TIMER,this.createSold,this),this.timer.stop(),this.timer=null);for(var a,c=0;c<this.soldiers.length;c++)a=this.soldiers[c],a.removeEventListener(SoldEvent.SELECT,this.allSelect,this),
a.removeEventListener(SoldEvent.DESELECT,this.allDeSelect,this),a.removeEventListener(SoldEvent.MOVE,this.allMove,this),a.canClear=!0;this.soldiers=[];this.atargets=[]};e.onEnterFrame=function(a){var c;this.atargets=[];if(0<this.targets.length)for(c=0;c<this.targets.length;c++){var b=this.targets[c],d=Utils.containsXY(b.x,b.y,this.sx,this.sy-22,this.maxRadius,this.ratioY),e=this.atargets.indexOf(b);d&&0<b.hp?-1==e&&this.atargets.push(b):-1!=e&&this.atargets.splice(e,1)}3>this.soldiers.length?(this.timesum+=
a,this.timesum>=this.createTime&&(this.timesum=0,this.createSold(null))):this.timesum=0;for(c=0;c<this.soldiers.length;c++)a=this.soldiers[c],0>=a.hp?(a.removeEventListener(SoldEvent.SELECT,this.allSelect,this),a.removeEventListener(SoldEvent.DESELECT,this.allDeSelect,this),a.removeEventListener(SoldEvent.MOVE,this.allMove,this),this.soldiers.splice(c,1),c--):a.targets=this.atargets};return f}(ShieldTowerBase);ShieldTower02.prototype.__class__="ShieldTower02";
var ShieldTower03_1=function(d){function f(){d.call(this);this.soldiers=[];this.minRadius=100;this.maxRadius=140;this.ratioY=this.minRadius/this.maxRadius;this.anchorX=0.5;this.anchorY=1;this.bm=Utils.createBitmapByName("ShieldTower03_1");this.addChild(this.bm)}__extends(f,d);var e=f.prototype;e.init=function(){this.timer=new egret.Timer(1E3,3);this.timer.addEventListener(egret.TimerEvent.TIMER,this.createSold,this);this.timer.start()};e.createSold=function(a){this.sold=ObjectPool.getInstance().createObject(ShieldSoldier01);
this.sold.life=35;this.sold.damage=6;this.contentLayer.addChild(this.sold);this.objArr.push(this.sold);this.soldiers.push(this.sold);this.addIdx();this.sold.xoffset=this.offArr[this.offIdx][0];this.sold.yoffset=this.offArr[this.offIdx][1];this.sold.init([[this.sx,this.sy],[this.soldPoint.x,this.soldPoint.y]]);this.sold.addEventListener(SoldEvent.SELECT,this.allSelect,this);this.sold.addEventListener(SoldEvent.DESELECT,this.allDeSelect,this);this.sold.addEventListener(SoldEvent.MOVE,this.allMove,this)};
e.addIdx=function(){this.offIdx++;2<this.offIdx&&(this.offIdx=0)};e.allSelect=function(a){a=0;var c=this.soldiers.length,b;for(a;a<c;a++)b=this.soldiers[a],b.createYQ()};e.allDeSelect=function(a){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);a=0;var c=this.soldiers.length,b;for(a;a<c;a++)b=this.soldiers[a],b.clearYQ()};e.allMove=function(a){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);a=a.arr;if(Utils.containsXY(a[0],a[1],this.sx,this.sy-22,this.maxRadius,
this.ratioY)){this.soldPoint=new egret.Point(a[0],a[1]+8);a=0;var c=this.soldiers.length;for(a;a<c;a++)this.soldiers[a].setPath([this.soldPoint.x,this.soldPoint.y])}};e.destory=function(){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);null!=this.timer&&(this.timer.removeEventListener(egret.TimerEvent.TIMER,this.createSold,this),this.timer.stop(),this.timer=null);for(var a,c=0;c<this.soldiers.length;c++)a=this.soldiers[c],a.removeEventListener(SoldEvent.SELECT,this.allSelect,this),
a.removeEventListener(SoldEvent.DESELECT,this.allDeSelect,this),a.removeEventListener(SoldEvent.MOVE,this.allMove,this),a.canClear=!0;this.soldiers=[];this.atargets=[]};e.onEnterFrame=function(a){var c;this.atargets=[];if(0<this.targets.length)for(c=0;c<this.targets.length;c++){var b=this.targets[c],d=Utils.containsXY(b.x,b.y,this.sx,this.sy-22,this.maxRadius,this.ratioY),e=this.atargets.indexOf(b);d&&0<b.hp?-1==e&&this.atargets.push(b):-1!=e&&this.atargets.splice(e,1)}3>this.soldiers.length?(this.timesum+=
a,this.timesum>=this.createTime&&(this.timesum=0,this.createSold(null))):this.timesum=0;for(c=0;c<this.soldiers.length;c++)a=this.soldiers[c],0>=a.hp?(a.removeEventListener(SoldEvent.SELECT,this.allSelect,this),a.removeEventListener(SoldEvent.DESELECT,this.allDeSelect,this),a.removeEventListener(SoldEvent.MOVE,this.allMove,this),this.soldiers.splice(c,1),c--):a.targets=this.atargets};return f}(ShieldTowerBase);ShieldTower03_1.prototype.__class__="ShieldTower03_1";
var ShieldTower03_2=function(d){function f(){d.call(this);this.soldiers=[];this.minRadius=100;this.maxRadius=140;this.ratioY=this.minRadius/this.maxRadius;this.anchorX=0.5;this.anchorY=1;this.bm=Utils.createBitmapByName("ShieldTower03_2");this.addChild(this.bm)}__extends(f,d);var e=f.prototype;e.init=function(){this.timer=new egret.Timer(1E3,3);this.timer.addEventListener(egret.TimerEvent.TIMER,this.createSold,this);this.timer.start()};e.createSold=function(a){this.sold=ObjectPool.getInstance().createObject(ShieldSoldier01);
this.sold.life=45;this.sold.damage=8;this.contentLayer.addChild(this.sold);this.objArr.push(this.sold);this.soldiers.push(this.sold);this.addIdx();this.sold.xoffset=this.offArr[this.offIdx][0];this.sold.yoffset=this.offArr[this.offIdx][1];this.sold.init([[this.sx,this.sy],[this.soldPoint.x,this.soldPoint.y]]);this.sold.addEventListener(SoldEvent.SELECT,this.allSelect,this);this.sold.addEventListener(SoldEvent.DESELECT,this.allDeSelect,this);this.sold.addEventListener(SoldEvent.MOVE,this.allMove,this)};
e.addIdx=function(){this.offIdx++;2<this.offIdx&&(this.offIdx=0)};e.allSelect=function(a){a=0;var c=this.soldiers.length,b;for(a;a<c;a++)b=this.soldiers[a],b.createYQ()};e.allDeSelect=function(a){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);a=0;var c=this.soldiers.length,b;for(a;a<c;a++)b=this.soldiers[a],b.clearYQ()};e.allMove=function(a){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);a=a.arr;if(Utils.containsXY(a[0],a[1],this.sx,this.sy-22,this.maxRadius,
this.ratioY)){this.soldPoint=new egret.Point(a[0],a[1]+8);a=0;var c=this.soldiers.length;for(a;a<c;a++)this.soldiers[a].setPath([this.soldPoint.x,this.soldPoint.y])}};e.destory=function(){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);null!=this.timer&&(this.timer.removeEventListener(egret.TimerEvent.TIMER,this.createSold,this),this.timer.stop(),this.timer=null);for(var a,c=0;c<this.soldiers.length;c++)a=this.soldiers[c],a.removeEventListener(SoldEvent.SELECT,this.allSelect,this),
a.removeEventListener(SoldEvent.DESELECT,this.allDeSelect,this),a.removeEventListener(SoldEvent.MOVE,this.allMove,this),a.canClear=!0;this.soldiers=[];this.atargets=[]};e.onEnterFrame=function(a){var c;this.atargets=[];if(0<this.targets.length)for(c=0;c<this.targets.length;c++){var b=this.targets[c],d=Utils.containsXY(b.x,b.y,this.sx,this.sy-22,this.maxRadius,this.ratioY),e=this.atargets.indexOf(b);d&&0<b.hp?-1==e&&this.atargets.push(b):-1!=e&&this.atargets.splice(e,1)}3>this.soldiers.length?(this.timesum+=
a,this.timesum>=this.createTime&&(this.timesum=0,this.createSold(null))):this.timesum=0;for(c=0;c<this.soldiers.length;c++)a=this.soldiers[c],0>=a.hp?(a.removeEventListener(SoldEvent.SELECT,this.allSelect,this),a.removeEventListener(SoldEvent.DESELECT,this.allDeSelect,this),a.removeEventListener(SoldEvent.MOVE,this.allMove,this),this.soldiers.splice(c,1),c--):a.targets=this.atargets};return f}(ShieldTowerBase);ShieldTower03_2.prototype.__class__="ShieldTower03_2";
var GuanKaConfig=function(){function d(){}d.getData=function(){return d.data};d.guankaData="guanka01load guanka02load guanka03load guanka04load guanka05load guanka06load guanka03load guanka04load guanka01load guanka02load guanka03load guanka04load".split(" ");d.data=[{xpos:250,ypos:80,ispass:!1,wujin:0},{xpos:325,ypos:102,ispass:!1,wujin:0},{xpos:325,ypos:162,ispass:!1,wujin:0},{xpos:250,ypos:188,ispass:!1,wujin:0},{xpos:140,ypos:225,ispass:!1,wujin:0},{xpos:270,ypos:344,ispass:!1,wujin:0},{xpos:427,
ypos:274,ispass:!1,wujin:0},{xpos:505,ypos:370,ispass:!1,wujin:0},{xpos:603,ypos:320,ispass:!1,wujin:0},{xpos:550,ypos:238,ispass:!1,wujin:0},{xpos:490,ypos:188,ispass:!1,wujin:0},{xpos:480,ypos:96,ispass:!1,wujin:0}];return d}();GuanKaConfig.prototype.__class__="GuanKaConfig";
var TowerLevel=function(){function d(){}d.towNameArr=["ArrowTower-","ShieldTower-","MagicTower-","ExploTower-"];d.keyNameArr=["lv01-lv02","lv02-lv03_1","lv02-lv03_2"];d.ArrowTower={"lv01-lv02":!1,"lv02-lv03_1":!1,"lv02-lv03_2":!1};d.ShieldTower={"lv01-lv02":!1,"lv02-lv03_1":!1,"lv02-lv03_2":!1};d.MagicTower={"lv01-lv02":!1,"lv02-lv03_1":!1,"lv02-lv03_2":!1};d.ExploTower={"lv01-lv02":!1,"lv02-lv03_1":!1,"lv02-lv03_2":!1};d.dic={ArrowTower01:{className:"ArrowTower01",res:"gj01",price:60},ShieldTower01:{className:"ShieldTower01",
res:"dp01",price:70},MagicTower01:{className:"MagicTower01",res:"mf01",price:100},ExploTower01:{className:"ExploTower01",res:"zd01",price:125},ArrowTower02:{className:"ArrowTower02",res:"sj",price:110},ShieldTower02:{className:"ShieldTower02",res:"sj",price:120},MagicTower02:{className:"MagicTower02",res:"sj",price:150},ExploTower02:{className:"ExploTower02",res:"sj",price:175},ArrowTower03_1:{className:"ArrowTower03_1",res:"gj03_1",price:310},ShieldTower03_1:{className:"ShieldTower03_1",res:"dp03_1",
price:330},MagicTower03_1:{className:"MagicTower03_1",res:"mf03_1",price:360},ExploTower03_1:{className:"ExploTower03_1",res:"zd03_1",price:380},ArrowTower03_2:{className:"ArrowTower03_2",res:"gj03_2",price:610},ShieldTower03_2:{className:"ShieldTower03_2",res:"dp03_2",price:630},MagicTower03_2:{className:"MagicTower03_2",res:"mf03_2",price:660},ExploTower03_2:{className:"ExploTower03_2",res:"zd03_2",price:800},SellTower:{className:"SellTower",res:"sell",price:0},LockTower:{className:"LockTower",
res:"lock",price:0}};return d}();TowerLevel.prototype.__class__="TowerLevel";var LoadEvent=function(d){function f(e,a,c){void 0===a&&(a=!1);void 0===c&&(c=!1);d.call(this,e,a,c)}__extends(f,d);return f}(RES.ResourceEvent);LoadEvent.prototype.__class__="LoadEvent";
var MainEvent=function(d){function f(e,a,c,b){void 0===a&&(a="");void 0===c&&(c=!1);void 0===b&&(b=!1);d.call(this,e,c,b);this._resName="";this._resName=a}__extends(f,d);Object.defineProperty(f.prototype,"resName",{get:function(){return this._resName},enumerable:!0,configurable:!0});f.OPENLOADBAR="openloadbar";f.REMOVE="remove";f.LOADCOMP="loadcomp";f.PAUSE="pause";f.QUITGUANKA="quitguanka";f.TRYAGAIN="tryagain";return f}(egret.Event);MainEvent.prototype.__class__="MainEvent";
var StorageSetting=function(){function d(){}d.getItem=function(d){d=egret.localStorage.getItem(d);null==d&&(d="0");return d};d.loadConfig=function(){var d,e,a;a=GuanKaConfig.data.length;for(e=0;e<a;e++)d="1",egret.localStorage.setItem("ispass"+e,d),GuanKaConfig.data[e].ispass=Boolean(Number(d)),d=egret.localStorage.getItem("wujin"+e),null==d&&(d="0",egret.localStorage.setItem("wujin"+e,d)),GuanKaConfig.data[e].wujin=Number(d);for(e=0;4>e;e++)for(a=0;3>a;a++)d="1",egret.localStorage.setItem(TowerLevel.towNameArr[e]+
TowerLevel.keyNameArr[a],d),0==e?TowerLevel.ArrowTower[TowerLevel.keyNameArr[a]]=Boolean(Number(d)):1==e?TowerLevel.ShieldTower[TowerLevel.keyNameArr[a]]=Boolean(Number(d)):2==e?TowerLevel.MagicTower[TowerLevel.keyNameArr[a]]=Boolean(Number(d)):3==e&&(TowerLevel.ExploTower[TowerLevel.keyNameArr[a]]=Boolean(Number(d)));d=egret.localStorage.getItem("goldStar");null==d&&(d="0",egret.localStorage.setItem("goldStar",d));GameSetting.goldStar=Number(d)};d.setGuankaPass=function(d){egret.localStorage.setItem("ispass"+
d,"1");GuanKaConfig.data[d].ispass=!0};d.setGuankaWujin=function(d,e){var a=egret.localStorage.getItem("wujin"+d);e<=Number(a)||(egret.localStorage.setItem("wujin"+d,String(e)),GuanKaConfig.data[d].wujin=e)};d.setTowerUpgrade=function(d){for(var e=0;4>e;e++)egret.localStorage.setItem(TowerLevel.towNameArr[e]+TowerLevel.keyNameArr[d],"1"),0==e?TowerLevel.ArrowTower[TowerLevel.keyNameArr[d]]=!0:1==e?TowerLevel.ShieldTower[TowerLevel.keyNameArr[d]]=!0:2==e?TowerLevel.MagicTower[TowerLevel.keyNameArr[d]]=
!0:3==e&&(TowerLevel.ExploTower[TowerLevel.keyNameArr[d]]=!0)};return d}();StorageSetting.prototype.__class__="StorageSetting";
var Guanka02=function(d){function f(){d.call(this);this.mtime=250;this.bm.texture=RES.getRes("map1");this.makeGrid("map1json");this.basePoseArr=[[233,146],[316,113],[413,206],[501,190],[198,314],[357,254],[247,374],[384,314],[519,322],[609,328],[397,424]];this.soldPointArr=[[286,175],[332,149],[393,147],[473,128],[283,296],[282,226],[233,421],[316,331],[507,363],[594,371],[382,359]];this.roadArr1=[[-26,410],[274,410],[314,364],[257,259],[287,165],[473,115],[453,-7]];this.roadArr2=[[640,512],[670,
432],[615,385],[314,364],[257,259],[287,165],[473,115],[453,-7]];this.roadArr3=[[-26,432],[274,432],[344,342],[287,262],[307,188],[502,115],[482,-7]];this.roadArr4=[[680,512],[696,432],[640,366],[344,342],[287,262],[307,188],[502,115],[482,-7]];this.roadArr.push(this.roadArr1);this.roadArr.push(this.roadArr2);this.roadArr.push(this.roadArr3);this.roadArr.push(this.roadArr4);this.enemyData=[{type:"Monster01",count:10,life:10,maxSpeed:0.4,damage:2,value:10},{type:"Monster03",count:10,life:10,maxSpeed:0.4,
damage:2,value:10},{type:"Monster07",count:15,life:15,maxSpeed:0.4,damage:4,value:15},{type:"Monster08",count:15,life:20,maxSpeed:0.4,damage:4,value:15},{type:"Monster02",count:15,life:20,maxSpeed:0.8,damage:4,value:20},{type:"Boss01",count:2,life:300,maxSpeed:0.4,damage:16,value:600},{type:"Monster09",count:15,life:25,maxSpeed:0.4,damage:6,value:25},{type:"Monster10",count:20,life:25,maxSpeed:0.7,damage:6,value:25},{type:"Monster11",count:20,life:30,maxSpeed:0.4,damage:8,value:30},{type:"Monster12",
count:20,life:35,maxSpeed:0.4,damage:8,value:30},{type:"Boss02",count:2,life:500,maxSpeed:0.4,damage:20,value:1200}];this.createUI();this.createBase(Base01);this.init()}__extends(f,d);var e=f.prototype;e.init=function(){this.boSum=0;this.hardxs2=this.hardxs=1;this.boLeft=this.curBo=-1;this.otime=this.delayToNextSum=0;this.boing=!1;this.gold=400;this.guankaUI.setGold(this.gold);this.life=20;this.guankaUI.setLife(this.life);this.allBo=this.enemyData.length;Main.wujin?this.guankaUI.setBos(0,0):this.guankaUI.setBos(0,
this.allBo);SoundManager.playBgSound("map0bg");egret.Ticker.getInstance().register(this.onEnterFrame,this)};e.onEnterFrame=function(a){d.prototype.onEnterFrame.call(this,a);this.boing&&0<this.boLeft&&this.otime>=this.mtime-50&&(this.curRoadArr=this.roadArr[this.boLeft%this.roadArr.length])};e.tryAgainHandle=function(a){for(;0<this.objLayer.numChildren;)this.objLayer.removeChildAt(0);for(;0<this.toolLayer.numChildren;)this.toolLayer.removeChildAt(0);for(a=0;a<this.baseArr.length;a++)this.base=this.baseArr[a],
this.base.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.baseOrTowerTouch,this);this.towerArr=[];this.objArr=[];this.enemyArr=[];this.buildQuene=[];this.init()};e.destroy=function(){d.prototype.destroy.call(this);RES.destroyRes(GuanKaConfig.guankaData[Main.curIdx]);this.roadArr4=this.roadArr3=this.roadArr2=this.roadArr1=null;console.log("destory guanka02")};return f}(GuankaBase);Guanka02.prototype.__class__="Guanka02";
var Guanka03=function(d){function f(){d.call(this);this.mtime=250;this.bm.texture=RES.getRes("map2");this.makeGrid("map2json");this.basePoseArr=[[219,214],[300,181],[390,178],[476,152],[294,329],[372,293],[462,290],[596,245],[233,439],[427,399],[572,350],[563,464]];this.soldPointArr=[[250,257],[314,227],[370,228],[553,144],[203,301],[396,336],[435,223],[531,193],[246,375],[482,355],[532,395],[597,400]];this.roadArr1=[[427,-7],[456,44],[533,104],[519,192],[460,213],[302,225],[175,281],[-26,280]];this.roadArr2=
[[824,332],[719,355],[660,390],[531,390],[460,329],[365,342],[277,372],[175,281],[-26,280]];this.roadArr3=[[456,-7],[485,44],[562,104],[543,202],[460,233],[302,245],[176,305],[-26,302]];this.roadArr4=[[824,354],[727,373],[661,412],[518,402],[459,350],[375,356],[264,385],[176,305],[-26,302]];this.roadArr.push(this.roadArr1);this.roadArr.push(this.roadArr2);this.roadArr.push(this.roadArr3);this.roadArr.push(this.roadArr4);this.enemyData=[{type:"Monster01",count:10,life:10,maxSpeed:0.4,damage:2,value:10},
{type:"Monster03",count:10,life:10,maxSpeed:0.4,damage:2,value:15},{type:"Monster12",count:15,life:15,maxSpeed:0.4,damage:4,value:20},{type:"Monster13",count:15,life:20,maxSpeed:0.4,damage:4,value:20},{type:"Monster14",count:15,life:25,maxSpeed:0.4,damage:6,value:25},{type:"Boss01",count:2,life:300,maxSpeed:0.4,damage:16,value:800},{type:"Monster08",count:20,life:30,maxSpeed:0.4,damage:6,value:25},{type:"Monster02",count:20,life:30,maxSpeed:0.8,damage:8,value:30},{type:"Monster11",count:20,life:35,
maxSpeed:0.4,damage:8,value:30},{type:"Monster12",count:20,life:35,maxSpeed:0.4,damage:10,value:35},{type:"Boss02",count:2,life:500,maxSpeed:0.4,damage:20,value:1600}];this.createUI();this.createBase(Base01);this.init()}__extends(f,d);var e=f.prototype;e.init=function(){this.boSum=0;this.hardxs2=this.hardxs=1;this.boLeft=this.curBo=-1;this.otime=this.delayToNextSum=0;this.boing=!1;this.gold=600;this.guankaUI.setGold(this.gold);this.life=20;this.guankaUI.setLife(this.life);this.allBo=this.enemyData.length;
Main.wujin?this.guankaUI.setBos(0,0):this.guankaUI.setBos(0,this.allBo);SoundManager.playBgSound("map0bg");egret.Ticker.getInstance().register(this.onEnterFrame,this)};e.onEnterFrame=function(a){d.prototype.onEnterFrame.call(this,a);this.boing&&0<this.boLeft&&this.otime>=this.mtime-50&&(this.curRoadArr=this.roadArr[this.boLeft%this.roadArr.length])};e.tryAgainHandle=function(a){for(;0<this.objLayer.numChildren;)this.objLayer.removeChildAt(0);for(;0<this.toolLayer.numChildren;)this.toolLayer.removeChildAt(0);
for(a=0;a<this.baseArr.length;a++)this.base=this.baseArr[a],this.base.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.baseOrTowerTouch,this);this.towerArr=[];this.objArr=[];this.enemyArr=[];this.buildQuene=[];this.init()};e.destroy=function(){d.prototype.destroy.call(this);RES.destroyRes(GuanKaConfig.guankaData[Main.curIdx]);this.roadArr4=this.roadArr3=this.roadArr2=this.roadArr1=null;console.log("destory guanka02")};return f}(GuankaBase);Guanka03.prototype.__class__="Guanka03";
var Guanka04=function(d){function f(){d.call(this);this.mtime=250;this.bm.texture=RES.getRes("map3");this.makeGrid("map3json");this.basePoseArr=[[237,161],[320,161],[407,161],[543,161],[271,268],[356,268],[506,267],[583,267],[235,375],[335,375],[465,347],[586,417]];this.soldPointArr=[[236,199],[326,199],[409,199],[549,199],[276,199],[392,308],[509,199],[649,249],[222,310],[322,308],[522,368],[579,449]];this.roadArr1=[[-26,410],[110,398],[195,307],[400,295],[422,261],[423,222],[203,212],[146,148],
[206,87],[347,69],[359,-11]];this.roadArr2=[[824,440],[565,440],[526,420],[547,374],[665,303],[664,238],[593,190],[423,200],[203,190],[171,150],[207,110],[380,82],[392,-11]];this.roadArr3=[[-26,432],[110,423],[192,332],[400,320],[442,279],[423,200],[203,190],[171,150],[207,110],[380,82],[392,-11]];this.roadArr4=[[824,462],[565,462],[495,420],[530,355],[636,302],[635,237],[593,212],[423,222],[203,212],[146,148],[206,87],[347,69],[359,-11]];this.roadArr.push(this.roadArr1);this.roadArr.push(this.roadArr2);
this.roadArr.push(this.roadArr3);this.roadArr.push(this.roadArr4);this.enemyData=[{type:"Monster01",count:10,life:10,maxSpeed:0.4,damage:2,value:10},{type:"Monster03",count:10,life:10,maxSpeed:0.4,damage:2,value:15},{type:"Monster12",count:15,life:15,maxSpeed:0.4,damage:4,value:20},{type:"Monster13",count:15,life:20,maxSpeed:0.4,damage:4,value:20},{type:"Monster14",count:15,life:20,maxSpeed:0.4,damage:6,value:25},{type:"Boss01",count:2,life:300,maxSpeed:0.4,damage:16,value:1E3},{type:"Monster08",
count:20,life:25,maxSpeed:0.4,damage:6,value:25},{type:"Monster02",count:20,life:30,maxSpeed:0.8,damage:8,value:30},{type:"Monster11",count:20,life:35,maxSpeed:0.4,damage:8,value:30},{type:"Monster12",count:20,life:40,maxSpeed:0.4,damage:10,value:35},{type:"Boss02",count:2,life:500,maxSpeed:0.4,damage:20,value:2E3}];this.createUI();this.createBase(Base01);this.init()}__extends(f,d);var e=f.prototype;e.init=function(){this.boSum=0;this.hardxs2=this.hardxs=1;this.boLeft=this.curBo=-1;this.otime=this.delayToNextSum=
0;this.boing=!1;this.gold=900;this.guankaUI.setGold(this.gold);this.life=20;this.guankaUI.setLife(this.life);this.allBo=this.enemyData.length;Main.wujin?this.guankaUI.setBos(0,0):this.guankaUI.setBos(0,this.allBo);SoundManager.playBgSound("map0bg");egret.Ticker.getInstance().register(this.onEnterFrame,this)};e.onEnterFrame=function(a){d.prototype.onEnterFrame.call(this,a);this.boing&&0<this.boLeft&&this.otime>=this.mtime-50&&(this.curRoadArr=this.roadArr[this.boLeft%this.roadArr.length])};e.tryAgainHandle=
function(a){for(;0<this.objLayer.numChildren;)this.objLayer.removeChildAt(0);for(;0<this.toolLayer.numChildren;)this.toolLayer.removeChildAt(0);for(a=0;a<this.baseArr.length;a++)this.base=this.baseArr[a],this.base.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.baseOrTowerTouch,this);this.towerArr=[];this.objArr=[];this.enemyArr=[];this.buildQuene=[];this.init()};e.destroy=function(){d.prototype.destroy.call(this);RES.destroyRes(GuanKaConfig.guankaData[Main.curIdx]);this.roadArr4=this.roadArr3=
this.roadArr2=this.roadArr1=null;console.log("destory guanka02")};return f}(GuankaBase);Guanka04.prototype.__class__="Guanka04";
var Guanka05=function(d){function f(){d.call(this);this.mtime=250;this.bm.texture=RES.getRes("map4");this.makeGrid("map4json");this.basePoseArr=[[288,133],[432,97],[241,270],[301,210],[397,197],[545,166],[199,377],[319,330],[519,390],[598,367],[316,443]];this.soldPointArr=[[272,72],[466,136],[156,256],[232,172],[412,142],[526,106],[216,416],[336,386],[536,436],[636,406],[286,386]];this.roadArr1=[[542,-12],[542,78],[462,131],[402,125],[321,66],[224,76],[211,133],[222,174],[143,250],[-24,230]];this.roadArr2=
[[814,399],[714,369],[522,429],[324,369],[284,371],[215,406],[143,394],[154,339],[143,250],[-24,230]];this.roadArr3=[[566,-12],[566,78],[461,147],[401,141],[320,82],[249,83],[236,140],[247,181],[143,250],[-24,230]];this.roadArr4=[[814,421],[714,391],[522,451],[324,391],[284,393],[215,428],[122,397],[133,342],[143,250],[-24,230]];this.roadArr.push(this.roadArr1);this.roadArr.push(this.roadArr2);this.roadArr.push(this.roadArr3);this.roadArr.push(this.roadArr4);this.enemyData=[{type:"Monster01",count:10,
life:10,maxSpeed:0.4,damage:2,value:10},{type:"Monster03",count:10,life:10,maxSpeed:0.4,damage:2,value:15},{type:"Monster12",count:15,life:15,maxSpeed:0.4,damage:4,value:20},{type:"Monster13",count:15,life:20,maxSpeed:0.4,damage:4,value:20},{type:"Monster14",count:15,life:20,maxSpeed:0.4,damage:6,value:25},{type:"Boss01",count:2,life:300,maxSpeed:0.4,damage:16,value:1E3},{type:"Monster08",count:20,life:25,maxSpeed:0.4,damage:6,value:25},{type:"Monster02",count:20,life:30,maxSpeed:0.8,damage:8,value:30},
{type:"Monster11",count:20,life:35,maxSpeed:0.4,damage:8,value:30},{type:"Monster12",count:20,life:40,maxSpeed:0.4,damage:10,value:35},{type:"Boss02",count:2,life:500,maxSpeed:0.4,damage:20,value:2E3}];this.createUI();this.createBase(Base02);this.init()}__extends(f,d);var e=f.prototype;e.init=function(){this.boSum=0;this.hardxs2=this.hardxs=1;this.boLeft=this.curBo=-1;this.otime=this.delayToNextSum=0;this.boing=!1;this.gold=900;this.guankaUI.setGold(this.gold);this.life=20;this.guankaUI.setLife(this.life);
this.allBo=this.enemyData.length;Main.wujin?this.guankaUI.setBos(0,0):this.guankaUI.setBos(0,this.allBo);SoundManager.playBgSound("map0bg");egret.Ticker.getInstance().register(this.onEnterFrame,this)};e.onEnterFrame=function(a){d.prototype.onEnterFrame.call(this,a);this.boing&&0<this.boLeft&&this.otime>=this.mtime-50&&(this.curRoadArr=this.roadArr[this.boLeft%this.roadArr.length])};e.tryAgainHandle=function(a){for(;0<this.objLayer.numChildren;)this.objLayer.removeChildAt(0);for(;0<this.toolLayer.numChildren;)this.toolLayer.removeChildAt(0);
for(a=0;a<this.baseArr.length;a++)this.base=this.baseArr[a],this.base.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.baseOrTowerTouch,this);this.towerArr=[];this.objArr=[];this.enemyArr=[];this.buildQuene=[];this.init()};e.destroy=function(){d.prototype.destroy.call(this);RES.destroyRes(GuanKaConfig.guankaData[Main.curIdx]);this.roadArr4=this.roadArr3=this.roadArr2=this.roadArr1=null;console.log("destory guanka02")};return f}(GuankaBase);Guanka05.prototype.__class__="Guanka05";
var Guanka06=function(d){function f(){d.call(this);this.mtime=250;this.bm.texture=RES.getRes("map5");this.makeGrid("map5json");this.basePoseArr=[[163,172],[328,94],[197,291],[321,207],[448,188],[366,283],[368,402],[488,325],[618,281],[566,369]];this.soldPointArr=[[185,208],[356,130],[235,217],[255,162],[493,236],[330,313],[385,329],[425,304],[601,212],[502,387]];this.roadArr1=[[-23,263],[87,263],[227,199],[315,299],[400,328],[486,386],[600,410],[644,519]];this.roadArr2=[[326,-9],[339,30],[402,61],
[384,119],[263,148],[227,199],[315,299],[400,328],[486,386],[600,410],[644,519]];this.roadArr3=[[824,206],[664,212],[548,203],[466,245],[400,328],[486,386],[600,410],[644,519]];this.roadArr4=[[-23,288],[87,288],[227,224],[315,324],[400,353],[486,411],[600,435],[614,519]];this.roadArr5=[[356,-9],[369,30],[432,61],[414,119],[293,148],[227,224],[315,324],[400,353],[486,411],[600,435],[614,519]];this.roadArr6=[[824,231],[664,237],[548,228],[466,270],[400,353],[486,411],[600,435],[614,519]];this.roadArr.push(this.roadArr1);
this.roadArr.push(this.roadArr2);this.roadArr.push(this.roadArr3);this.roadArr.push(this.roadArr4);this.roadArr.push(this.roadArr5);this.roadArr.push(this.roadArr6);this.enemyData=[{type:"Monster01",count:10,life:10,maxSpeed:0.4,damage:2,value:10},{type:"Monster03",count:10,life:10,maxSpeed:0.4,damage:2,value:15},{type:"Monster12",count:15,life:15,maxSpeed:0.4,damage:4,value:20},{type:"Monster13",count:15,life:20,maxSpeed:0.4,damage:4,value:20},{type:"Monster14",count:15,life:20,maxSpeed:0.4,damage:6,
value:25},{type:"Boss01",count:2,life:300,maxSpeed:0.4,damage:16,value:1E3},{type:"Monster08",count:20,life:25,maxSpeed:0.4,damage:6,value:25},{type:"Monster02",count:20,life:30,maxSpeed:0.8,damage:8,value:30},{type:"Monster11",count:20,life:35,maxSpeed:0.4,damage:8,value:30},{type:"Monster12",count:20,life:40,maxSpeed:0.4,damage:10,value:35},{type:"Boss02",count:2,life:500,maxSpeed:0.4,damage:20,value:2E3}];this.createUI();this.createBase(Base02);this.init()}__extends(f,d);var e=f.prototype;e.init=
function(){this.boSum=0;this.hardxs2=this.hardxs=1;this.boLeft=this.curBo=-1;this.otime=this.delayToNextSum=0;this.boing=!1;this.gold=900;this.guankaUI.setGold(this.gold);this.life=20;this.guankaUI.setLife(this.life);this.allBo=this.enemyData.length;Main.wujin?this.guankaUI.setBos(0,0):this.guankaUI.setBos(0,this.allBo);SoundManager.playBgSound("map0bg");egret.Ticker.getInstance().register(this.onEnterFrame,this)};e.onEnterFrame=function(a){d.prototype.onEnterFrame.call(this,a);this.boing&&0<this.boLeft&&
this.otime>=this.mtime-50&&(this.curRoadArr=this.roadArr[this.boLeft%this.roadArr.length])};e.tryAgainHandle=function(a){for(;0<this.objLayer.numChildren;)this.objLayer.removeChildAt(0);for(;0<this.toolLayer.numChildren;)this.toolLayer.removeChildAt(0);for(a=0;a<this.baseArr.length;a++)this.base=this.baseArr[a],this.base.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.baseOrTowerTouch,this);this.towerArr=[];this.objArr=[];this.enemyArr=[];this.buildQuene=[];this.init()};e.destroy=function(){d.prototype.destroy.call(this);
RES.destroyRes(GuanKaConfig.guankaData[Main.curIdx]);this.roadArr6=this.roadArr5=this.roadArr4=this.roadArr3=this.roadArr2=this.roadArr1=null;console.log("destory guanka02")};return f}(GuankaBase);Guanka06.prototype.__class__="Guanka06";
var Loader=function(d){function f(){d.call(this)}__extends(f,d);var e=f.prototype;f.getInstance=function(){if(null==f.instance){var a=new f;f.instance=a}return f.instance};e.init=function(){RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);RES.loadConfig("resource/resource.json","resource/")};e.onConfigComplete=function(a){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,
this);RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this);RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this);RES.loadGroup("preload")};e.onResourceLoadError=function(a){console.warn("Group:"+a.groupName+" has failed to load");this.onResourceLoadComplete(a)};e.onResourceProgress=function(a){this.loadevent=new LoadEvent(LoadEvent.GROUP_PROGRESS);this.loadevent.groupName=a.groupName;this.loadevent.itemsLoaded=a.itemsLoaded;this.loadevent.itemsTotal=
a.itemsTotal;this.dispatchEvent(this.loadevent);this.loadevent=null};e.onResourceLoadComplete=function(a){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this);RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this);RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this);this.loadevent=new LoadEvent(LoadEvent.GROUP_COMPLETE);this.loadevent.groupName=a.groupName;this.dispatchEvent(this.loadevent);
this.loadevent=null};e.load=function(a){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this);RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this);RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this);RES.loadGroup(a)};return f}(egret.EventDispatcher);Loader.prototype.__class__="Loader";
var ZenYuan1=function(d){function f(){d.call(this);this.addTexture()}__extends(f,d);var e=f.prototype;e.addTexture=function(){this.anchorX=0.5;this.anchorY=1;this.view=new egret.MovieClip;this.addChild(this.view);var a=RES.getRes("ZenYuan1json"),c=RES.getRes("ZenYuan1png"),a=new egret.MovieClipDataFactory(a,c);this.view.movieClipData=a.generateMovieClipData("ZenYuan1");this.view.anchorX=0.5;this.view.x=this.view.width/2;this.lifeBar.x=27;this.lifeBar.y=5;this._maxSpeed=0.6;this.fireDelay=1E3};e.onCreate=
function(){this.hp=400;this.posArr=[];this.timesum=this.sumTime=this._pathIndex=0;this.lifeBar.reSet();this.lifeBar.visible=!0;this.moveToTarget=this.atjijie=this.canClear=!1;this.fsm.changeState(0);this.curState=0;this.view.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.viewSelect,this)};e.init=function(a){this.atjijie=!0;this._position.x=this.x=a[0][0];this._position.y=this.y=a[0][1];var c=1;for(c;c<a.length;c++)this.jijieDian=new Vector2D(a[c][0]+this.xoffset,a[c][1]+this.yoffset),this.posArr.push(this.jijieDian);
this.fsm.changeState(1)};e.setPoint=function(a){this.dispatchEvent(new SoldEvent(SoldEvent.MOVE,this,a))};e.setPath=function(a){this.atjijie=!0;this.posArr.length=0;this.jijieDian=new Vector2D(a[0]+this.xoffset,a[1]+this.yoffset);this.posArr.push(this.jijieDian);this.fsm.changeState(1);null!=this.target&&(null!=this.target.target&&(this.target.target=null),this.target=null)};e.onEnterFrame=function(a){d.prototype.onEnterFrame.call(this,a);this.sumTime+=a;this.sumTime>=this.totalTime&&(this.hp=0,this.lifeBar.reSet(),
this.lifeBar.visible=!1,this.getMoveAngle(90),this.sumTime=0)};e.viewSelect=function(a){};e.onDestroy=function(){d.prototype.onDestroy.call(this);this.view.touchEnabled=!1};return f}(ZenYuanBase);ZenYuan1.prototype.__class__="ZenYuan1";
var ZenYuan2=function(d){function f(){d.call(this);this.addTexture()}__extends(f,d);var e=f.prototype;e.addTexture=function(){this.anchorX=0.5;this.anchorY=1;this.view=new egret.MovieClip;this.addChild(this.view);var a=RES.getRes("ZenYuan2json"),c=RES.getRes("ZenYuan2png"),a=new egret.MovieClipDataFactory(a,c);this.view.movieClipData=a.generateMovieClipData("ZenYuan2");this.view.anchorX=0.5;this.view.x=this.view.width/2;this.lifeBar.x=27;this.lifeBar.y=5;this._maxSpeed=0.6;this.damage=4;this.life=
400;this.fireDelay=1E3};e.onCreate=function(){this.hp=400;this.posArr=[];this.timesum=this.sumTime=this._pathIndex=0;this.lifeBar.reSet();this.lifeBar.visible=!0;this.moveToTarget=this.atjijie=this.canClear=!1;this.fsm.changeState(0);this.curState=0;this.view.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.viewSelect,this)};e.init=function(a){this.atjijie=!0;this._position.x=this.x=a[0][0];this._position.y=this.y=a[0][1];var c=1;for(c;c<a.length;c++)this.jijieDian=new Vector2D(a[c][0]+this.xoffset,
a[c][1]+this.yoffset),this.posArr.push(this.jijieDian);this.fsm.changeState(1)};e.setPoint=function(a){this.dispatchEvent(new SoldEvent(SoldEvent.MOVE,this,a))};e.setPath=function(a){this.atjijie=!0;this.posArr.length=0;this.jijieDian=new Vector2D(a[0]+this.xoffset,a[1]+this.yoffset);this.posArr.push(this.jijieDian);this.fsm.changeState(1);null!=this.target&&(null!=this.target.target&&(this.target.target=null),this.target=null)};e.onEnterFrame=function(a){d.prototype.onEnterFrame.call(this,a);this.sumTime+=
a;this.sumTime>=this.totalTime&&(this.hp=0,this.lifeBar.reSet(),this.lifeBar.visible=!1,this.getMoveAngle(90),this.sumTime=0)};e.viewSelect=function(a){};e.onDestroy=function(){d.prototype.onDestroy.call(this);this.view.touchEnabled=!1};return f}(ZenYuanBase);ZenYuan2.prototype.__class__="ZenYuan2";
var FireBall=function(d){function f(){d.call(this);this.ratioSoldY=this.minSoldRadius/this.maxSoldRadius;this.view=new egret.MovieClip;this.addChild(this.view);this.anchorX=0.5;this.anchorY=1;var a=RES.getRes("stone1json"),c=RES.getRes("stone1png"),a=new egret.MovieClipDataFactory(a,c);this.view.movieClipData=a.generateMovieClipData("stone1");this.view.anchorX=0.5;this.view.x=this.view.width/2}__extends(f,d);var e=f.prototype;e.onCreate=function(){this.follow=this.isHit=this.canClear=!1;this.isTravel=
!0;this._maxSpeed=5;this.fsm.changeState(0);this.curState=0};e.init=function(a,c){this.p1=new egret.Point(a,c);this._position.x=this.x=a;this._position.y=this.y=c-480;this.setPosArr()};e.onEnterFrame=function(a){d.prototype.onEnterFrame.call(this,a)};return f}(FireBallBase);FireBall.prototype.__class__="FireBall";
var BuildIcon=function(d){function f(e,a){d.call(this);this.gold=a;this.className=TowerLevel.dic[e].className;var c=TowerLevel.dic[e].res;this.price=TowerLevel.dic[e].price;this.bm=Utils.createBitmapByName(c);this.addChild(this.bm);"SellTower"!=e&&"LockTower"!=e&&(this.bm=Utils.createBitmapByName("cashbg"),this.bm.x=8,this.bm.y=32,this.addChild(this.bm),this.txt=new egret.BitmapText,c=this.gold>=this.price?RES.getRes("NumFont"):RES.getRes("NumFont2"),this.txt.font=c,this.txt.letterSpacing=-1,this.txt.text=
this.price.toString(),this.txt.x=(30-this.txt.width)/2+8,this.txt.y=32,this.addChild(this.txt))}__extends(f,d);return f}(egret.Sprite);BuildIcon.prototype.__class__="BuildIcon";
var Monster01=function(d){function f(){d.call(this);this.view=new egret.MovieClip;this.addChild(this.view)}__extends(f,d);var e=f.prototype;e.addTexture=function(a){var c=RES.getRes(a+"json"),b=RES.getRes(a+"png"),c=new egret.MovieClipDataFactory(c,b);this.view.movieClipData=c.generateMovieClipData(a);this.view.anchorX=0.5;this.view.x=this.view.width/2;this.anchorX=0.5;this.anchorY=0.9;this.lifeBar.x=(this.view.width-this.lifeBar.width)/2;this.lifeBar.y=-5;this.offy=10;this.fireDelay=1E3};e.onCreate=
function(){this.posArr=[];this.timesum=this._pathIndex=0;this.lifeBar.reSet();this.beAttack=this.beKill=this.canClear=!1;this.target=null;this.fsm.changeState(0);this.curState=0};e.init=function(a,c,b,d,e){this.hp=this.life=c;this._maxSpeed=b;this.damage=d;this.value=e;this._position.x=this.x=a[0][0];this._position.y=this.y=a[0][1];c=1;d=Math.round(10-20*Math.random());for(c;c<a.length;c++)b=new Vector2D(a[c][0],a[c][1]+d),this.posArr.push(b);this.fsm.changeState(1)};e.onEnterFrame=function(a){d.prototype.onEnterFrame.call(this,
a)};return f}(MonsterBase);Monster01.prototype.__class__="Monster01";
var ToolEvent=function(d){function f(a,c,b,e,f){void 0===c&&(c="");void 0===b&&(b=0);void 0===e&&(e=!1);void 0===f&&(f=!1);d.call(this,a,e,f);this._className="";this._price=0;this._className=c;this._price=b}__extends(f,d);var e=f.prototype;Object.defineProperty(e,"className",{get:function(){return this._className},enumerable:!0,configurable:!0});Object.defineProperty(e,"price",{get:function(){return this._price},enumerable:!0,configurable:!0});f.BUILD_START="build_start";f.BUILD_COMP="build_comp";
return f}(egret.Event);ToolEvent.prototype.__class__="ToolEvent";
var Skill1=function(d){function f(){d.call(this)}__extends(f,d);var e=f.prototype;e.init=function(a,c,b,d){this.off=a;this.on=c;this.cdtime=b;this.contentLayer=d;this.initbm();this.skillbm.texture=RES.getRes(a)};e.setPoint=function(a){d.prototype.setPoint.call(this,a);this.xpos=a[0];this.ypos=a[1]+20;this.timer=new egret.Timer(100,10);this.timer.addEventListener(egret.TimerEvent.TIMER,this.timerHandle,this);this.timer.start()};e.timerHandle=function(a){a=ObjectPool.getInstance().createObject(FireBall);
a.damage=20*Math.sqrt(GuankaBase.instance.hardxs);if(4>=this.timer.currentCount)var c=25-50*Math.random()+this.xpos,b=25-50*Math.random()+this.ypos;else c=50+Math.random()*(GameSetting.swid-100),b=50+Math.random()*(GameSetting.shei-100);a.init(c,b);a.targets=GuankaBase.instance.enemyArr;GuankaBase.instance.weaponLayer.addChild(a)};return f}(SkillBase);Skill1.prototype.__class__="Skill1";
var Skill2=function(d){function f(){d.call(this);this.atargets=[];this.soldiers=[];this.offArr=[[-10,0],[10,10]];this.offIdx=-1}__extends(f,d);var e=f.prototype;e.init=function(a,c,b,d){this.off=a;this.on=c;this.cdtime=b;this.contentLayer=d;this.initbm();this.skillbm.texture=RES.getRes(a)};e.setPoint=function(a){d.prototype.setPoint.call(this,a);this.sold1=ObjectPool.getInstance().createObject(ZenYuan1);this.sold2=ObjectPool.getInstance().createObject(ZenYuan2);this.sold1.life=this.sold2.life=20*
Math.sqrt(GuankaBase.instance.hardxs);this.sold1.damage=this.sold2.damage=4*Math.sqrt(GuankaBase.instance.hardxs);this.contentLayer.addChild(this.sold1);this.contentLayer.addChild(this.sold2);GuankaBase.instance.objArr.push(this.sold1);GuankaBase.instance.objArr.push(this.sold2);this.soldiers.push(this.sold1);this.soldiers.push(this.sold2);this.sold1.xoffset=this.offArr[0][0];this.sold1.yoffset=this.offArr[0][1];this.sold2.xoffset=this.offArr[1][0];this.sold2.yoffset=this.offArr[1][1];a=[[a[0],a[1]],
[a[0],a[1]]];this.sold1.init(a);this.sold2.init(a)};e.onEnterFrame=function(a){d.prototype.onEnterFrame.call(this,a);this.atargets=[];if(0<GuankaBase.instance.enemyArr.length)for(a=0;a<GuankaBase.instance.enemyArr.length;a++){var c=GuankaBase.instance.enemyArr[a],b=Utils.containsXY2(c.x,c.y),e=this.atargets.indexOf(c);b&&0<c.hp?-1==e&&this.atargets.push(c):-1!=e&&this.atargets.splice(e,1)}if(0<this.atargets.length)for(a=0;a<this.soldiers.length;a++)c=this.soldiers[a],0>=c.hp?(this.soldiers.splice(a,
1),a--):c.targets=this.atargets};return f}(SkillBase);Skill2.prototype.__class__="Skill2";
var Main=function(d){function f(){d.call(this);this.views=[];this.senceName={welcomeload:"Index",maps:"World",guanka01load:"Guanka01",guanka02load:"Guanka02",guanka03load:"Guanka03",guanka04load:"Guanka04",guanka05load:"Guanka05",guanka06load:"Guanka06",guanka07load:"Guanka07",guanka08load:"Guanka08",guanka09load:"Guanka09",guanka10load:"Guanka10",guanka11load:"Guanka11",guanka12load:"Guanka12"};this.loadIndexis1st=!0;this.isRotation=!1;f.instance=this;this.addEventListener(egret.Event.ADDED_TO_STAGE,
this.onAddToStage,this)}__extends(f,d);var e=f.prototype;e.onAddToStage=function(a){this.loadingView=new LoadingUI;this.addChild(this.loadingView);Loader.getInstance();Loader.instance.addEventListener(LoadEvent.GROUP_COMPLETE,this.loadComp,this);Loader.instance.addEventListener(LoadEvent.GROUP_PROGRESS,this.loadprogress,this);Loader.instance.init();this.addEventListener(MainEvent.REMOVE,this.removeLast,this);this.addEventListener(MainEvent.OPENLOADBAR,this.createLoadBar,this);this.addEventListener(MainEvent.LOADCOMP,
this.addSence,this)};e.loadprogress=function(a){switch(a.groupName){case "preload":this.loadingView.setProgress(a.itemsLoaded,a.itemsTotal);break;case "welcomeload":if(this.loadIndexis1st){this.preload.setProgress(a.itemsLoaded,a.itemsTotal);break}default:this.loadBar.setProgress(a.itemsLoaded,a.itemsTotal)}};e.loadComp=function(a){switch(a.groupName){case "preload":this.removeChild(this.loadingView);this.loadingView=null;this.createScene();StorageSetting.loadConfig();break;case "welcomeload":if(this.loadIndexis1st){this.preload.loadComp();
this.loadIndexis1st=!1;break}default:"uiLoad"==a.groupName?(console.log("\u52a0\u8f7d\u602a\u7269\u8d44\u6e90"),Loader.instance.load("monsterLoad")):"monsterLoad"==a.groupName?(console.log("\u52a0\u8f7d\u5854\u7c7b\u8d44\u6e90"),Loader.instance.load("towerLoad")):"towerLoad"==a.groupName?(console.log("\u52a0\u8f7d\u97f3\u6548\u8d44\u6e90"),Loader.instance.load("soundLoad")):"soundLoad"==a.groupName?(console.log("\u52a0\u8f7d\u5173\u5361\u8d44\u6e90"),Loader.instance.load(GuanKaConfig.guankaData[f.curIdx])):
(this.dispatchEvent(new MainEvent(MainEvent.LOADCOMP,a.groupName)),this.loadBar.hideLoadBar())}};e.createLoadBar=function(a){this.resName=a.resName;this.loadBar=new LoadBar;this.addChild(this.loadBar)};e.removeLast=function(a){Loader.instance.load(this.resName);this.gameLayer.removeChildAt(0);this.views.shift().destroy()};e.addSence=function(a){a=new (egret.getDefinitionByName(this.senceName[a.resName]));this.gameLayer.addChild(a);this.views.push(a)};e.createScene=function(){egret.MainContext.deviceType==
egret.MainContext.DEVICE_MOBILE&&(this.isRotation=!0,this.rotation=90,this.x=480);this.gameLayer=new egret.DisplayObjectContainer;this.addChild(this.gameLayer);this.preload=new PreLoad;this.gameLayer.addChild(this.preload)};e.init=function(){this.gameLayer.removeChildAt(0);this.preload=null;this.welcome=new Index;this.gameLayer.addChild(this.welcome);this.views.push(this.welcome)};e.onRotation=function(a){!this.isRotation||90!=a&&-90!=a?this.isRotation||0!=a||(this.rotation=90,this.x=480,this.isRotation=
!0,egret.StageDelegate.getInstance().setDesignSize(480,800)):(this.x=this.rotation=0,this.isRotation=!1,egret.StageDelegate.getInstance().setDesignSize(800,480))};f.wujin=!1;f.loadCommis1st=!0;return f}(egret.DisplayObjectContainer);Main.prototype.__class__="Main";var Base01=function(d){function f(){d.call(this);this.cacheAsBitmap=!0;var e=Utils.createBitmapByName("empty01");this.anchorX=0.5;this.anchorY=1;this.addChild(e)}__extends(f,d);f.prototype.onEnterFrame=function(d){};return f}(Base);
Base01.prototype.__class__="Base01";var Base02=function(d){function f(){d.call(this);this.cacheAsBitmap=!0;var e=Utils.createBitmapByName("Base02");this.anchorX=0.5;this.anchorY=1;this.addChild(e)}__extends(f,d);f.prototype.onEnterFrame=function(d){};return f}(Base);Base02.prototype.__class__="Base02";
var Base03=function(d){function f(){d.call(this);this.cacheAsBitmap=!0;var e=Utils.createBitmapByName("Base03");this.anchorX=0.5;this.anchorY=1;this.addChild(e)}__extends(f,d);f.prototype.onEnterFrame=function(d){};return f}(Base);Base03.prototype.__class__="Base03";var NodePoint=function(){return function(d,f){this.walkable=!0;this.x=d;this.y=f}}();NodePoint.prototype.__class__="NodePoint";
var BuildTool=function(d){function f(a,c){d.call(this);this.cacheAsBitmap=!0;this.scaleX=this.scaleY=this.anchorX=this.anchorY=0.5;this.alpha=0;this.bm=Utils.createBitmapByName("yuan");this.addChild(this.bm);this.gold=c;this.createTools(a);TweenMax.to(this,0.1,{alpha:1,scaleX:1,scaleY:1})}__extends(f,d);var e=f.prototype;e.createTools=function(a){a instanceof Base01||a instanceof Base02||a instanceof Base03?(this.addIcon("ArrowTower01",-4,-4),this.addIcon("ShieldTower01",75,-4),this.addIcon("MagicTower01",
-4,70),this.addIcon("ExploTower01",75,70)):(a instanceof ArrowTower01?TowerLevel.ArrowTower["lv01-lv02"]?this.addIcon("ArrowTower02",36,-14):this.addIcon("LockTower",36,-14):a instanceof ShieldTower01?TowerLevel.ShieldTower["lv01-lv02"]?this.addIcon("ShieldTower02",36,-14):this.addIcon("LockTower",36,-14):a instanceof MagicTower01?TowerLevel.MagicTower["lv01-lv02"]?this.addIcon("MagicTower02",36,-14):this.addIcon("LockTower",36,-14):a instanceof ExploTower01?TowerLevel.ExploTower["lv01-lv02"]?this.addIcon("ExploTower02",
36,-14):this.addIcon("LockTower",36,-14):a instanceof ArrowTower02?(TowerLevel.ArrowTower["lv02-lv03_1"]?this.addIcon("ArrowTower03_1",0,-14):this.addIcon("LockTower",0,-14),TowerLevel.ArrowTower["lv02-lv03_2"]?this.addIcon("ArrowTower03_2",72,-14):this.addIcon("LockTower",72,-14)):a instanceof ShieldTower02?(TowerLevel.ShieldTower["lv02-lv03_1"]?this.addIcon("ShieldTower03_1",0,-14):this.addIcon("LockTower",0,-14),TowerLevel.ShieldTower["lv02-lv03_2"]?this.addIcon("ShieldTower03_2",72,-14):this.addIcon("LockTower",
72,-14)):a instanceof MagicTower02?(TowerLevel.MagicTower["lv02-lv03_1"]?this.addIcon("MagicTower03_1",0,-14):this.addIcon("LockTower",0,-14),TowerLevel.MagicTower["lv02-lv03_2"]?this.addIcon("MagicTower03_2",72,-14):this.addIcon("LockTower",72,-14)):a instanceof ExploTower02&&(TowerLevel.ExploTower["lv02-lv03_1"]?this.addIcon("ExploTower03_1",0,-14):this.addIcon("LockTower",0,-14),TowerLevel.ExploTower["lv02-lv03_2"]?this.addIcon("ExploTower03_2",72,-14):this.addIcon("LockTower",72,-14)),this.addIcon("SellTower",
43,98))};e.addIcon=function(a,c,b){this.icon=new BuildIcon(a,this.gold);this.icon.x=c;this.icon.y=b;this.icon.touchEnabled=!0;this.icon.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.iconClickHandle,this);this.addChild(this.icon)};e.iconClickHandle=function(a){var c=a.currentTarget.className;a=a.currentTarget.price;this.gold>=a&&this.dispatchEvent(new ToolEvent(ToolEvent.BUILD_START,c,a))};e.hide=function(){var a=this;TweenMax.to(a,0.1,{alpha:0,scaleX:0.5,scaleY:0.5,onComplete:function(){null!=
a.parent&&a.parent.removeChild(a)}})};return f}(egret.Sprite);BuildTool.prototype.__class__="BuildTool";
var BuildWait=function(d){function f(e){d.call(this);this.buildType={ArrowTower01:"building1",ShieldTower01:"building2",MagicTower01:"building3",ExploTower01:"building4"};this.anchorX=0.5;this.anchorY=1;this.bm=Utils.createBitmapByName(this.buildType[e]);this.addChild(this.bm);this.bm=Utils.createBitmapByName("buildbarbg");this.bm.x=23;this.bm.y=23;this.addChild(this.bm);this.bm=Utils.createBitmapByName("buildbartop");this.bm.x=24;this.bm.y=24;this.bm.width=1;this.addChild(this.bm);this.building();
SoundManager.playEffect("building")}__extends(f,d);f.prototype.building=function(){var d=this;TweenLite.to(this.bm,1.5,{width:37,ease:Linear.easeNone,onComplete:function(){d.dispatchEvent(new ToolEvent(ToolEvent.BUILD_COMP))}})};return f}(egret.Sprite);BuildWait.prototype.__class__="BuildWait";
var TowerEvent=function(d){function f(e,a,c,b){void 0===a&&(a=null);void 0===c&&(c=!1);void 0===b&&(b=!1);d.call(this,e,c,b);this._obj=a}__extends(f,d);Object.defineProperty(f.prototype,"obj",{get:function(){return this._obj},enumerable:!0,configurable:!0});f.SHOWTOOL="showtool";f.HIDETOOL="hidetool";return f}(egret.Event);TowerEvent.prototype.__class__="TowerEvent";
var GuanKaUI=function(d){function f(a,c){d.call(this);this.canClick=!1;var b;this.bf1=RES.getRes("NumFont");this.bf3=RES.getRes("NumFont3");this.topSp=new egret.Sprite;this.topSp.x=0;this.topSp.y=-100;this.addChild(this.topSp);b=Utils.createBitmapByName("uiinfo");b.x=b.y=10;this.topSp.addChild(b);this.lifeLeftTxt=new egret.BitmapText;this.lifeLeftTxt.font=this.bf1;this.lifeLeftTxt.letterSpacing=-1;this.lifeLeftTxt.text="0";this.lifeLeftTxt.x=55;this.lifeLeftTxt.y=16;this.topSp.addChild(this.lifeLeftTxt);
this.goldTxt=new egret.BitmapText;this.goldTxt.font=this.bf1;this.goldTxt.letterSpacing=-1;this.goldTxt.text="0";this.goldTxt.x=108;this.goldTxt.y=16;this.topSp.addChild(this.goldTxt);this.bos=new egret.BitmapText;this.bos.font=this.bf3;this.bos.letterSpacing=-1;this.bos.text="0/0";this.bos.x=100;this.bos.y=39;this.topSp.addChild(this.bos);b=Utils.createBitmapByName("backToMaps");b.x=740;b.y=10;this.topSp.addChild(b);b.touchEnabled=!0;b.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.backToMapsHandle,
this);this.bottomSp=new egret.Sprite;this.bottomSp.x=0;this.bottomSp.y=GameSetting.shei+50;this.addChild(this.bottomSp);b=Utils.createBitmapByName("uiskillbg");this.bottomSp.addChild(b);this.skill1=new Skill1;this.skill1.onCreate();this.skill1.init("uiskill1off","uiskill1",25E3,a);this.skill1.x=46;this.skill1.y=-14;this.bottomSp.addChild(this.skill1);this.skill2=new Skill2;this.skill2.onCreate();this.skill2.init("uiskill2off","uiskill2",2E4,c);this.skill2.x=120;this.skill2.y=-14;this.bottomSp.addChild(this.skill2)}
__extends(f,d);var e=f.prototype;e.backToMapsHandle=function(a){TweenMax.killAll();GuankaBase.instance.clear();this.dispatchEvent(new MainEvent(MainEvent.QUITGUANKA,null,!0))};e.onEnterFrame=function(a){if(this.skill1)this.skill1.onEnterFrame(a);if(this.skill2)this.skill2.onEnterFrame(a)};e.showUI=function(){TweenLite.to(this.topSp,0.3,{y:0,ease:Circ.easeOut});TweenLite.to(this.bottomSp,0.3,{delay:0.1,y:GameSetting.shei-60,ease:Circ.easeOut})};e.setGold=function(a){this.goldTxt.text=a.toString()};
e.setLife=function(a){this.lifeLeftTxt.text=a.toString()};e.setBos=function(a,c){this.bos.text=a.toString()+"/"+c.toString()};e.showVictory=function(){var a=new egret.Shape;a.graphics.beginFill(0,0.6);a.graphics.drawRect(0,0,GameSetting.swid,GameSetting.shei);this.addChild(a);a.touchEnabled=!0;a.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.spTouch1,this);this.victoryBm=Utils.createBitmapByName("victory");this.victoryBm.anchorX=this.victoryBm.anchorY=0.5;this.victoryBm.x=GameSetting.swid/2;this.victoryBm.y=
180;this.victoryBm.scaleX=this.victoryBm.scaleY=0.1;this.addChild(this.victoryBm);TweenMax.to(this.victoryBm,0.5,{scaleX:1,scaleY:1,ease:Back.easeOut});var c=this;TweenMax.delayedCall(15,function(){c.dispatchEvent(new MainEvent(MainEvent.QUITGUANKA,null,!0))});SoundManager.playBgSound("victorysd",!1)};e.showLose=function(){this.mbBm=new egret.Shape;this.mbBm.graphics.beginFill(0,0.6);this.mbBm.graphics.drawRect(0,0,GameSetting.swid,GameSetting.shei);this.addChild(this.mbBm);this.mbBm.touchEnabled=
!0;this.mbBm.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.spTouch2,this);this.loseBm=Utils.createBitmapByName("lose");this.loseBm.anchorX=this.loseBm.anchorY=0.5;this.loseBm.x=GameSetting.swid/2;this.loseBm.y=-180;this.addChild(this.loseBm);this.tryAgainBm=Utils.createBitmapByName("tryagain");this.tryAgainBm.anchorX=this.tryAgainBm.anchorY=0.5;this.tryAgainBm.x=GameSetting.swid/2;this.tryAgainBm.y=550;this.addChild(this.tryAgainBm);this.quitBm=Utils.createBitmapByName("quitgame");this.quitBm.anchorX=
this.quitBm.anchorY=0.5;this.quitBm.x=GameSetting.swid/2;this.quitBm.y=550;this.addChild(this.quitBm);this.tryAgainBm.touchEnabled=!0;this.quitBm.touchEnabled=!0;this.tryAgainBm.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.tryAgainHandle,this);this.quitBm.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.spTouch1,this);TweenMax.to(this.loseBm,0.5,{y:150,ease:Cubic.easeOut});TweenMax.to(this.tryAgainBm,0.3,{delay:0.3,y:240,ease:Cubic.easeOut});TweenMax.to(this.quitBm,0.3,{delay:0.4,y:300,ease:Cubic.easeOut})};
e.spTouch1=function(a){TweenMax.killAll();SoundManager.stopBgSound();this.dispatchEvent(new MainEvent(MainEvent.QUITGUANKA,null,!0));a.stopPropagation()};e.tryAgainHandle=function(a){TweenMax.killAll();SoundManager.stopBgSound();this.dispatchEvent(new MainEvent(MainEvent.TRYAGAIN,null,!0));this.removeChild(this.mbBm);this.removeChild(this.loseBm);this.removeChild(this.tryAgainBm);this.removeChild(this.quitBm);a.stopPropagation()};e.spTouch2=function(a){a.stopPropagation()};return f}(egret.Sprite);
GuanKaUI.prototype.__class__="GuanKaUI";
var Guanka01=function(d){function f(){d.call(this);this.mtime=500;this.bm.texture=RES.getRes("map0");this.makeGrid("map0json");this.basePoseArr=[[484,266],[436,316],[354,316],[314,266],[354,206],[436,206],[634,316],[394,436],[228,141]];this.soldPointArr=[[570,256],[484,361],[304,361],[214,263],[304,141],[484,141],[634,256],[394,371],[284,166]];this.roadArr1=[[812,241],[584,241],[484,141],[304,141],[214,241],[24,241]];this.roadArr2=[[812,263],[584,263],[484,363],[304,363],[214,263],[24,263]];this.roadArr.push(this.roadArr1);
this.roadArr.push(this.roadArr2);this.enemyData=[{type:"Monster01",count:10,life:10,maxSpeed:0.4,damage:2,value:10},{type:"Monster02",count:10,life:10,maxSpeed:0.8,damage:2,value:10},{type:"Monster03",count:15,life:15,maxSpeed:0.4,damage:4,value:15},{type:"Monster04",count:15,life:20,maxSpeed:0.7,damage:4,value:15},{type:"Monster05",count:20,life:25,maxSpeed:0.4,damage:8,value:20},{type:"Monster06",count:20,life:30,maxSpeed:0.4,damage:8,value:20},{type:"Boss01",count:2,life:300,maxSpeed:0.4,damage:16,
value:500}];this.createUI();this.createBase(Base01);this.init();var a=Utils.createBitmapByName("men");a.x=-33;a.y=106;this.weaponLayer.addChild(a)}__extends(f,d);var e=f.prototype;e.init=function(){this.boSum=0;this.hardxs2=this.hardxs=1;this.boLeft=this.curBo=-1;this.otime=this.delayToNextSum=0;this.boing=!1;this.gold=250;this.guankaUI.setGold(this.gold);this.life=20;this.guankaUI.setLife(this.life);this.allBo=this.enemyData.length;Main.wujin?this.guankaUI.setBos(0,0):this.guankaUI.setBos(0,this.allBo);
var a=Utils.createBitmapByName("cuizi");a.anchorY=1;a.x=360;a.y=264;this.objLayer.addChild(a);this.objArr.push(a);SoundManager.playBgSound("map0bg");egret.Ticker.getInstance().register(this.onEnterFrame,this)};e.onEnterFrame=function(a){d.prototype.onEnterFrame.call(this,a);this.boing&&0<this.boLeft&&this.otime>=this.mtime-50&&(this.curRoadArr=this.roadArr[this.boLeft%this.roadArr.length])};e.tryAgainHandle=function(a){for(;0<this.objLayer.numChildren;)this.objLayer.removeChildAt(0);for(;0<this.toolLayer.numChildren;)this.toolLayer.removeChildAt(0);
for(a=0;a<this.baseArr.length;a++)this.base=this.baseArr[a],this.base.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.baseOrTowerTouch,this);this.towerArr=[];this.objArr=[];this.enemyArr=[];this.buildQuene=[];this.init()};e.destroy=function(){d.prototype.destroy.call(this);RES.destroyRes(GuanKaConfig.guankaData[Main.curIdx]);this.roadArr2=this.roadArr1=null;console.log("destory guanka01")};return f}(GuankaBase);Guanka01.prototype.__class__="Guanka01";
var Index=function(d){function f(){d.call(this);this.stageWidth=GameSetting.swid;this.stageHeight=GameSetting.shei;this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this);SoundManager.playBgSound("gamebgsound")}__extends(f,d);var e=f.prototype;e.init=function(){};e.onAddToStage=function(a){this.bg=new egret.Bitmap;this.bg.texture=RES.getRes("welbg");this.bg.alpha=0;this.addChild(this.bg);egret.Tween.get(this.bg).wait(500).to({alpha:1},800);this.logo=new egret.Bitmap;this.logo.texture=
RES.getRes("wellogo");this.logo.anchorX=0.5;this.logo.anchorY=1;this.logo.x=this.stageWidth/2;this.logo.y=-this.logo.height;this.addChild(this.logo);TweenMax.fromTo(this.logo,0.2,{y:-this.logo.height,scaleX:0.1,rotation:40},{delay:1.3,y:this.stageHeight/2+70,scaleX:1,rotation:0,ease:Circ.easeOut});egret.Tween.get(this.logo).wait(1450).to({scaleX:0.9},100).to({scaleX:1},100);egret.Tween.get(this.logo).wait(1460).to({scaleY:1.1},100).to({scaleY:1},100).call(this.showLiantiao,this)};e.showLiantiao=function(){this.dropsp=
new egret.Sprite;this.dropsp.x=this.stageWidth/2;this.dropsp.y=this.logo.y-30;this.addChildAt(this.dropsp,1);this.liantiao=new egret.Bitmap;this.liantiao.texture=RES.getRes("liantiao");this.liantiao.anchorX=0.5;this.liantiao.anchorY=1;this.dropsp.addChild(this.liantiao);this.btn=new egret.Bitmap;this.btn.texture=RES.getRes("welbtn");this.btn.anchorX=0.5;this.btn.anchorY=1;this.dropsp.addChild(this.btn);egret.Tween.get(this.dropsp).to({y:this.logo.y+110},600,egret.Ease.bounceOut).call(this.addLis,
this)};e.addLis=function(){this.btn.touchEnabled=!0;this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnCkH,this)};e.btnCkH=function(a){this.btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnCkH,this);Main.instance.dispatchEvent(new MainEvent(MainEvent.OPENLOADBAR,"maps"));SoundManager.stopBgSound()};e.destroy=function(){RES.destroyRes("welbg");RES.destroyRes("wellogo");RES.destroyRes("liantiao");RES.destroyRes("welbtn")};return f}(egret.DisplayObjectContainer);
Index.prototype.__class__="Index";
var LoadBar=function(d){function f(){d.call(this);this.init()}__extends(f,d);var e=f.prototype;e.init=function(){this.leftP=new egret.DisplayObjectContainer;this.rightP=new egret.DisplayObjectContainer;this.addChild(this.leftP);this.addChild(this.rightP);this.bm=Utils.createBitmapByName("loadbg");this.leftP.addChild(this.bm);this.bm=Utils.createBitmapByName("loadl");this.leftP.addChild(this.bm);this.bm=Utils.createBitmapByName("loadbg");this.bm.anchorX=1;this.bm.scaleX=-1;this.rightP.addChild(this.bm);
this.bm=Utils.createBitmapByName("loadr");this.rightP.addChild(this.bm);this.leftP.x=-400;this.rightP.x=800;this.prol=new egret.Sprite;this.prol.x=301;this.prol.y=340;this.leftP.addChild(this.prol);this.bm=Utils.createBitmapByName("probarbg");this.prol.addChild(this.bm);this.barl=Utils.createBitmapByName("probartop");this.barl.x=9;this.barl.y=9;this.barl.width=1;this.prol.addChild(this.barl);var a=new egret.Rectangle(0,0,99,36);this.prol.mask=a;this.pror=new egret.Sprite;this.pror.x=-99;this.pror.y=
340;this.rightP.addChild(this.pror);this.bm=Utils.createBitmapByName("probarbg");this.pror.addChild(this.bm);this.barr=Utils.createBitmapByName("probartop");this.barr.x=9;this.barr.y=9;this.barr.width=1;this.pror.addChild(this.barr);a=new egret.Rectangle(99,0,99,36);this.pror.mask=a;this.showLoadBar()};e.setProgress=function(a,c){this.barl.width=a/c*182;this.barr.width=a/c*182};e.showLoadBar=function(){TweenMax.to(this.leftP,0.3,{x:0,ease:Cubic.easeOut});TweenMax.to(this.rightP,0.3,{x:400,ease:Cubic.easeOut,
onComplete:function(){Main.instance.dispatchEvent(new MainEvent(MainEvent.REMOVE))}});SoundManager.playEffect("loaderClose")};e.hideLoadBar=function(){var a=this;TweenMax.to(this.leftP,0.3,{delay:0.6,x:-400,ease:Cubic.easeOut});TweenMax.to(this.rightP,0.3,{delay:0.6,x:800,ease:Cubic.easeOut,onComplete:function(){null!=a.parent&&a.parent.removeChild(a);SoundManager.playEffect("loaderOpen")}})};return f}(egret.DisplayObjectContainer);LoadBar.prototype.__class__="LoadBar";
var LoadingUI=function(d){function f(){d.call(this);this.createView()}__extends(f,d);var e=f.prototype;e.createView=function(){this.textField=new egret.TextField;this.addChild(this.textField);this.textField.y=300;this.textField.width=480;this.textField.height=100;this.textField.textAlign="center"};e.setProgress=function(a,c){this.textField.text="Loading..."+a+"/"+c};return f}(egret.Sprite);LoadingUI.prototype.__class__="LoadingUI";
var PreLoad=function(d){function f(){d.call(this);this.stageWidth=GameSetting.swid;this.stageHeight=GameSetting.shei;this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(f,d);var e=f.prototype;e.onAddToStage=function(a){this.bg=new egret.Bitmap;this.bg.texture=RES.getRes("0ui_bg");this.addChild(this.bg);this.barbg=new egret.Bitmap;this.barbg.texture=RES.getRes("probarbg");this.barbg.anchorX=0.5;this.barbg.x=this.stageWidth/2;this.barbg.y=this.stageHeight-138;this.addChild(this.barbg);
this.sp=new egret.DisplayObjectContainer;this.sp.x=this.stageWidth/2-91;this.sp.y=this.stageHeight-129;this.addChild(this.sp);this.bartop=new egret.Bitmap;this.bartop.texture=RES.getRes("probartop");this.bartop.width=1;this.sp.addChild(this.bartop);Loader.instance.load("welcomeload")};e.setProgress=function(a,c){this.bartop.width=a/c*182};e.loadComp=function(){this.removeChild(this.barbg);this.removeChild(this.sp);this.sp=this.bartop=this.barbg=null;this.btn=new egret.Bitmap;this.btn.texture=RES.getRes("0ui_btn");
this.btn.anchorX=0.5;this.btn.x=this.stageWidth/2;this.btn.y=this.stageHeight-156;this.addChild(this.btn);this.btn.touchEnabled=!0;this.btn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchH,this)};e.destroy=function(){RES.destroyRes("0ui_bg");RES.destroyRes("0ui_btn")};e.touchH=function(a){this.btn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchH,this);Main.instance.init();this.destroy()};return f}(egret.DisplayObjectContainer);PreLoad.prototype.__class__="PreLoad";
var Grid=function(){function d(d,a){this._numCols=d;this._numRows=a;this._nodes=[];for(var c=0;c<this._numCols;c++){this._nodes[c]=[];for(var b=0;b<this._numRows;b++)this._nodes[c][b]=new NodePoint(c,b)}}var f=d.prototype;f.getNode=function(d,a){return this._nodes[d][a]};f.setWalkable=function(d,a,c){this._nodes[d][a].walkable=c};return d}();Grid.prototype.__class__="Grid";
var HitTest=function(){function d(){}d.hitTestRect=function(d,e){var a=d.getBounds(),c=e.getBounds();a.x=d.x;a.y=d.y;c.x=e.x;c.y=e.y;return a.intersects(c)||c.intersects(a)};d.hitTestLayer=function(d,e){return Math.abs(d.x+d.width/2-(e.x+e.width/2))<=Math.abs((d.width+e.width)/2)&&Math.abs(d.y+d.height/2-(e.y+e.height/2))<=Math.abs((d.height+e.height)/2)};d.hitTestPoint=function(d){return!1};return d}();HitTest.prototype.__class__="HitTest";
var LifeBar=function(d){function f(){d.call(this);this.bg=Utils.createBitmapByName("lifeBarBg");this.addChild(this.bg);this.bar=Utils.createBitmapByName("lifeBar");this.addChild(this.bar);this.bar.x=this.bar.y=1;this.cacheAsBitmap=!0}__extends(f,d);var e=f.prototype;e.setProgress=function(a,c){var b=18*a/c;this.bar.width=0>b?0:b};e.reSet=function(){this.bar.width=18};return f}(egret.Sprite);LifeBar.prototype.__class__="LifeBar";
var World=function(d){function f(){d.call(this);SoundManager.playBgSound("mapbgsound");this.init()}__extends(f,d);var e=f.prototype;e.init=function(){this.bg=Utils.createBitmapByName("map");this.addChild(this.bg);this.back=Utils.createBitmapByName("backToIndex");this.addChild(this.back);this.back.x=80;this.back.y=GameSetting.shei;this.hero=Utils.createBitmapByName("heroIcon");this.addChild(this.hero);this.hero.x=620;this.hero.y=GameSetting.shei;TweenMax.to(this.back,0.5,{delay:1,y:GameSetting.shei-
80,ease:Circ.easeInOut});TweenMax.to(this.hero,0.5,{delay:1,y:GameSetting.shei-100,ease:Circ.easeInOut});this.back.touchEnabled=!0;this.back.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.backH,this);this.hero.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.openHeroH,this);this.flagArr=[];for(var a=GuanKaConfig.getData(),c=a.length,b,d=0;d<c;d++){var e=a[d].ispass;b=Utils.createBitmapByName(e?"flag0":"flag1");b.x=a[d].xpos;b.y=a[d].ypos;b.alpha=0;b.touchEnabled=!0;b.addEventListener(egret.TouchEvent.TOUCH_BEGIN,
this.choseGuanka,this);this.addChild(b);this.flagArr.push(b);if(!e)break}for(d=0;d<this.flagArr.length;d++)TweenMax.fromTo(this.flagArr[d],0.3,{alpha:0,y:this.flagArr[d].y-30},{alpha:1,y:this.flagArr[d].y,delay:0.1*d+1})};e.removeLis=function(){var a,c;for(a=0;a<this.flagArr.length;a++)c=this.flagArr[a],c.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.choseGuanka,this)};e.addLis=function(){var a,c;for(a=0;a<this.flagArr.length;a++)c=this.flagArr[a],c.addEventListener(egret.TouchEvent.TOUCH_BEGIN,
this.choseGuanka,this)};e.showXZ=function(){this.xzmb=new egret.Sprite;this.xzmb.anchorX=this.xzmb.anchorY=0.5;this.xzmb.x=GameSetting.swid/2;this.xzmb.y=GameSetting.shei/2;this.addChild(this.xzmb);this.xzmb.scaleX=this.xzmb.scaleY=0.1;this.gkxz=Utils.createBitmapByName("gkxz");this.xzmb.addChild(this.gkxz);this.gushi=Utils.createBitmapByName("gushimoshi");this.gushi.x=75;this.gushi.y=125;this.xzmb.addChild(this.gushi);this.wujin=GuanKaConfig.data[Main.curIdx].ispass?Utils.createBitmapByName("wujinmoshi"):
Utils.createBitmapByName("wujinmoshi2");this.wujin.x=75;this.wujin.y=187;this.xzmb.addChild(this.wujin);this.xx=Utils.createBitmapByName("xx");this.xx.x=280;this.xx.y=16;this.xzmb.addChild(this.xx);this.gktxt=new egret.BitmapText;var a=RES.getRes("NumFontda");this.gktxt.font=a;this.gktxt.letterSpacing=-1;this.gktxt.text=(Main.curIdx+1).toString();this.gktxt.x=163-this.gktxt.width/2;this.gktxt.y=18;this.xzmb.addChild(this.gktxt);this.txt=new egret.BitmapText;a=RES.getRes("NumFont0");this.txt.font=
a;this.txt.letterSpacing=-1;this.txt.text=GuanKaConfig.data[Main.curIdx].wujin.toString();this.txt.x=215;this.txt.y=58;this.xzmb.addChild(this.txt);this.gushi.touchEnabled=!0;this.xx.touchEnabled=!0;this.gushi.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.gushiHandle,this);this.xx.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.closeHandle,this);GuanKaConfig.data[Main.curIdx].ispass&&(this.wujin.touchEnabled=!0,this.wujin.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.wujinHandle,this));
TweenMax.to(this.xzmb,0.3,{scaleX:1,scaleY:1,ease:Back.easeOut})};e.gushiHandle=function(a){Main.wujin=!1;this.loadGuanka()};e.wujinHandle=function(a){Main.wujin=!0;this.loadGuanka()};e.closeHandle=function(a){this.xx.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.closeHandle,this);this.gushi.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.gushiHandle,this);this.wujin.hasEventListener(egret.TouchEvent.TOUCH_BEGIN)&&this.wujin.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.wujinHandle,
this);var c=this;TweenMax.to(this.xzmb,0.3,{scaleX:0.1,scaleY:0.1,ease:Back.easeIn,onComplete:function(){c.removeChild(c.xzmb);c.xzmb=null;c.addLis()}})};e.choseGuanka=function(a){Main.curIdx=this.flagArr.indexOf(a.currentTarget);this.removeLis();this.showXZ()};e.loadGuanka=function(){Main.loadCommis1st?(console.log("\u52a0\u8f7dUI\u8d44\u6e90"),Main.instance.dispatchEvent(new MainEvent(MainEvent.OPENLOADBAR,"uiLoad")),Main.loadCommis1st=!1):(console.log("\u52a0\u8f7d\u5173\u5361\u8d44\u6e90"),Main.instance.dispatchEvent(new MainEvent(MainEvent.OPENLOADBAR,
GuanKaConfig.guankaData[Main.curIdx])));SoundManager.stopBgSound()};e.backH=function(a){this.back.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.backH,this);Main.instance.dispatchEvent(new MainEvent(MainEvent.OPENLOADBAR,"welcomeload"));SoundManager.stopBgSound()};e.openHeroH=function(a){};e.destroy=function(){RES.destroyRes("map");TweenMax.killChildTweensOf(this);for(var a=0;a<this.flagArr.length;a++)this.flagArr[a].removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.choseGuanka,this)};
return f}(egret.Sprite);World.prototype.__class__="World";
